/*
	
	Ractive - v0.3.9 - 2013-12-31
	==============================================================

	Next-generation DOM manipulation - http://ractivejs.org
	Follow @RactiveJS for updates

	--------------------------------------------------------------

	Copyright 2013 2013 Rich Harris and contributors

	Permission is hereby granted, free of charge, to any person
	obtaining a copy of this software and associated documentation
	files (the "Software"), to deal in the Software without
	restriction, including without limitation the rights to use,
	copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the
	Software is furnished to do so, subject to the following
	conditions:

	The above copyright notice and this permission notice shall be
	included in all copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
	EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
	OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
	NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
	HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
	WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
	FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
	OTHER DEALINGS IN THE SOFTWARE.

*/

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

/*! pajamas - v1.6.1 - 2013-11-04
* http://documentup.com/geowa4/pajamas
* Copyright (c) 2013 ; Licensed MIT */

/** @license
 * RequireJS plugin for loading JSON files
 * - depends on Text plugin and it was HEAVILY "inspired" by it as well.
 * Author: Miller Medeiros
 * Version: 0.3.1 (2013/02/04)
 * Released under the MIT license
 */

(function(){(function(e){var t=function(){if(typeof document=="undefined")return;return document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),n=function(){var e;try{Object.create(null),e=Object.create}catch(t){e=function(){var e=function(){};return function(t,n){var r;return t===null?{}:(e.prototype=t,r=new e,n&&Object.defineProperties(r,n),r)}}()}return e}(),r={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},i=function(e,t){return e?function(e,t){return t?document.createElementNS(t,e):document.createElement(e)}:function(e,n){if(n&&n!==t.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See https://github.com/RactiveJS/Ractive/wiki/SVG-and-older-browsers for more information";return document.createElement(e)}}(t,r),s=function(){return typeof document=="object"?!0:!1}(),o=function(e){try{return Object.defineProperty({},"test",{value:0}),e&&Object.defineProperty(document.createElement("div"),"test",{value:0}),Object.defineProperty}catch(t){return function(e,t,n){e[t]=n.value}}}(s),u=function(e,t,n){try{try{Object.defineProperties({},{test:{value:0}})}catch(r){throw r}return n&&Object.defineProperties(e("div"),{test:{value:0}}),Object.defineProperties}catch(r){return function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&t(e,r,n[r])}}}(i,o,s),a=function(){var e=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function(t){return(t||"").replace(e,".$1")}}(),f={},l={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40},c=function(){var e=Object.prototype.toString;return function(t){return e.call(t)==="[object Array]"}}(),h=function(){return function e(t,n){var r,i;(i=t._wrapped[n])&&i.teardown()!==!1&&(t._wrapped[n]=null),t._cache[n]=undefined;if(r=t._cacheMap[n])while(r.length)e(t,r.pop())}}(),p=function(){return function(e,t){var n,r,i,s,o,u;n=[],u=e.rendered?e.el:e.fragment.docFrag,r=u.querySelectorAll('input[type="checkbox"][name="{{'+t+'}}"]'),s=r.length;for(o=0;o<s;o+=1){i=r[o];if(i.hasAttribute("checked")||i.checked)n[n.length]=i._ractive.value}return n}}(),d=function(e){return function(t){var n,r,i,s,o,u;n=t._deferred;while(r=n.evals.pop())r.update().deferred=!1;while(i=n.selectValues.pop())i.deferredUpdate();while(s=n.attrs.pop())s.update().deferred=!1;while(o=n.checkboxes.pop())t.set(o,e(t,o));while(u=n.radios.pop())u.update()}}(p),v=function(){return function(e){var t,n,r,i,s,o;t=e._deferred;if(n=t.focusable)n.focus(),t.focusable=null;while(r=t.liveQueries.pop())r._sort();while(i=t.decorators.pop())i.init();while(s=t.transitions.pop())s.init();while(o=t.observers.pop())o.update()}}(),m=function(){var e=function(e,t){var n,r,i,s;return e._parent&&e._parent._transitionManager?e._parent._transitionManager:(r=[],i=function(){var e,t;e=r.length;while(e--)t=r[e],s(t.node)&&(t.detach(),r.splice(e,1))},s=function(e){var t,r;t=n.active.length;while(t--){r=n.active[t];if(e.contains(r))return!1}return!0},n={active:[],push:function(e){n.active[n.active.length]=e},pop:function(e){var t;t=n.active.indexOf(e);if(t===-1)return;n.active.splice(t,1),i(),!n.active.length&&n._ready&&n.complete()},complete:function(){t&&t.call(e)},ready:function(){i(),n._ready=!0,n.active.length||n.complete()},detachWhenReady:function(e){r[r.length]=e}},n)};return e}(),g=function(){function r(e,t,n,r){var o=e._deps[n];if(!o)return;i(o[t]);if(r)return;s(e._depsMap[t],e,n)}function i(e){var t,n;if(e){n=e.length;for(t=0;t<n;t+=1)e[t].update()}}function s(e,t,n,i){var s;if(e){s=e.length;while(s--)r(t,e[s],n,i)}}function o(e,n,r,i,s){var a,f,l,c,h,p,d,v;a=e._patternObservers.length;while(a--)f=e._patternObservers[a],f.regex.test(r)&&f.update(r);if(i)return;v=function(n){if(l=e._depsMap[n]){a=l.length;while(a--)c=l[a],h=t.exec(c)[0],p=r+"."+h,o(e,c,p)}},s?(d=u(r),d.forEach(v)):v(n)}function u(e){var t,n,r,i,s,o;t=e.split("."),n=a(t.length),s=[],r=function(e,n){return e?"*":t[n]},i=n.length;while(i--)o=n[i].map(r).join("."),s[o]||(s[s.length]=o,s[o]=!0);return s}function a(e){var t="",r,i,s,o,u;if(!n[e]){s=[];while(t.length<e)t+=1;r=parseInt(t,2),o=function(e){return e==="1"};for(u=0;u<=r;u+=1){i=u.toString(2);while(i.length<e)i="0"+i;s[u]=Array.prototype.map.call(i,o)}n[e]=s}return n[e]}var e,t,n={};return t=/[^\.]+$/,e=function(e,t,n){var i;e._patternObservers.length&&o(e,t,t,n,!0);for(i=0;i<e._deps.length;i+=1)r(e,t,i,n)},e.multiple=function(e,t,n){var i,s,u;u=t.length;if(e._patternObservers.length){i=u;while(i--)o(e,t[i],t[i],n,!0)}for(i=0;i<e._deps.length;i+=1)if(e._deps[i]){s=u;while(s--)r(e,t[s],i,n)}},e}(),y=function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m,g;return a={filter:function(e){return n(e)&&(!e._ractive||!e._ractive.setting)},wrap:function(e,t,n){return new l(e,t,n)}},l=function(e,n,r){this.root=e,this.value=n,this.keypath=r,n._ractive||(t(n,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),c(n)),n._ractive.instances[e._guid]||(n._ractive.instances[e._guid]=0,n._ractive.instances.push(e)),n._ractive.instances[e._guid]+=1,n._ractive.wrappers.push(this)},l.prototype={get:function(){return this.value},teardown:function(){var e,t,n,r,i;e=this.value,t=e._ractive,n=t.wrappers,r=t.instances;if(t.setting)return!1;i=n.indexOf(this);if(i===-1)throw new Error(g);n.splice(i,1);if(!n.length)delete e._ractive,h(this.value);else{r[this.root._guid]-=1;if(!r[this.root._guid]){i=r.indexOf(this.root);if(i===-1)throw new Error(g);r.splice(i,1)}}}},f=function(t,n,s){var o,a,f,l,c;o=function(e,o){var f,l,c,h,p,d,v,m,g,y,b,w;if(n==="sort"||n==="reverse"){e.set(o,t);return}r(e,o),p=[],d=[];for(v=0;v<e._deps.length;v+=1){f=e._deps[v];if(!f)continue;l=f[o];if(l){a(o,l,p,d),i(e);while(p.length)p.pop().smartUpdate(n,s);while(d.length)d.pop().update()}}if(n==="splice"&&s.length>2&&s[1]){m=Math.min(s[1],s.length-2),g=s[0],y=g+m,s[1]===s.length-2&&(w=!0);for(v=g;v<y;v+=1)b=o+"."+v,u(e,b)}i(e),h=[],c=o.split(".");while(c.length)c.pop(),h[h.length]=c.join(".");u.multiple(e,h,!0),w||u(e,o+".length",!0)},a=function(t,n,r,i){var s,o;s=n.length;while(s--)o=n[s],o.type===e.REFERENCE?o.update():o.keypath===t&&o.type===e.SECTION&&!o.inverted&&o.docFrag?r[r.length]=o:i[i.length]=o},f=t._ractive.wrappers,c=f.length;while(c--)l=f[c],o(l.root,l.keypath)},p=[],v=["pop","push","reverse","shift","sort","splice","unshift"],m=function(){},v.forEach(function(e){var n=function(){var t,n,r,u,a={},l={};t=Array.prototype[e].apply(this,arguments),n=this._ractive.instances,u=n.length;while(u--)r=n[u],a[r._guid]=r._transitionManager,r._transitionManager=l[r._guid]=o(r,m);this._ractive.setting=!0,f(this,e,arguments),this._ractive.setting=!1,u=n.length;while(u--)r=n[u],r._transitionManager=a[r._guid],l[r._guid].ready(),i(r),s(r);return t};t(p,e,{value:n})}),d={},d.__proto__?(c=function(e){e.__proto__=p},h=function(e){e.__proto__=Array.prototype}):(c=function(e){var n,r;n=v.length;while(n--)r=v[n],t(e,r,{value:p[r],configurable:!0})},h=function(e){var t;t=v.length;while(t--)delete e[v[t]]}),g="Something went wrong in a rather interesting way",a}(l,o,c,h,d,v,m,g),b=function(){var e,t;try{Object.defineProperty({},"test",{value:0})}catch(n){return!1}return e={filter:function(e,t){return!!t},wrap:function(e,n,r){return new t(e,n,r)}},t=function(e,t,n){var r=this,i,s,o,u,a,f,l,c,h;this.ractive=e,this.keypath=n,i=n.split("."),this.prop=i.pop(),o=i.join("."),this.obj=o?e.get(o):e.data,u=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop);if(u&&u.set&&(a=u.set._ractiveWrappers)){a.indexOf(this)===-1&&a.push(this);return}if(u&&!u.configurable)throw new Error('Cannot use magic mode with property "'+s+'" - object is not configurable');u&&(this.value=u.value,f=u.get,l=u.set),c=f||function(){return r.value},h=function(e){var t,n,r;l&&l(e),t=h._ractiveWrappers,r=t.length;while(r--)n=t[r],n.resetting||n.ractive.set(n.keypath,e)},h._ractiveWrappers=[this],Object.defineProperty(this.obj,this.prop,{get:c,set:h,enumerable:!0,configurable:!0})},t.prototype={get:function(){return this.value},reset:function(e){this.resetting=!0,this.value=e,this.resetting=!1},teardown:function(){var e,t,n,r;e=Object.getOwnPropertyDescriptor(this.obj,this.prop),t=e.set,r=t._ractiveWrappers,r.splice(r.indexOf(this),1),r.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configrable:!0}),this.obj[this.prop]=n)}},e}(),w=function(e,t,n){function i(e,t){var n={},r;if(!t)return e;t+=".";for(r in e)e.hasOwnProperty(r)&&(n[t+r]=e[r]);return n}function s(e){var t;return r[e]||(t=e?e+".":"",r[e]=function(n,r){var s;if(typeof n=="string")return s={},s[t+n]=r,s;if(typeof n=="object")return t?i(n,e):n}),r[e]}var r={};return function(r,i,o,u){var a,f,l,c;a=r.adaptors.length;for(f=0;f<a;f+=1){l=r.adaptors[f];if(typeof l=="string"){if(!e[l])throw new Error('Missing adaptor "'+l+'"');l=r.adaptors[f]=e[l]}if(l.filter(o,i,r)){c=r._wrapped[i]=l.wrap(r,o,i,s(i)),c.value=o;return}}u||(r.magic&&n.filter(o,i,r)?r._wrapped[i]=n.wrap(r,o,i):r.modifyArrays&&t.filter(o,i,r)&&(r._wrapped[i]=t.wrap(r,o,i)))}}(f,y,b),E=function(e,t,n){var r,i,s;return r=function(e){return this._captured&&!this._captured[e]&&(this._captured.push(e),this._captured[e]=!0),i(this,e)},i=function(t,r){var i,o,u,a,f;return r=e(r),i=t._cache,(o=i[r])!==undefined?o:((a=t._wrapped[r])?u=a.value:r?(f=t._evaluators[r])?u=f.value:u=s(t,r):(n(t,"",t.data),u=t.data),i[r]=u,u)},s=function(e,t){var r,s,o,u,a,f,l;r=t.split("."),s=r.pop(),o=r.join("."),u=i(e,o);if(l=e._wrapped[o])u=l.get();if(u===null||u===undefined)return;return(a=e._cacheMap[o])?a.indexOf(t)===-1&&(a[a.length]=t):e._cacheMap[o]=[t],f=u[s],n(e,t,f),e._cache[t]=f,f},r}(a,f,w),S=function(){var e=Object.prototype.toString;return function(t){return typeof t=="object"&&e.call(t)==="[object Object]"}}(),x=function(){return function(e,t){return e===null&&t===null?!0:typeof e=="object"||typeof t=="object"?!1:e===t}}(),T=function(){var e;return e=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p;p='Could not resolve reference - too many "../" prefixes';if(t==="."){if(!n.length)return"";r=n[n.length-1]}else if(t.charAt(0)==="."){h=n[n.length-1],o=h?h.split("."):[];if(t.substr(0,3)==="../"){while(t.substr(0,3)==="../"){if(!o.length)throw new Error(p);o.pop(),t=t.substring(3)}o.push(t),r=o.join(".")}else h?r=h+t:r=t.substring(1)}else{i=t.split("."),s=i.pop(),a=i.length?"."+i.join("."):"",n=n.concat();while(n.length){u=n.pop(),f=u+a,l=e.get(f);if(c=e._wrapped[f])l=c.get();if(typeof l=="object"&&l!==null&&l.hasOwnProperty(s)){r=u+"."+t;break}}!r&&e.get(t)!==undefined&&(r=t)}return r?r.replace(/^\./,""):r},e}(),N=function(e){var t=Array.prototype.push;return function(n){var r,i,s;while(r=n._pendingResolution.pop())i=e(n,r.ref,r.contextStack),i!==undefined?r.resolve(i):(s||(s=[])).push(r);s&&t.apply(n._pendingResolution,s)}}(T),C=function(e,t){return function(n){e(n),t(n)}}(d,v),k=function(){return function(e,t,n){var r,i,s,o,u,a,f;r=t.split("."),i=[],(s=e._wrapped[""])?(s.set&&s.set(r.join("."),n),o=s.get()):o=e.data;while(r.length>1)u=i[i.length]=r.shift(),a=i.join("."),(s=e._wrapped[a])?(s.set&&s.set(r.join("."),n),o=s.get()):(o.hasOwnProperty(u)||(f||(f=a),o[u]=/^\s*[0-9]+\s*$/.test(r[0])?[]:{}),o=o[u]);return u=r[0],o[u]=n,f}}(),L=function(e,t,n,r,i,s,o,u,a){var f,l,c,h;return f=function(t,r,a){var f,h,p,d,v,m,g;h=[],e(t)&&(f=t,a=r);if(f)for(t in f)f.hasOwnProperty(t)&&(r=f[t],t=n(t),l(this,t,r,h));else t=n(t),l(this,t,r,h);if(!h.length)return;d=this._transitionManager,this._transitionManager=v=o(this,a),p=c(h),p.length&&i.multiple(this,p,!0),i.multiple(this,h),this._pendingResolution.length&&s(this),u(this),this._transitionManager=d,v.ready();if(!this.firingChangeEvent){this.firingChangeEvent=!0,g={},m=h.length;while(m--)g[h[m]]=this.get(h[m]);this.fire("change",g),this.firingChangeEvent=!1}return this},l=function(e,t,n,i){var s,o,u,f,l;if((u=e._wrapped[t])&&u.reset&&h(e,t,n,u,i)!==!1)return;if(l=e._evaluators[t])l.value=n;s=e._cache[t],o=e.get(t);if(o!==n&&!l)f=a(e,t,n);else if(n===s&&typeof n!="object")return;r(e,f||t),i[i.length]=t},c=function(e){var t=[""],n,r,i,s;n=e.length;while(n--){r=e[n],i=r.split(".");while(i.length>1)i.pop(),s=i.join("."),t[s]||(t[t.length]=s,t[s]=!0)}return t},h=function(e,n,i,s,o){var u,a,f,l;u=s.get();if(!t(u,i)&&s.reset(i)===!1)return!1;i=s.get(),a=e._cache[n];if(!t(a,i)){e._cache[n]=i,f=e._cacheMap[n];if(f){l=f.length;while(l--)r(e,f[l])}o[o.length]=n}},f}(S,x,a,h,g,N,m,C,k),A=function(e,t,n,r,i){return function(s,o){var u,a;return typeof s=="function"&&(o=s,s=""),a=this._transitionManager,this._transitionManager=u=e(this,o),t(this),n(this,s||""),r(this,s||""),i(this),this._transitionManager=a,u.ready(),typeof s=="string"?this.fire("update",s):this.fire("update"),this}}(m,N,h,g,C),O=function(e){return function(t,n){var r;if(!e(t)||!e(n))return!1;if(t.length!==n.length)return!1;r=t.length;while(r--)if(t[r]!==n[r])return!1;return!0}}(c),M=function(e,t,n){function r(e,i,s,o,u){var a,f,l,c,h,p;a=e._twowayBindings[i];if(a){l=a.length;while(l--){c=a[l];if(c.radioName&&!c.node.checked)continue;if(c.checkboxName){c.changed()&&!o[i]&&(o[i]=!0,o[o.length]=i);continue}h=c.attr.value,p=c.value();if(t(h,p))continue;n(h,p)||(s[i]=p)}}if(!u)return;f=e._depsMap[i];if(f){l=f.length;while(l--)r(e,f[l],s,o,u)}}return function(t,n){var i,s,o;typeof t!="string"&&(t="",n=!0),r(this,t,i={},s=[],n);if(o=s.length)while(o--)t=s[o],i[t]=e(this,t);this.set(i)}}(p,O,x),_=function(){if(typeof window=="undefined")return;return function(e,t,n){var r,i;if(n.requestAnimationFrame)return;for(r=0;r<e.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[e[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(e){var n,r,s;return n=Date.now(),r=Math.max(0,16-(n-t)),s=i(function(){e(n+r)},r),t=n+r,s})}(["ms","moz","webkit","o"],0,window),window.requestAnimationFrame}(),D=function(e){var t=[],n={tick:function(){var r,i;for(r=0;r<t.length;r+=1)i=t[r],i.tick()||t.splice(r--,1);t.length?e(n.tick):n.running=!1},add:function(e){t[t.length]=e,n.running||(n.running=!0,n.tick())},abort:function(e,n){var r=t.length,i;while(r--)i=t[r],i.root===n&&i.keypath===e&&i.stop()}};return n}(_),P=function(){return typeof console!="undefined"&&typeof console.warn=="function"&&typeof console.warn.apply=="function"?function(){console.warn.apply(console,arguments)}:function(){}}(),H=function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}}(),B=function(e,t,n){function i(e,t){var n=t-e;return n?function(t){return e+t*n}:function(){return e}}function s(e,t){var n,i,s,o;n=[],i=[],o=s=Math.min(e.length,t.length);while(o--)i[o]=r(e[o],t[o]);for(o=s;o<e.length;o+=1)n[o]=e[o];for(o=s;o<t.length;o+=1)n[o]=t[o];return function(e){var t=s;while(t--)n[t]=i[t](e);return n}}function o(e,t){var n=[],i,s,o,u;o={},s={};for(u in e)e.hasOwnProperty(u)&&(t.hasOwnProperty(u)?(n[n.length]=u,s[u]=r(e[u],t[u])):o[u]=e[u]);for(u in t)t.hasOwnProperty(u)&&!e.hasOwnProperty(u)&&(o[u]=t[u]);return i=n.length,function(e){var t=i,r;while(t--)r=n[t],o[r]=s[r](e);return o}}var r=function(r,u){return n(r)&&n(u)?i(+r,+u):e(r)&&e(u)?s(r,u):t(r)&&t(u)?o(r,u):function(){return u}};return r}(c,S,H),j=function(e,t){var n=function(e){var n;this.startTime=Date.now();for(n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);this.interpolator=t(this.from,this.to),this.running=!0};return n.prototype={tick:function(){var t,n,r,i,s,o;return o=this.keypath,this.running?(i=Date.now(),t=i-this.startTime,t>=this.duration?(o!==null&&this.root.set(o,this.to),this.step&&this.step(1,this.to),this.complete&&this.complete(1,this.to),s=this.root._animations.indexOf(this),s===-1&&e("Animation was not found"),this.root._animations.splice(s,1),this.running=!1,!1):(n=this.easing?this.easing(t/this.duration):t/this.duration,o!==null&&(r=this.interpolator(n),this.root.set(o,r)),this.step&&this.step(n,r),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),t===-1&&e("Animation was not found"),this.root._animations.splice(t,1)}},n}(P,B),F=function(){return{linear:function(e){return e},easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)}}}(),I=function(e,t,n,r){function s(s,o,u,a){var f,l,c,h;return o!==null&&(h=s.get(o)),t.abort(o,s),e(h,u)?(a.complete&&a.complete(1,a.to),i):(a.easing&&(typeof a.easing=="function"?f=a.easing:s.easing&&s.easing[a.easing]?f=s.easing[a.easing]:f=r[a.easing],typeof f!="function"&&(f=null)),l=a.duration===undefined?400:a.duration,c=new n({keypath:o,from:h,to:u,root:s,duration:l,easing:f,step:a.step,complete:a.complete}),t.add(c),s._animations[s._animations.length]=c,c)}var i={stop:function(){}};return function(e,t,n){var r,i,o,u,a,f,l,c,h,p,d,v;if(typeof e=="object"){n=t||{},u=n.easing,a=n.duration,o=[],f=n.step,l=n.complete;if(f||l)h={},n.step=null,n.complete=null,c=function(e){return function(t,n){h[e]=n}};for(r in e)if(e.hasOwnProperty(r)){if(f||l)p=c(r),n={easing:u,duration:a},f&&(n.step=p),l&&(n.complete=p);o[o.length]=s(this,r,e[r],n)}if(f||l)v={easing:u,duration:a},f&&(v.step=function(e){f(e,h)}),l&&(v.complete=function(e){l(e,h)}),o[o.length]=d=s(this,null,null,v);return{stop:function(){while(o.length)o.pop().stop();d&&d.stop()}}}return n=n||{},i=s(this,e,t,n),{stop:function(){i.stop()}}}}(x,D,j,F),q=function(){return function(e,t){var n=this,r,i;if(typeof e=="object"){r=[];for(i in e)e.hasOwnProperty(i)&&(r[r.length]=this.on(i,e[i]));return{cancel:function(){while(r.length)r.pop().cancel()}}}return this._subs[e]?this._subs[e].push(t):this._subs[e]=[t],{cancel:function(){n.off(e,t)}}}}(),R=function(){return function(e,t){var n,r;if(!t)if(!e)for(e in this._subs)delete this._subs[e];else this._subs[e]=[];n=this._subs[e],n&&(r=n.indexOf(t),r!==-1&&n.splice(r,1))}}(),U=function(){return function(e){var t,n,r,i,s,o,u,a;o=e.root,u=e.keypath,a=e.priority,t=o._deps[a]||(o._deps[a]={}),n=t[u]||(t[u]=[]),n[n.length]=e,e.registered=!0;if(!u)return;r=u.split(".");while(r.length)r.pop(),i=r.join("."),s=o._depsMap[i]||(o._depsMap[i]=[]),s[u]===undefined&&(s[u]=0,s[s.length]=u),s[u]+=1,u=i}}(),z=function(){return function(e){var t,n,r,i,s,o,u,a;o=e.root,u=e.keypath,a=e.priority,t=o._deps[a][u],n=t.indexOf(e);if(n===-1||!e.registered)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");t.splice(n,1),e.registered=!1;if(!u)return;r=u.split(".");while(r.length)r.pop(),i=r.join("."),s=o._depsMap[i],s[u]-=1,s[u]||(s.splice(s.indexOf(u),1),s[u]=undefined),u=i}}(),W=function(e){var t=function(e,t,n,r){var i=this;this.root=e,this.keypath=t,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.proxy={update:function(){i.reallyUpdate()}},this.priority=0,this.context=r&&r.context?r.context:e};return t.prototype={init:function(e){e!==!1?this.update():this.value=this.root.get(this.keypath)},update:function(){if(this.defer&&this.ready){this.root._deferred.observers.push(this.proxy);return}this.reallyUpdate()},reallyUpdate:function(){var t,n;t=this.value,n=this.root.get(this.keypath),this.value=n;if(this.updating)return;this.updating=!0;if(!e(n,t)||!this.ready)try{this.callback.call(this.context,n,t,this.keypath)}catch(r){if(this.debug||this.root.debug)throw r}this.updating=!1}},t}(x),X=function(){return function(e,t){var n,r,i,s,o,u,a;n=t.split("."),s=[],u=function(t){var n,r;n=e._wrapped[t]?e._wrapped[t].get():e.get(t);for(r in n)o.push(t+"."+r)},a=function(e){return e+"."+r};while(r=n.shift())r==="*"?(o=[],s.forEach(u),s=o):s[0]?s=s.map(a):s[0]=r;return i={},s.forEach(function(t){i[t]=e.get(t)}),i}}(),V=function(e,t){var n,r=/\*/;return n=function(e,t,n,r){this.root=e,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.keypath=t,this.regex=new RegExp("^"+t.replace(/\./g,"\\.").replace(/\*/g,"[^\\.]+")+"$"),this.values={},this.defer&&(this.proxies=[]),this.priority="pattern",this.context=r&&r.context?r.context:e},n.prototype={init:function(e){var n,r;n=t(this.root,this.keypath);if(e!==!1)for(r in n)n.hasOwnProperty(r)&&this.update(r);else this.values=n},update:function(e){var n;if(r.test(e)){n=t(this.root,e);for(e in n)n.hasOwnProperty(e)&&this.update(e);return}if(this.defer&&this.ready){this.root._deferred.observers.push(this.getProxy(e));return}this.reallyUpdate(e)},reallyUpdate:function(t){var n=this.root.get(t);if(this.updating){this.values[t]=n;return}this.updating=!0;if(!e(n,this.values[t])||!this.ready){try{this.callback.call(this.context,n,this.values[t],t)}catch(r){if(this.debug||this.root.debug)throw r}this.values[t]=n}this.updating=!1},getProxy:function(e){var t=this;return this.proxies[e]||(this.proxies[e]={update:function(){t.reallyUpdate(e)}}),this.proxies[e]}},n}(x,X),$=function(e,t,n,r,i){var s=/\*/,o={};return function(a,f,l,c){var h,p;return f=e(f),c=c||o,s.test(f)?(h=new i(a,f,l,c),a._patternObservers.push(h),p=!0):h=new r(a,f,l,c),t(h),h.init(c.init),h.ready=!0,{cancel:function(){var e;p&&(e=a._patternObservers.indexOf(h),e!==-1&&a._patternObservers.splice(e,1)),n(h)}}}}(a,U,z,W,V),J=function(e,t){return function(r,i,s){var o=[],u;if(e(r)){s=i;for(u in r)r.hasOwnProperty(u)&&(i=r[u],o[o.length]=t(this,u,i,s));return{cancel:function(){while(o.length)o.pop().cancel()}}}return t(this,r,i,s)}}(S,$),K=function(){return function(e){var t,n,r,i=this._subs[e];if(!i)return;t=Array.prototype.slice.call(arguments,1);for(n=0,r=i.length;n<r;n+=1)i[n].apply(this,t)}}(),Q=function(){return function(e){return this.el?this.fragment.find(e):null}}(),G=function(e,t){var n,r,i,s,o,u,a,f;if(!e)return;n=t("div"),r=["matches","matchesSelector"],o=["o","ms","moz","webkit"],f=function(e){return function(t,n){return t[e](n)}},u=r.length;while(u--){i=r[u];if(n[i])return f(i);a=o.length;while(a--){s=o[u]+i.substr(0,1).toUpperCase()+i.substring(1);if(n[s])return f(s)}}return function(e,t){var n,r;n=(e.parentNode||e.document).querySelectorAll(t),r=n.length;while(r--)if(n[r]===e)return!0;return!1}}(s,i),Y=function(e){return function(t,n){var r=this._isComponentQuery?!this.selector||t.name===this.selector:e(t.node,this.selector);if(r)return this.push(t.node||t.instance),n||this._makeDirty(),!0}}(G),Z=function(){return function(){var e,t,n;e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],t=this.selector,n=e.indexOf(t),n!==-1&&(e.splice(n,1),e[t]=null)}}(),et=function(){function e(e){var t;if(t=e.parentFragment)return t.owner;if(e.component&&(t=e.component.parentFragment))return t.owner}function t(t){var n,r;n=[t],r=e(t);while(r)n.push(r),r=e(r);return n}return function(e,n){var r,i,s,o,u,a,f,l,c,h;r=t(e.component||e._ractive.proxy),i=t(n.component||n._ractive.proxy),s=r[r.length-1],o=i[i.length-1];while(s&&s===o)r.pop(),i.pop(),u=s,s=r[r.length-1],o=i[i.length-1];s=s.component||s,o=o.component||o,c=s.parentFragment,h=o.parentFragment;if(c===h)return a=c.items.indexOf(s),f=h.items.indexOf(o),a-f||r.length-i.length;if(l=u.fragments)return a=l.indexOf(c),f=l.indexOf(h),a-f||r.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")}}(),tt=function(e){return function(t,n){var r;return t.compareDocumentPosition?(r=t.compareDocumentPosition(n),r&2?1:-1):e(t,n)}}(et),nt=function(e,t){return function(){this.sort(this._isComponentQuery?t:e),this._dirty=!1}}(tt,et),rt=function(){return function(){this._dirty||(this._root._deferred.liveQueries.push(this),this._dirty=!0)}}(),it=function(){return function(e){var t=this.indexOf(this._isComponentQuery?e.instance:e.node);t!==-1&&this.splice(t,1)}}(),st=function(e,t,n,r,i,s){return function(o,u,a,f){var l;return l=[],e(l,{selector:{value:u},live:{value:a},_isComponentQuery:{value:f},_test:{value:t}}),a?(e(l,{cancel:{value:n},_root:{value:o},_sort:{value:r},_makeDirty:{value:i},_remove:{value:s},_dirty:{value:!1,writable:!0}}),l):l}}(u,Y,Z,nt,rt,it),ot=function(e,t,n,r){return function(e,t){var n,i;return this.el?(t=t||{},n=this._liveQueries,(i=n[e])?t&&t.live?i:i.slice():(i=r(this,e,!!t.live,!1),i.live&&(n.push(e),n[e]=i),this.fragment.findAll(e,i),i)):[]}}(P,G,u,st),ut=function(){return function(e){return this.fragment.findComponent(e)}}(),at=function(e,t,n,r){return function(e,t){var n,i;return t=t||{},n=this._liveComponentQueries,(i=n[e])?t&&t.live?i:i.slice():(i=r(this,e,!!t.live,!0),i.live&&(n.push(e),n[e]=i),this.fragment.findAllComponents(e,i),i)}}(P,G,u,st),ft=function(){return function(e){var t;if(typeof window=="undefined"||!document||!e)return null;if(e.nodeType)return e;if(typeof e=="string"){t=document.getElementById(e),!t&&document.querySelector&&(t=document.querySelector(e));if(t&&t.nodeType)return t}return e[0]&&e[0].nodeType?e[0]:null}}(),lt=function(e,t){return function(n,r){var i,s,o,u,a;n.owner=r.owner,o=n.owner.parentFragment,n.root=r.root,n.pNode=r.pNode,n.contextStack=r.contextStack||[],n.owner.type===e.SECTION&&(n.index=r.index);if(o){u=o.indexRefs;if(u){n.indexRefs=t(null);for(a in u)n.indexRefs[a]=u[a]}}n.priority=o?o.priority+1:1,r.indexRef&&(n.indexRefs||(n.indexRefs={}),n.indexRefs[r.indexRef]=r.index),n.items=[],i=r.descriptor?r.descriptor.length:0;for(s=0;s<i;s+=1)n.items[n.items.length]=n.createItem({parentFragment:n,descriptor:r.descriptor[s],index:s})}}(l,n),ct=function(e){var t={};return function(n,r,i){var s,o=[];if(n){s=t[r]||(t[r]=e(r)),s.innerHTML=n;while(s.firstChild)o[o.length]=s.firstChild,i.appendChild(s.firstChild)}return o}}(i),ht=function(e){var t,n,r;return n=/</g,r=/>/g,t=function(t,n){this.type=e.TEXT,this.descriptor=t.descriptor,n&&(this.node=document.createTextNode(t.descriptor),n.appendChild(this.node))},t.prototype={detach:function(){return this.node.parentNode.removeChild(this.node),this.node},teardown:function(e){e&&this.detach()},firstNode:function(){return this.node},toString:function(){return(""+this.descriptor).replace(n,"&lt;").replace(r,"&gt;")}},t}(l),pt=function(e){return function(t){if(!t.keypath){var n=t.root._pendingResolution.indexOf(t);n!==-1&&t.root._pendingResolution.splice(n,1)}else e(t)}}(z),dt=function(e,t,n,r,i){function u(e,t,r){var i,s,u;if(!o.test(e.toString()))return n(e,"_nowrap",{value:!0}),e;if(!e["_"+t._guid]){n(e,"_"+t._guid,{value:function(){var n,r,i,o;n=t._captured,n||(t._captured=[]),r=e.apply(t,arguments);if(t._captured.length){i=s.length;while(i--)o=s[i],o.updateSoftDependencies(t._captured)}return t._captured=n,r},writable:!0});for(i in e)e.hasOwnProperty(i)&&(e["_"+t._guid][i]=e[i]);e["_"+t._guid+"_evaluators"]=[]}return s=e["_"+t._guid+"_evaluators"],u=s.indexOf(r),u===-1&&s.push(r),e["_"+t._guid]}var s,o;return o=/this/,s=function(t,n,i,s,o){var a;this.evaluator=i,this.keypath=n,this.root=t,this.argNum=s,this.type=e.REFERENCE,this.priority=o,a=t.get(n),typeof a=="function"&&(a=u(a,t,i)),this.value=i.values[s]=a,r(this)},s.prototype={update:function(){var e=this.root.get(this.keypath);typeof e=="function"&&!e._nowrap&&(e=u(e,this.root,this.evaluator)),t(e,this.value)||(this.evaluator.values[this.argNum]=e,this.evaluator.bubble(),this.value=e)},teardown:function(){i(this)}},s}(l,x,o,U,z),vt=function(e,t,n){var r=function(e,n,r){this.root=e,this.keypath=n,this.priority=r.priority,this.evaluator=r,t(this)};return r.prototype={update:function(){var t=this.root.get(this.keypath);e(t,this.value)||(this.evaluator.bubble(),this.value=t)},teardown:function(){n(this)}},r}(x,U,z),mt=function(e,t,n,r,i,s,o,u,a){function c(e,t){var n,r;e=e.replace(/\$\{([0-9]+)\}/g,"_$1");if(l[e])return l[e];r=[];while(t--)r[t]="_"+t;return n=new Function(r.join(","),"return("+e+")"),l[e]=n,n}var f,l={};return f=function(e,t,n,r,i){var s,o;this.root=e,this.keypath=t,this.priority=i,this.fn=c(n,r.length),this.values=[],this.refs=[],s=r.length;while(s--)(o=r[s])?o[0]?this.values[s]=o[1]:this.refs[this.refs.length]=new u(e,o[1],this,s,i):this.values[s]=undefined;this.selfUpdating=this.refs.length<=1,this.update()},f.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(this.root._deferred.evals.push(this),this.deferred=!0)},update:function(){var t;if(this.evaluating)return this;this.evaluating=!0;try{t=this.fn.apply(null,this.values)}catch(i){if(this.root.debug)throw i;t=undefined}return e(t,this.value)||(n(this.root,this.keypath),this.root._cache[this.keypath]=t,o(this.root,this.keypath,t,!0),this.value=t,r(this.root,this.keypath)),this.evaluating=!1,this},teardown:function(){while(this.refs.length)this.refs.pop().teardown();n(this.root,this.keypath),this.root._evaluators[this.keypath]=null},refresh:function(){this.selfUpdating||(this.deferred=!0);var e=this.refs.length;while(e--)this.refs[e].update();this.deferred&&(this.update(),this.deferred=!1)},updateSoftDependencies:function(e){var t,n,r;this.softRefs||(this.softRefs=[]),t=this.softRefs.length;while(t--)r=this.softRefs[t],e[r.keypath]||(this.softRefs.splice(t,1),this.softRefs[r.keypath]=!1,r.teardown());t=e.length;while(t--)n=e[t],this.softRefs[n]||(r=new a(this.root,n,this),this.softRefs[this.softRefs.length]=r,this.softRefs[n]=!0);this.selfUpdating=this.refs.length+this.softRefs.length<=1}},f}(x,o,h,g,U,z,w,dt,vt),gt=function(e,t){var n=function(t,n,r,i){var s,o;o=this.root=t.root,s=e(o,n,r),s!==undefined?t.resolveRef(i,!1,s):(this.ref=n,this.argNum=i,this.resolver=t,this.contextStack=r,o._pendingResolution[o._pendingResolution.length]=this)};return n.prototype={resolve:function(e){this.keypath=e,this.resolver.resolveRef(this.argNum,!1,e)},teardown:function(){this.keypath||t(this)}},n}(T,pt),yt=function(){var e=/^(?:(?:[a-zA-Z$_][a-zA-Z$_0-9]*)|(?:[0-9]|[1-9][0-9]+))$/;return function(t){var n,r,i;n=t.split("."),i=n.length;while(i--){r=n[i];if(r==="undefined"||!e.test(r))return!1}return!0}}(),bt=function(e,t){return function(n,r){var i,s;return i=n.replace(/\$\{([0-9]+)\}/g,function(e,t){return r[t]?r[t][1]:"undefined"}),s=e(i),t(s)?s:"${"+i.replace(/[\.\[\]]/g,"-")+"}"}}(a,yt),wt=function(e,t){function n(e,t,n){var i,s;i=e._depsMap[t];if(!i)return;s=i.length;while(s--)r(e,i[s],n)}function r(e,t,r){var i,s,o,u;i=e._deps.length;while(i--){s=e._deps[i];if(s){o=s[t];if(o){u=o.length;while(u--)r.push(o[u])}}}n(e,t,r)}return function(n,i,s){var o,u,a;o=[],r(n,i,o),u=o.length;while(u--)a=o[u],t(a),a.keypath=a.keypath.replace(i,s),e(a),a.update()}}(U,z),Et=function(e,t,n,r){var i=function(e){var n,r,i,s,o;this.root=e.root,this.mustache=e,this.args=[],this.scouts=[],n=e.descriptor.x,o=e.parentFragment.indexRefs,this.str=n.s,i=this.unresolved=this.args.length=n.r?n.r.length:0;if(!i){this.resolved=this.ready=!0,this.bubble();return}for(r=0;r<i;r+=1)s=n.r[r],o&&o[s]!==undefined?this.resolveRef(r,!0,o[s]):this.scouts[this.scouts.length]=new t(this,s,e.contextStack,r);this.ready=!0,this.bubble()};return i.prototype={bubble:function(){var e;if(!this.ready)return;e=this.keypath,this.keypath=n(this.str,this.args),this.keypath.substr(0,2)==="${"&&this.createEvaluator(),e?r(this.root,e,this.keypath):this.mustache.resolve(this.keypath)},teardown:function(){while(this.scouts.length)this.scouts.pop().teardown()},resolveRef:function(e,t,n){this.args[e]=[t,n],this.bubble(),this.resolved=!--this.unresolved},createEvaluator:function(){this.root._evaluators[this.keypath]?this.root._evaluators[this.keypath].refresh():this.root._evaluators[this.keypath]=new e(this.root,this.keypath,this.str,this.args,this.mustache.priority)}},i}(mt,gt,bt,wt),St=function(e,t){return function(n,r){var i,s,o;o=n.parentFragment=r.parentFragment,n.root=o.root,n.contextStack=o.contextStack,n.descriptor=r.descriptor,n.index=r.index||0,n.priority=o.priority,n.type=r.descriptor.t,r.descriptor.r&&(o.indexRefs&&o.indexRefs[r.descriptor.r]!==undefined?(s=o.indexRefs[r.descriptor.r],n.indexRef=r.descriptor.r,n.value=s,n.render(n.value)):(i=e(n.root,r.descriptor.r,n.contextStack),i!==undefined?n.resolve(i):(n.ref=r.descriptor.r,n.root._pendingResolution[n.root._pendingResolution.length]=n))),r.descriptor.x&&(n.expressionResolver=new t(n)),n.descriptor.n&&!n.hasOwnProperty("value")&&n.render(undefined)}}(T,Et),xt=function(e,t,n){return function(r){if(r===this.keypath)return;this.registered&&n(this),this.keypath=r,t(this),this.update(),this.root.twoway&&this.parentFragment.owner.type===e.ATTRIBUTE&&this.parentFragment.owner.element.bind(),this.expressionResolver&&this.expressionResolver.resolved&&(this.expressionResolver=null)}}(l,U,z),Tt=function(e){return function(){var t,n;n=this.root.get(this.keypath);if(t=this.root._wrapped[this.keypath])n=t.get();e(n,this.value)||(this.render(n),this.value=n)}}(x),Nt=function(e,t,n,r,i){var s,o,u;return o=/</g,u=/>/g,s=function(t,r){this.type=e.INTERPOLATOR,r&&(this.node=document.createTextNode(""),r.appendChild(this.node)),n(this,t)},s.prototype={update:i,resolve:r,detach:function(){return this.node.parentNode.removeChild(this.node),this.node},teardown:function(e){e&&this.detach(),t(this)},render:function(e){this.node&&(this.node.data=e==undefined?"":e)},firstNode:function(){return this.node},toString:function(){var e=this.value!=undefined?""+this.value:"";return e.replace(o,"&lt;").replace(u,"&gt;")}},s}(l,pt,St,xt,Tt),Ct=function(e,t,n){function r(e,t,n){var r,i,s;i=t.length;if(i<e.length){s=e.fragments.splice(i,e.length-i);while(s.length)s.pop().teardown(!0)}else if(i>e.length)for(r=e.length;r<i;r+=1)n.contextStack=e.contextStack.concat(e.keypath+"."+r),n.index=r,e.descriptor.i&&(n.indexRef=e.descriptor.i),e.fragments[r]=e.createFragment(n);e.length=i}function i(e,t,r){var i,s;s=e.fragmentsById||(e.fragmentsById=n(null));for(i in s)t[i]===undefined&&s[i]&&(s[i].teardown(!0),s[i]=null);for(i in t)t[i]!==undefined&&!s[i]&&(r.contextStack=e.contextStack.concat(e.keypath+"."+i),r.index=i,e.descriptor.i&&(r.indexRef=e.descriptor.i),s[i]=e.createFragment(r))}function s(e,t){e.length||(t.contextStack=e.contextStack.concat(e.keypath),t.index=0,e.fragments[0]=e.createFragment(t),e.length=1)}function o(t,n,r,i){var s,o,u,a;o=e(n)&&n.length===0,r?s=o||!n:s=n&&!o;if(s){t.length||(i.contextStack=t.contextStack,i.index=0,t.fragments[0]=t.createFragment(i),t.length=1);if(t.length>1){u=t.fragments.splice(1);while(a=u.pop())a.teardown(!0)}}else t.length&&(t.teardownFragments(!0),t.length=0)}return function(n,u){var a;a={descriptor:n.descriptor.f,root:n.root,pNode:n.parentFragment.pNode,owner:n};if(n.descriptor.n){o(n,u,!0,a);return}e(u)?r(n,u,a):t(u)?n.descriptor.i?i(n,u,a):s(n,a):o(n,u,!1,a)}}(c,S,n),kt=function(e,t,n){function r(t,n,o,u,a,f,l){var c,h,p,d;if(t.html)return;t.indexRefs&&t.indexRefs[n]!==undefined&&(t.indexRefs[n]=u),c=t.contextStack.length;while(c--)p=t.contextStack[c],p.substr(0,f.length)===f&&(t.contextStack[c]=p.replace(f,l));c=t.items.length;while(c--){h=t.items[c];switch(h.type){case e.ELEMENT:i(h,n,o,u,a,f,l);break;case e.PARTIAL:r(h.fragment,n,o,u,a,f,l);break;case e.COMPONENT:r(h.instance.fragment,n,o,u,a,f,l),(d=t.root._liveComponentQueries[h.name])&&d._makeDirty();break;case e.SECTION:case e.INTERPOLATOR:case e.TRIPLE:s(h,n,o,u,a,f,l)}}}function i(e,t,n,i,s,o,u){var a,f,l,c,h,p,d,v,m,g;a=e.attributes.length;while(a--)f=e.attributes[a],f.fragment&&(r(f.fragment,t,n,i,s,o,u),f.twoway&&f.updateBindings());if(l=e.node._ractive){l.keypath.substr(0,o.length)===o&&(l.keypath=l.keypath.replace(o,u)),t!==undefined&&(l.index[t]=i);for(c in l.events){h=l.events[c].proxies,a=h.length;while(a--)p=h[a],typeof p.n=="object"&&r(p.a,t,n,i,s,o,u),p.d&&r(p.d,t,n,i,s,o,u)}(d=l.binding)&&d.keypath.substr(0,o.length)===o&&(v=l.root._twowayBindings[d.keypath],v.splice(v.indexOf(d),1),d.keypath=d.keypath.replace(o,u),v=l.root._twowayBindings[d.keypath]||(l.root._twowayBindings[d.keypath]=[]),v.push(d))}e.fragment&&r(e.fragment,t,n,i,s,o,u);if(m=e.liveQueries){g=e.root,a=m.length;while(a--)g._liveQueries[m[a]]._makeDirty()}}function s(e,t,i,s,o,u,a){var f;e.descriptor.x&&(e.expressionResolver&&e.expressionResolver.teardown(),e.expressionResolver=new n(e)),e.keypath?e.keypath.substr(0,u.length)===u&&e.resolve(e.keypath.replace(u,a)):e.indexRef===t&&(e.value=s,e.render(s));if(e.fragments){f=e.fragments.length;while(f--)r(e.fragments[f],t,i,s,o,u,a)}}return r}(l,z,Et),Lt=function(e,t,n){return function(e,r,i,s,o){var u,a,f,l,c,h,p;f=r.descriptor.i;for(u=i;u<s;u+=1)a=r.fragments[u],l=u-o,c=u,h=r.keypath+"."+(u-o),p=r.keypath+"."+u,a.index+=o,t(a,f,l,c,o,h,p);n(e)}}(l,kt,d),At=function(e){return function(t){var n=this,r,i,s,o,u,a,f,l,c,h;r=this.parentFragment,a=[],t.forEach(function(t,r){var o,u,l;if(t===r){a[t]=n.fragments[r];return}i===undefined&&(i=r);if(t===-1){(f||(f=[])).push(n.fragments[r]);return}o=t-r,u=n.keypath+"."+r,l=n.keypath+"."+t,e(n.fragments[r],n.descriptor.i,r,t,o,u,l),a[t]=n.fragments[r],s=!0});if(f)while(c=f.pop())c.teardown(!0);i===undefined&&(i=this.length),u=this.root.get(this.keypath).length;if(u===i)return;l={descriptor:this.descriptor.f,root:this.root,pNode:r.pNode,owner:this},this.descriptor.i&&(l.indexRef=this.descriptor.i);for(o=i;o<u;o+=1)(c=a[o])?this.docFrag.appendChild(c.detach(!1)):(l.contextStack=this.contextStack.concat(this.keypath+"."+o),l.index=o,c=this.createFragment(l)),this.fragments[o]=c;h=r.findNextNode(this),r.pNode.insertBefore(this.docFrag,h),this.length=u}}(kt),Ot=function(){return[]}(),Mt=function(e,t,n,r,i,s,o,u,a,f,l){var c,h;return l.push(function(){h=l.DomFragment}),c=function(t,r){this.type=e.SECTION,this.inverted=!!t.descriptor.n,this.fragments=[],this.length=0,r&&(this.docFrag=document.createDocumentFragment()),this.initialising=!0,n(this,t),r&&r.appendChild(this.docFrag),this.initialising=!1},c.prototype={update:r,resolve:i,smartUpdate:function(e,t){var n;if(e==="push"||e==="unshift"||e==="splice")n={descriptor:this.descriptor.f,root:this.root,pNode:this.parentFragment.pNode,owner:this},this.descriptor.i&&(n.indexRef=this.descriptor.i);this[e]&&(this.rendering=!0,this[e](n,t),this.rendering=!1)},pop:function(){this.length&&(this.fragments.pop().teardown(!0),this.length-=1)},push:function(e,t){var n,r,i;n=this.length,r=n+t.length;for(i=n;i<r;i+=1)e.contextStack=this.contextStack.concat(this.keypath+"."+i),e.index=i,this.fragments[i]=this.createFragment(e);this.length+=t.length,this.parentFragment.pNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},shift:function(){this.splice(null,[0,1])},unshift:function(e,t){this.splice(e,[0,0].concat(new Array(t.length)))},splice:function(e,t){var n,r,i,s,o,a,f,l,c;if(!t.length)return;a=+(t[0]<0?this.length+t[0]:t[0]),r=Math.max(0,t.length-2),i=t[1]!==undefined?t[1]:this.length-a,i=Math.min(i,this.length-a),s=r-i;if(!s)return;if(s<0){f=a-s;for(o=a;o<f;o+=1)this.fragments[o].teardown(!0);this.fragments.splice(a,-s)}else{f=a+s,n=this.fragments[a]?this.fragments[a].firstNode():this.parentFragment.findNextNode(this),l=[a,0].concat(new Array(s)),this.fragments.splice.apply(this.fragments,l);for(o=a;o<f;o+=1)e.contextStack=this.contextStack.concat(this.keypath+"."+o),e.index=o,this.fragments[o]=this.createFragment(e);this.parentFragment.pNode.insertBefore(this.docFrag,n)}this.length+=s,c=a+r,u(this.root,this,c,this.length,s)},merge:a,detach:function(){var e,t;t=this.fragments.length;for(e=0;e<t;e+=1)this.docFrag.appendChild(this.fragments[e].detach());return this.docFrag},teardown:function(e){this.teardownFragments(e),f(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(e){return this.fragments[e.index+1]?this.fragments[e.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(e){var t,n;while(n=this.fragments.shift())n.teardown(e);if(this.fragmentsById)for(t in this.fragmentsById)this.fragments[t]&&(this.fragmentsById[t].teardown(e),this.fragmentsById[t]=null)},render:function(e){var n,r;if(r=this.root._wrapped[this.keypath])e=r.get();if(this.rendering)return;this.rendering=!0,s(this,e),this.rendering=!1;if(this.docFrag&&!this.docFrag.childNodes.length)return;!this.initialising&&t&&(n=this.parentFragment.findNextNode(this),n&&n.parentNode===this.parentFragment.pNode?this.parentFragment.pNode.insertBefore(this.docFrag,n):this.parentFragment.pNode.appendChild(this.docFrag))},createFragment:function(e){var t=new h(e);return this.docFrag&&this.docFrag.appendChild(t.docFrag),t},toString:function(){var e,t,n,r;e="",t=0,r=this.length;for(t=0;t<r;t+=1)e+=this.fragments[t].toString();if(this.fragmentsById)for(n in this.fragmentsById)this.fragmentsById[n]&&(e+=this.fragmentsById[n].toString());return e},find:function(e){var t,n,r;n=this.fragments.length;for(t=0;t<n;t+=1)if(r=this.fragments[t].find(e))return r;return null},findAll:function(e,t){var n,r;r=this.fragments.length;for(n=0;n<r;n+=1)this.fragments[n].findAll(e,t)},findComponent:function(e){var t,n,r;n=this.fragments.length;for(t=0;t<n;t+=1)if(r=this.fragments[t].findComponent(e))return r;return null},findAllComponents:function(e,t){var n,r;r=this.fragments.length;for(n=0;n<r;n+=1)this.fragments[n].findAllComponents(e,t)}},c}(l,s,St,Tt,xt,Ct,kt,Lt,At,pt,Ot),_t=function(e,t,n,r,i,s,o){var u=function(t,r){this.type=e.TRIPLE,r&&(this.nodes=[],this.docFrag=document.createDocumentFragment()),this.initialising=!0,n(this,t),r&&r.appendChild(this.docFrag),this.initialising=!1};return u.prototype={update:r,resolve:i,detach:function(){var e=this.nodes.length;while(e--)this.docFrag.appendChild(this.nodes[e]);return this.docFrag},teardown:function(e){e&&(this.detach(),this.docFrag=this.nodes=null),o(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(e){var t,n;if(!this.nodes)return;while(this.nodes.length)t=this.nodes.pop(),t.parentNode.removeChild(t);if(!e){this.nodes=[];return}n=this.parentFragment.pNode,this.nodes=s(e,n.tagName,this.docFrag),this.initialising||n.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},toString:function(){return this.value!=undefined?this.value:""},find:function(e){var n,r,i,s;r=this.nodes.length;for(n=0;n<r;n+=1){i=this.nodes[n];if(i.nodeType!==1)continue;if(t(i,e))return i;if(s=i.querySelector(e))return s}return null},findAll:function(e,n){var r,i,s,o,u,a;i=this.nodes.length;for(r=0;r<i;r+=1){s=this.nodes[r];if(s.nodeType!==1)continue;t(s,e)&&n.push(s);if(o=s.querySelectorAll(e)){u=o.length;for(a=0;a<u;a+=1)n.push(o[a])}}}},u}(l,G,St,Tt,xt,ct,pt),Dt=function(e){return function(t,n){return t.a&&t.a.xmlns?t.a.xmlns:t.e==="svg"?e.svg:n.namespaceURI||e.html}}(r),Pt=function(){var e,t,n,r;return e="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),t="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),n=function(e){var t={},n=e.length;while(n--)t[e[n].toLowerCase()]=e[n];return t},r=n(e.concat(t)),function(e){var t=e.toLowerCase();return r[t]||t}}(),Ht=function(e,t){return function(n,r){var i,s;i=r.indexOf(":");if(i!==-1){s=r.substr(0,i);if(s!=="xmlns"){r=r.substring(i+1),n.name=t(r),n.lcName=n.name.toLowerCase(),n.namespace=e[s.toLowerCase()];if(!n.namespace)throw'Unknown namespace ("'+s+'")';return}}n.name=n.element.namespace!==e.html?t(r):r,n.lcName=n.name.toLowerCase()}}(r,Pt),Bt=function(e){return function(t,n){var r,i=n.value===null?"":n.value;if(r=n.pNode)t.namespace?r.setAttributeNS(t.namespace,n.name,i):n.name==="style"&&r.style.setAttribute?r.style.setAttribute("cssText",i):n.name!=="class"||!!r.namespaceURI&&r.namespaceURI!==e.html?r.setAttribute(n.name,i):r.className=i,t.name==="id"&&(n.root.nodes[n.value]=r),t.name==="value"&&(r._ractive.value=n.value);t.value=n.value}}(r),jt=function(e){var t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(n,r){var i;if(n.pNode&&!n.namespace&&(!r.pNode.namespaceURI||r.pNode.namespaceURI===e.html)){i=t[n.name]||n.name,r.pNode[i]!==undefined&&(n.propertyName=i);if(typeof r.pNode[i]=="boolean"||i==="value")n.useProperty=!0}}}(r),Ft=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g;return i=function(){var e=this.pNode,t,n,r;return this.fragment?(t=s(this),t?(this.interpolator=t,this.keypath=t.keypath||t.descriptor.r,n=a(this),n?(e._ractive.binding=this.element.binding=n,this.twoway=!0,r=this.root._twowayBindings[this.keypath]||(this.root._twowayBindings[this.keypath]=[]),r[r.length]=n,!0):!1):!1):!1},o=function(){this._ractive.binding.update()},u=function(){var e=this._ractive.root.get(this._ractive.binding.keypath);this.value=e==undefined?"":e},s=function(n){var r,i;return n.fragment.items.length!==1?null:(r=n.fragment.items[0],r.type!==e.INTERPOLATOR?null:!r.keypath&&!r.ref?null:r.keypath&&r.keypath.substr(0,2)==="${"?(i="You cannot set up two-way binding against an expression "+r.keypath,n.root.debug&&t(i),null):r)},a=function(e){var n=e.pNode;if(n.tagName==="SELECT")return n.multiple?new l(e,n):new c(e,n);if(n.type==="checkbox"||n.type==="radio"){if(e.propertyName==="name"){if(n.type==="checkbox")return new p(e,n);if(n.type==="radio")return new h(e,n)}return e.propertyName==="checked"?new d(e,n):null}return e.lcName!=="value"&&t("This is... odd"),n.type==="file"?new v(e,n):n.getAttribute("contenteditable")?new m(e,n):new g(e,n)},l=function(e,t){var n;f(this,e,t),t.addEventListener("change",o,!1),n=this.root.get(this.keypath),n===undefined&&this.update()},l.prototype={value:function(){var e,t,n,r;e=[],t=this.node.options,r=t.length;for(n=0;n<r;n+=1)t[n].selected&&(e[e.length]=t[n]._ractive.value);return e},update:function(){var e,t,r;e=this.attr,t=e.value,r=this.value();if(t===undefined||!n(r,t))e.receiving=!0,e.value=r,this.root.set(this.keypath,r),e.receiving=!1;return this},deferUpdate:function(){if(this.deferred===!0)return;this.root._deferred.attrs.push(this),this.deferred=!0},teardown:function(){this.node.removeEventListener("change",o,!1)}},c=function(e,t){var n;f(this,e,t),t.addEventListener("change",o,!1),n=this.root.get(this.keypath),n===undefined&&this.update()},c.prototype={value:function(){var e,t,n;e=this.node.options,n=e.length;for(t=0;t<n;t+=1)if(e[t].selected)return e[t]._ractive.value},update:function(){var e=this.value();return this.attr.receiving=!0,this.attr.value=e,this.root.set(this.keypath,e),this.attr.receiving=!1,this},deferUpdate:function(){if(this.deferred===!0)return;this.root._deferred.attrs.push(this),this.deferred=!0},teardown:function(){this.node.removeEventListener("change",o,!1)}},h=function(e,t){var n;this.radioName=!0,f(this,e,t),t.name="{{"+e.keypath+"}}",t.addEventListener("change",o,!1),t.attachEvent&&t.addEventListener("click",o,!1),n=this.root.get(this.keypath),n!==undefined?t.checked=n==t._ractive.value:this.root._deferred.radios.push(this)},h.prototype={value:function(){return this.node._ractive?this.node._ractive.value:this.node.value},update:function(){var e=this.node;e.checked&&(this.attr.receiving=!0,this.root.set(this.keypath,this.value()),this.attr.receiving=!1)},teardown:function(){this.node.removeEventListener("change",o,!1),this.node.removeEventListener("click",o,!1)}},p=function(e,t){var n,r;this.checkboxName=!0,f(this,e,t),t.name="{{"+this.keypath+"}}",t.addEventListener("change",o,!1),t.attachEvent&&t.addEventListener("click",o,!1),n=this.root.get(this.keypath),n!==undefined?(r=n.indexOf(t._ractive.value)!==-1,t.checked=r):this.root._deferred.checkboxes.indexOf(this.keypath)===-1&&this.root._deferred.checkboxes.push(this.keypath)},p.prototype={changed:function(){return this.node.checked!==!!this.checked},update:function(){this.checked=this.node.checked,this.attr.receiving=!0,this.root.set(this.keypath,r(this.root,this.keypath)),this.attr.receiving=!1},teardown:function(){this.node.removeEventListener("change",o,!1),this.node.removeEventListener("click",o,!1)}},d=function(e,t){f(this,e,t),t.addEventListener("change",o,!1),t.attachEvent&&t.addEventListener("click",o,!1)},d.prototype={value:function(){return this.node.checked},update:function(){this.attr.receiving=!0,this.root.set(this.keypath,this.value()),this.attr.receiving=!1},teardown:function(){this.node.removeEventListener("change",o,!1),this.node.removeEventListener("click",o,!1)}},v=function(e,t){f(this,e,t),t.addEventListener("change",o,!1)},v.prototype={value:function(){return this.attr.pNode.files},update:function(){this.attr.root.set(this.attr.keypath,this.value())},teardown:function(){this.node.removeEventListener("change",o,!1)}},m=function(e,t){f(this,e,t),t.addEventListener("change",o,!1),this.root.lazy||(t.addEventListener("input",o,!1),t.attachEvent&&t.addEventListener("keyup",o,!1))},m.prototype={update:function(){this.attr.receiving=!0,this.root.set(this.keypath,this.node.innerHTML),this.attr.receiving=!1},teardown:function(){this.node.removeEventListener("change",o,!1),this.node.removeEventListener("input",o,!1),this.node.removeEventListener("keyup",o,!1)}},g=function(e,t){f(this,e,t),t.addEventListener("change",o,!1),this.root.lazy||(t.addEventListener("input",o,!1),t.attachEvent&&t.addEventListener("keyup",o,!1)),this.node.addEventListener("blur",u,!1)},g.prototype={value:function(){var e=this.attr.pNode.value;return+e+""===e&&e.indexOf("e")===-1&&(e=+e),e},update:function(){var e=this.attr,t=this.value();e.receiving=!0,e.root.set(e.keypath,t),e.receiving=!1},teardown:function(){this.node.removeEventListener("change",o,!1),this.node.removeEventListener("input",o,!1),this.node.removeEventListener("keyup",o,!1),this.node.removeEventListener("blur",u,!1)}},f=function(e,t,n){e.attr=t,e.node=n,e.root=t.root,e.keypath=t.keypath},i}(l,P,O,p),It=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p;return n=function(){var e;if(!this.ready)return this;e=this.pNode;if(e.tagName==="SELECT"&&this.lcName==="value")return this.update=i,this.deferredUpdate=s,this.update();if(this.isFileInputValue)return this.update=r,this;if(this.twoway&&this.lcName==="name"){if(e.type==="radio")return this.update=a,this.update();if(e.type==="checkbox")return this.update=f,this.update()}return this.lcName==="style"&&e.style.setAttribute?(this.update=l,this.update()):this.lcName!=="class"||!!e.namespaceURI&&e.namespaceURI!==t.html?e.getAttribute("contenteditable")&&this.lcName==="value"?(this.update=h,this.update()):(this.update=p,this.update()):(this.update=c,this.update())},r=function(){return this},s=function(){this.deferredUpdate=this.pNode.multiple?u:o,this.deferredUpdate()},i=function(){return this.root._deferred.selectValues.push(this),this},o=function(){var e=this.fragment.getValue(),t,n,r;this.value=this.pNode._ractive.value=e,t=this.pNode.options,r=t.length;while(r--){n=t[r];if(n._ractive.value==e)return n.selected=!0,this}return this},u=function(){var t=this.fragment.getValue(),n,r;e(t)||(t=[t]),n=this.pNode.options,r=n.length;while(r--)n[r].selected=t.indexOf(n[r]._ractive.value)!==-1;return this.value=t,this},a=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),e.checked=t==e._ractive.value,this},f=function(){var t,n;return t=this.pNode,n=this.fragment.getValue(),e(n)?(t.checked=n.indexOf(t._ractive.value)!==-1,this):(t.checked=n==t._ractive.value,this)},l=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),t===undefined&&(t=""),t!==this.value&&(e.style.setAttribute("cssText",t),this.value=t),this},c=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),t===undefined&&(t=""),t!==this.value&&(e.className=t,this.value=t),this},h=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),t===undefined&&(t=""),t!==this.value&&(this.receiving||(e.innerHTML=t),this.value=t),this},p=function(){var e,t;e=this.pNode,t=this.fragment.getValue(),this.isValueAttribute&&(e._ractive.value=t),t===undefined&&(t="");if(t!==this.value){if(this.useProperty)return this.receiving||(e[this.propertyName]=t),this.value=t,this;if(this.namespace)return e.setAttributeNS(this.namespace,this.name,t),this.value=t,this;this.lcName==="id"&&(this.value!==undefined&&(this.root.nodes[this.value]=undefined),this.root.nodes[t]=e),e.setAttribute(this.name,t),this.value=t}return this},n}(c,r),qt=function(){return function(e){var t;return t=this.str.substr(this.pos,e.length),t===e?(this.pos+=e.length,e):null}}(),Rt=function(){var e=/^\s+/;return function(){var t=e.exec(this.remaining());return t?(this.pos+=t[0].length,t[0]):null}}(),Ut=function(){return function(e){return function(t){var n=e.exec(t.str.substring(t.pos));return n?(t.pos+=n[0].length,n[1]||n[0]):null}}}(),zt=function(){function e(e){var t;return e.getStringMatch("\\")?(t=e.str.charAt(e.pos),e.pos+=1,t):null}return function(t){var n="",r;r=e(t);while(r)n+=r,r=e(t);return n||null}}(),Wt=function(e,t){var n=e(/^[^\\"]+/),r=e(/^[^\\']+/);return function i(e,s){var o,u,a,f,l,c;o=e.pos,u="",c=s?r:n,a=t(e),a&&(u+=a),f=c(e),f&&(u+=f);if(!u)return"";l=i(e,s);while(l!=="")u+=l;return u}}(Ut,zt),Xt=function(e,t){return function(n){var r,i;return r=n.pos,n.getStringMatch('"')?(i=t(n,!1),n.getStringMatch('"')?{t:e.STRING_LITERAL,v:i}:(n.pos=r,null)):n.getStringMatch("'")?(i=t(n,!0),n.getStringMatch("'")?{t:e.STRING_LITERAL,v:i}:(n.pos=r,null)):null}}(l,Wt),Vt=function(e,t){var n=t(/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/);return function(t){var r;return(r=n(t))?{t:e.NUMBER_LITERAL,v:r}:null}}(l,Ut),$t=function(e){return e(/^[a-zA-Z_$][a-zA-Z_$0-9]*/)}(Ut),Jt=function(e,t,n){var r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(i){var s;if(s=e(i))return r.test(s.v)?s.v:'"'+s.v.replace(/"/g,'\\"')+'"';if(s=t(i))return s.v;if(s=n(i))return s}}(Xt,Vt,$t),Kt=function(e,t,n,r){function l(e){var t,n,i;return e.allowWhitespace(),t=r(e),t?(i={key:t},e.allowWhitespace(),e.getStringMatch(":")?(e.allowWhitespace(),n=e.getToken(),n?(i.value=n.v,i):null):null):null}var i,s,o,u,a,f;return s={"true":!0,"false":!1,"undefined":undefined,"null":null},o=new RegExp("^(?:"+Object.keys(s).join("|")+")"),u=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,a=/\$\{([^\}]+)\}/g,f=/^\$\{([^\}]+)\}/,i=function(e,t){this.str=e,this.values=t,this.pos=0,this.result=this.getToken()},i.prototype={remaining:function(){return this.str.substring(this.pos)},getStringMatch:e,getToken:function(){return this.allowWhitespace(),this.getPlaceholder()||this.getSpecial()||this.getNumber()||this.getString()||this.getObject()||this.getArray()},getPlaceholder:function(){var e;if(!this.values)return null;if((e=f.exec(this.remaining()))&&this.values.hasOwnProperty(e[1]))return this.pos+=e[0].length,{v:this.values[e[1]]}},getSpecial:function(){var e;if(e=o.exec(this.remaining()))return this.pos+=e[0].length,{v:s[e[0]]}},getNumber:function(){var e;if(e=u.exec(this.remaining()))return this.pos+=e[0].length,{v:+e[0]}},getString:function(){var e=n(this),t;return e&&(t=this.values)?{v:e.v.replace(a,function(e,n){return t[n]||n})}:e},getObject:function(){var e,t;if(!this.getStringMatch("{"))return null;e={};while(t=l(this)){e[t.key]=t.value,this.allowWhitespace();if(this.getStringMatch("}"))return{v:e};if(!this.getStringMatch(","))return null}return null},getArray:function(){var e,t;if(!this.getStringMatch("["))return null;e=[];while(t=this.getToken()){e.push(t.v);if(this.getStringMatch("]"))return{v:e};if(!this.getStringMatch(","))return null}return null},allowWhitespace:t},function(e,t){var n=new i(e,t);return n.result?{value:n.result.v,remaining:n.remaining()}:null}}(qt,Rt,Xt,Jt),Qt=function(e,t,n,r,i){function o(e){return typeof e=="string"?e:JSON.stringify(e)}var s=function(t){this.type=e.INTERPOLATOR,n(this,t)};return s.prototype={update:r,resolve:i,render:function(e){this.value=e,this.parentFragment.bubble()},teardown:function(){t(this)},toString:function(){return this.value==undefined?"":o(this.value)}},s}(l,pt,St,Tt,xt),Gt=function(e,t,n,r,i,s,o){var u,a;return o.push(function(){a=o.StringFragment}),u=function(n){this.type=e.SECTION,this.fragments=[],this.length=0,t(this,n)},u.prototype={update:n,resolve:r,teardown:function(){this.teardownFragments(),s(this)},teardownFragments:function(){while(this.fragments.length)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(e){var t;if(t=this.root._wrapped[this.keypath])e=t.get();i(this,e),this.parentFragment.bubble()},createFragment:function(e){return new a(e)},toString:function(){return this.fragments.join("")}},u}(l,St,Tt,xt,Ct,pt,Ot),Yt=function(e){var t=function(t){this.type=e.TEXT,this.text=t};return t.prototype={toString:function(){return this.text},teardown:function(){}},t}(l),Zt=function(e,t){return function(){var n,r,i,s,o,u,a;if(!this.argsList||this.dirty){n={},r=0,s=this.root._guid,a=function(e){return e.map(function(e){var t,i,o;return e.text?e.text:e.fragments?e.fragments.map(function(e){return a(e.items)}).join(""):(t=s+"-"+r++,(i=e.root._wrapped[e.keypath])?o=i.value:o=e.value,n[t]=o,"${"+t+"}")}).join("")},i=a(this.items),u=t("["+i+"]",n);if(!u){o="Could not parse directive arguments ("+this.toString()+"). If you think this is a bug, please file an issue at http://github.com/RactiveJS/Ractive/issues";if(this.root.debug)throw new Error(o);e(o),this.argsList=[i]}else this.argsList=u.value;this.dirty=!1}return this.argsList}}(P,Kt),en=function(e,t,n,r,i,s,o,u){var a=function(e){n(this,e)};return a.prototype={createItem:function(t){if(typeof t.descriptor=="string")return new s(t.descriptor);switch(t.descriptor.t){case e.INTERPOLATOR:return new r(t);case e.TRIPLE:return new r(t);case e.SECTION:return new i(t);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.dirty=!0,this.owner.bubble()},teardown:function(){var e,t;e=this.items.length;for(t=0;t<e;t+=1)this.items[t].teardown()},getValue:function(){var t;if(this.items.length===1&&this.items[0].type===e.INTERPOLATOR){t=this.items[0].value;if(t!==undefined)return t}return this.toString()},isSimple:function(){var t,n,r;if(this.simple!==undefined)return this.simple;t=this.items.length;while(t--){n=this.items[t];if(n.type===e.TEXT)continue;if(n.type===e.INTERPOLATOR){if(r)return!1;r=!0;continue}return this.simple=!1}return this.simple=!0},toString:function(){return this.items.join("")},toJSON:function(){var e=this.getValue(),n;return typeof e=="string"&&(n=t(e),e=n?n.value:e),e},toArgsList:o},u.StringFragment=a,a}(l,Kt,lt,Qt,Gt,Yt,Zt,Ot),tn=function(e,t,n,r,i,s,o){var u=function(i){this.type=e.ATTRIBUTE,this.element=i.element,t(this,i.name);if(i.value===null||typeof i.value=="string"){n(this,i);return}this.root=i.root,this.pNode=i.pNode,this.parentFragment=this.element.parentFragment,this.fragment=new o({descriptor:i.value,root:this.root,owner:this,contextStack:i.contextStack});if(!this.pNode)return;this.name==="value"&&(this.isValueAttribute=!0,this.pNode.tagName==="INPUT"&&this.pNode.type==="file"&&(this.isFileInputValue=!0)),r(this,i),this.selfUpdating=this.fragment.isSimple(),this.ready=!0};return u.prototype={bind:i,update:s,updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.ref,this.propertyName==="name"&&(this.pNode.name="{{"+this.keypath+"}}")},teardown:function(){var e;if(this.boundEvents){e=this.boundEvents.length;while(e--)this.pNode.removeEventListener(this.boundEvents[e],this.updateModel,!1)}this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._deferred.attrs.push(this),this.deferred=!0)},toString:function(){var e;return this.value===null?this.name:this.fragment?(e=this.fragment.toString(),this.name+"="+JSON.stringify(e)):this.name+"="+JSON.stringify(this.value)}},u}(l,Ht,Bt,jt,Ft,It,en),nn=function(e){return function(t,n){var r,i,s;t.attributes=[];for(r in n)n.hasOwnProperty(r)&&(i=n[r],s=new e({element:t,name:r,value:i,root:t.root,pNode:t.node,contextStack:t.parentFragment.contextStack}),t.attributes[t.attributes.length]=t.attributes[r]=s,r!=="name"&&s.update());return t.attributes}}(tn),rn=function(e,t,n,r){var i,s,o;return r.push(function(){i=r.DomFragment}),s=function(){var e=this.node,t=this.fragment.toString();e.styleSheet&&(e.styleSheet.cssText=t),e.innerHTML=t},o=function(){(!this.node.type||this.node.type==="text/javascript")&&e("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.innerHTML=this.fragment.toString()},function(e,r,u,a){var f,l,c,h,p;if(e.lcName==="script"||e.lcName==="style"){e.fragment=new n({descriptor:u.f,root:e.root,contextStack:e.parentFragment.contextStack,owner:e}),a&&(e.lcName==="script"?(e.bubble=o,e.node.innerHTML=e.fragment.toString()):(e.bubble=s,e.bubble()));return}if(typeof u.f=="string"&&(!r||!r.namespaceURI||r.namespaceURI===t.html)){e.html=u.f;if(a){r.innerHTML=e.html,f=e.root._liveQueries,l=f.length;while(l--){c=f[l];if((h=r.querySelectorAll(c))&&(p=h.length)){(e.liveQueries||(e.liveQueries=[])).push(c),e.liveQueries[c]=[];while(p--)e.liveQueries[c][p]=h[p]}}}}else e.fragment=new i({descriptor:u.f,root:e.root,pNode:r,contextStack:e.parentFragment.contextStack,owner:e}),a&&r.appendChild(e.fragment.docFrag)}}(P,r,en,Ot),sn=function(e,t){var n=function(n,r,i,s){var o,u,a;this.root=r,this.node=i.node,o=n.n||n,typeof o!="string"&&(u=new t({descriptor:o,root:this.root,owner:i,contextStack:s}),o=u.toString(),u.teardown()),n.a?this.params=n.a:n.d&&(u=new t({descriptor:n.d,root:this.root,owner:i,contextStack:s}),this.params=u.toArgsList(),u.teardown()),this.fn=r.decorators[o];if(!this.fn){a='Missing "'+o+'" decorator. You may need to download a plugin via https://github.com/RactiveJS/Ractive/wiki/Plugins#decorators';if(r.debug)throw new Error(a);e(a)}};return n.prototype={init:function(){var e,t;this.params?(t=[this.node].concat(this.params),e=this.fn.apply(this.root,t)):e=this.fn.call(this.root,this.node);if(!e||!e.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.teardown=e.teardown}},n}(P,en),on=function(e){return function(t,n,r,i){r.decorator=new e(t,n,r,i),r.decorator.fn&&n._deferred.decorators.push(r.decorator)}}(sn),un=function(e,t){var n,r,i,s,o,u,a,f,l;return n=function(e,t,n,i,s){var o,u;o=e.node._ractive.events,u=o[t]||(o[t]=new r(e,t,i,s)),u.add(n)},r=function(t,n,r){var i;this.element=t,this.root=t.root,this.node=t.node,this.name=n,this.contextStack=r,this.proxies=[],(i=this.root.events[n])?this.custom=i(this.node,l(n)):("on"+n in this.node||e('Missing "'+this.name+'" event. You may need to download a plugin via https://github.com/RactiveJS/Ractive/wiki/Plugins#events'),this.node.addEventListener(n,f,!1))},r.prototype={add:function(e){this.proxies[this.proxies.length]=new i(this.element,this.root,e,this.contextStack)},teardown:function(){var e;this.custom?this.custom.teardown():this.node.removeEventListener(this.name,f,!1),e=this.proxies.length;while(e--)this.proxies[e].teardown()},fire:function(e){var t=this.proxies.length;while(t--)this.proxies[t].fire(e)}},i=function(e,n,r,i){var a;this.root=n,a=r.n||r,typeof a=="string"?this.n=a:this.n=new t({descriptor:r.n,root:this.root,owner:e,contextStack:i});if(r.a){this.a=r.a,this.fire=o;return}if(r.d){this.d=new t({descriptor:r.d,root:this.root,owner:e,contextStack:i}),this.fire=u;return}this.fire=s},i.prototype={teardown:function(){this.n.teardown&&this.n.teardown(),this.d&&this.d.teardown()},bubble:function(){}},s=function(e){this.root.fire(this.n.toString(),e)},o=function(e){this.root.fire.apply(this.root,[this.n.toString(),e].concat(this.a))},u=function(e){var t=this.d.toArgsList();typeof t=="string"&&(t=t.substr(1,t.length-2)),this.root.fire.apply(this.root,[this.n.toString(),e].concat(t))},f=function(e){var t=this._ractive;t.events[e.type].fire({node:this,original:e,index:t.index,keypath:t.keypath,context:t.root.get(t.keypath)})},a={},l=function(e){return a[e]?a[e]:a[e]=function(t){var n=t.node._ractive;t.index=n.index,t.keypath=n.keypath,t.context=n.root.get(n.keypath),n.events[e].fire(t)}},n}(P,en),an=function(e){return function(t,n){var r,i,s;for(i in n)if(n.hasOwnProperty(i)){s=i.split("-"),r=s.length;while(r--)e(t,s[r],n[i],t.parentFragment.contextStack)}}}(un),fn=function(){return function(e){var t,n,r,i,s;t=e.root,n=t._liveQueries,r=n.length;while(r--)i=n[r],s=n[i],s._test(e)&&((e.liveQueries||(e.liveQueries=[])).push(i),e.liveQueries[i]=[e.node])}}(),ln=function(){return function(e){return e.replace(/-([a-zA-Z])/g,function(e,t){return t.toUpperCase()})}}(),cn=function(){return function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n]);return e}}(),hn=function(e,t,n,r,i,s,o,u){function w(e){var t,n,r;if(!p[e])if(f[e]!==undefined)p[e]=e;else{r=e.charAt(0).toUpperCase()+e.substring(1),t=l.length;while(t--){n=l[t];if(f[n+r]!==undefined){p[e]=n+r;break}}}return p[e]}function E(e){return e.replace(h,"")}function S(e){var t;return c.test(e)&&(e="-"+e),t=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),t}var a,f,l,c,h,p,d,v,m,g,y,b;if(!e)return;return f=t("div").style,function(){f.transition!==undefined?(v="transition",b="transitionend",d=!0):f.webkitTransition!==undefined?(v="webkitTransition",b="webkitTransitionEnd",d=!0):d=!1}(),v&&(m=v+"Duration",g=v+"Property",y=v+"TimingFunction"),a=function(e,t,r,i,s){var o=this,a,f,l;this.root=t,this.node=r.node,this.isIntro=s,this.originalStyle=this.node.getAttribute("style"),this.complete=function(e){!e&&o.isIntro&&o.resetStyle(),o._manager.pop(o.node),o.node._ractive.transition=null},a=e.n||e,typeof a!="string"&&(f=new u({descriptor:a,root:this.root,owner:r,contextStack:i}),a=f.toString(),f.teardown()),this.name=a,e.a?this.params=e.a:e.d&&(f=new u({descriptor:e.d,root:this.root,owner:r,contextStack:i}),this.params=f.toArgsList(),f.teardown()),this._fn=t.transitions[a];if(!this._fn){l='Missing "'+a+'" transition. You may need to download a plugin via https://github.com/RactiveJS/Ractive/wiki/Plugins#transitions';if(t.debug)throw new Error(l);n(l);return}},a.prototype={init:function(){if(this._inited)throw new Error("Cannot initialize a transition more than once");this._inited=!0,this._fn.apply(this.root,[this].concat(this.params))},getStyle:function(e){var t,n,r,s,o;t=window.getComputedStyle(this.node);if(typeof e=="string")return o=t[w(e)],o==="0px"&&(o=0),o;if(!i(e))throw new Error("Transition#getStyle must be passed a string, or an array of strings representing CSS properties");n={},r=e.length;while(r--)s=e[r],o=t[w(s)],o==="0px"&&(o=0),n[s]=o;return n},setStyle:function(e,t){var n;if(typeof e=="string")this.node.style[w(e)]=t;else for(n in e)e.hasOwnProperty(n)&&(this.node.style[w(n)]=e[n]);return this},animateStyle:function(e,t,r,i){var o=this,u,a,f,l,c,h,p,d,v;typeof e=="string"?(c={},c[e]=t):(c=e,i=r,r=t),r||(n('The "'+o.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),r=o,i=o.complete),r.duration||(o.setStyle(c),i&&i()),u=Object.keys(c),a=[],f=window.getComputedStyle(o.node),h={},d=u.length;while(d--)v=u[d],l=f[w(v)],l==="0px"&&(l=0),l!=c[v]&&(a[a.length]=v,o.node.style[w(v)]=l);if(!a.length){i&&i();return}setTimeout(function(){o.node.style[g]=u.map(w).map(S).join(","),o.node.style[y]=S(r.easing||"linear"),o.node.style[m]=r.duration/1e3+"s",p=function(e){var t;t=a.indexOf(s(E(e.propertyName))),t!==-1&&a.splice(t,1);if(a.length)return;o.root.fire(o.name+":end"),o.node.removeEventListener(b,p,!1),i&&i()},o.node.addEventListener(b,p,!1),setTimeout(function(){var e=a.length;while(e--)v=a[e],o.node.style[w(v)]=c[v]},0)},r.delay||0)},resetStyle:function(){this.originalStyle?this.node.setAttribute("style",this.originalStyle):(this.node.getAttribute("style"),this.node.removeAttribute("style"))},processParams:function(e,t){return typeof e=="number"?e={duration:e}:typeof e=="string"?e==="slow"?e={duration:600}:e==="fast"?e={duration:200}:e={duration:400}:e||(e={}),o(e,t)}},l=["o","ms","moz","webkit"],c=new RegExp("^(?:"+l.join("|")+")([A-Z])"),h=new RegExp("^-(?:"+l.join("|")+")-"),p={},a}(s,i,P,H,c,ln,cn,en),pn=function(e,t){return function(e,n,r,i,s){var o,u,a;if(!n.transitionsEnabled||n._parent&&!n._parent.transitionsEnabled)return;o=new t(e,n,r,i,s),o._fn&&(u=o.node,o._manager=n._transitionManager,(a=u._ractive.transition)&&a.complete(),u._ractive.transition=o,o._manager.push(u),s?n._deferred.transitions.push(o):o.init())}}(P,hn),dn=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){return function(i,v,m){var g,y,b,w,E,S,x,T,N,C,k,L,A;i.type=e.ELEMENT,g=i.parentFragment=v.parentFragment,y=g.pNode,b=g.contextStack,w=i.descriptor=v.descriptor,i.root=k=g.root,i.index=v.index,i.lcName=w.e.toLowerCase(),i.eventListeners=[],i.customEventListeners=[],y&&(E=i.namespace=u(w,y),S=E!==t.html?d(w.e):w.e,i.node=o(S,E),r(i.node,"_ractive",{value:{proxy:i,keypath:b.length?b[b.length-1]:"",index:g.indexRefs,events:n(null),root:k}})),x=a(i,w.a);if(w.f){if(i.node&&i.node.getAttribute("contenteditable")&&i.node.innerHTML){A="A pre-populated contenteditable element should not have children";if(k.debug)throw new Error(A);s(A)}f(i,i.node,w,m)}m&&w.v&&c(i,w.v),m&&(k.twoway&&(i.bind(),i.node.getAttribute("contenteditable")&&i.node._ractive.binding&&i.node._ractive.binding.update()),x.name&&!x.name.twoway&&x.name.update(),i.node.tagName==="IMG"&&((T=i.attributes.width)||(N=i.attributes.height))&&i.node.addEventListener("load",C=function(){T&&(i.node.width=T.value),N&&(i.node.height=N.value),i.node.removeEventListener("load",C,!1)},!1),m.appendChild(i.node),w.o&&l(w.o,k,i,b),w.t1&&p(w.t1,k,i,b,!0),i.node.tagName==="OPTION"&&(y.tagName==="SELECT"&&(L=y._ractive.binding)&&L.deferUpdate(),i.node._ractive.value==y._ractive.value&&(i.node.selected=!0)),i.node.autofocus&&(k._deferred.focusable=i.node)),h(i)}}(l,r,n,o,G,P,i,Dt,nn,rn,on,an,fn,pn,Pt),vn=function(e){return function(t){var n,r,i,s,o,u,a,f,l;this.fragment&&this.fragment.teardown(!1);while(this.attributes.length)this.attributes.pop().teardown();if(this.node){for(n in this.node._ractive.events)this.node._ractive.events[n].teardown();if(r=this.node._ractive.binding)r.teardown(),i=this.root._twowayBindings[r.attr.keypath],i.splice(i.indexOf(r),1)}this.decorator&&this.decorator.teardown(),this.descriptor.t2&&e(this.descriptor.t2,this.root,this,this.parentFragment.contextStack,!1),t&&this.root._transitionManager.detachWhenReady(this);if(o=this.liveQueries){s=o.length;while(s--){u=o[s];if(f=this.liveQueries[u]){l=f.length,a=this.root._liveQueries[u];while(l--)a._remove(f[l])}}}}}(pn),mn=function(){return"area base br col command doctype embed hr img input keygen link meta param source track wbr".split(" ")}(),gn=function(e){return function(){var t,n,r;t="<"+(this.descriptor.y?"!doctype":this.descriptor.e),r=this.attributes.length;for(n=0;n<r;n+=1)t+=" "+this.attributes[n].toString();return t+=">",this.html?t+=this.html:this.fragment&&(t+=this.fragment.toString()),e.indexOf(this.descriptor.e)===-1&&(t+="</"+this.descriptor.e+">"),t}}(mn),yn=function(e){return function(t){var n;if(e(this.node,t))return this.node;if(this.html&&(n=this.node.querySelector(t)))return n;if(this.fragment&&this.fragment.find)return this.fragment.find(t)}}(G),bn=function(){return function(e,t){var n,r,i,s,o;t._test(this,!0)&&t.live&&((this.liveQueries||(this.liveQueries=[])).push(e),this.liveQueries[e]=[this.node]);if(this.html&&(n=this.node.querySelectorAll(e))&&(i=n.length)){t.live&&(this.liveQueries[e]||((this.liveQueries||(this.liveQueries=[])).push(e),this.liveQueries[e]=[]),o=this.liveQueries[e]);for(r=0;r<i;r+=1)s=n[r],t.push(s),t.live&&o.push(s)}this.fragment&&this.fragment.findAll(e,t)}}(),wn=function(){return function(e){if(this.fragment)return this.fragment.findComponent(e)}}(),En=function(){return function(e,t){this.fragment&&this.fragment.findAllComponents(e,t)}}(),Sn=function(){return function(){var e=this.attributes;if(!this.node)return;this.binding&&(this.binding.teardown(),this.binding=null);if(this.node.getAttribute("contenteditable")&&e.value&&e.value.bind())return;switch(this.descriptor.e){case"select":case"textarea":e.value&&e.value.bind();return;case"input":if(this.node.type==="radio"||this.node.type==="checkbox"){if(e.name&&e.name.bind())return;if(e.checked&&e.checked.bind())return}if(e.value&&e.value.bind())return}}}(),xn=function(e,t,n,r,i,s,o,u){var a=function(t,n){e(this,t,n)};return a.prototype={detach:function(){if(this.node)return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node},teardown:t,firstNode:function(){return this.node},findNextNode:function(){return null},bubble:function(){},toString:n,find:r,findAll:i,findComponent:s,findAllComponents:o,bind:u},a}(dn,vn,gn,yn,bn,wn,En,Sn),Tn={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser"},Nn={},Cn=function(){return function(e){var t,n,r;r="";while(e.length){t=e.indexOf("<!--"),n=e.indexOf("-->");if(t===-1&&n===-1){r+=e;break}if(t!==-1&&n===-1)throw"Illegal HTML - expected closing comment sequence ('-->')";if(n!==-1&&t===-1||n<t)throw"Illegal HTML - unexpected closing comment sequence ('-->')";r+=e.substr(0,t),e=e.substring(n+3)}return r}}(),kn=function(e){return function(t){var n,r,i,s,o,u;o=/^\s*\r?\n/,u=/\r?\n\s*$/;for(n=2;n<t.length;n+=1)r=t[n],i=t[n-1],s=t[n-2],r.type===e.TEXT&&i.type===e.MUSTACHE&&s.type===e.TEXT&&u.test(s.value)&&o.test(r.value)&&(i.mustacheType!==e.INTERPOLATOR&&i.mustacheType!==e.TRIPLE&&(s.value=s.value.replace(u,"\n")),r.value=r.value.replace(o,""),r.value===""&&t.splice(n--,1));return t}}(l),Ln=function(e){return function(t){var n,r,i,s;for(n=0;n<t.length;n+=1){r=t[n],i=t[n-1],s=t[n+1];if(r.mustacheType===e.COMMENT||r.mustacheType===e.DELIMCHANGE)t.splice(n,1),i&&s&&i.type===e.TEXT&&s.type===e.TEXT&&(i.value+=s.value,t.splice(n,1)),n-=1}return t}}(l),An=function(e){var t=e(/^[^\s=]+/);return function(e){var n,r,i;return e.getStringMatch("=")?(n=e.pos,e.allowWhitespace(),r=t(e),r?(e.allowWhitespace(),i=t(e),i?(e.allowWhitespace(),e.getStringMatch("=")?[r,i]:(e.pos=n,null)):(e.pos=n,null)):(e.pos=n,null)):null}}(Ut),On=function(e){var t={"#":e.SECTION,"^":e.INVERTED,"/":e.CLOSING,">":e.PARTIAL,"!":e.COMMENT,"&":e.TRIPLE};return function(e){var n=t[e.str.charAt(e.pos)];return n?(e.pos+=1,n):null}}(l),Mn=function(e,t,n){var r=t(/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/),i=/^[0-9][1-9]*$/;return function(t,s){var o,u,a,f,l,c,h;o=t.pos,u={type:s?e.TRIPLE:e.MUSTACHE};if(!s){if(f=t.getExpression())u.mustacheType=e.INTERPOLATOR,t.allowWhitespace(),t.getStringMatch(t.delimiters[1])?t.pos-=t.delimiters[1].length:(t.pos=o,f=null);if(!f){a=n(t),a===e.TRIPLE?u={type:e.TRIPLE}:u.mustacheType=a||e.INTERPOLATOR;if(a===e.COMMENT||a===e.CLOSING){c=t.remaining(),h=c.indexOf(t.delimiters[1]);if(h!==-1)return u.ref=c.substr(0,h),t.pos+=h,u}}}f||(t.allowWhitespace(),f=t.getExpression());while(f.t===e.BRACKETED&&f.x)f=f.x;return f.t===e.REFERENCE?u.ref=f.n:f.t===e.NUMBER_LITERAL&&i.test(f.v)?u.ref=f.v:u.expression=f,l=r(t),l!==null&&(u.indexRef=l),u}}(l,Ut,On),_n=function(e,t,n){function r(r,i){var s=r.pos,o,u;return u=i?r.tripleDelimiters:r.delimiters,r.getStringMatch(u[0])?(o=t(r),o?r.getStringMatch(u[1])?(r[i?"tripleDelimiters":"delimiters"]=o,{type:e.MUSTACHE,mustacheType:e.DELIMCHANGE}):(r.pos=s,null):(r.allowWhitespace(),o=n(r,i),o===null?(r.pos=s,null):(r.allowWhitespace(),r.getStringMatch(u[1])?o:(r.pos=s,null)))):null}return function(){var e=this.tripleDelimiters[0].length>this.delimiters[0].length;return r(this,e)||r(this,!e)}}(l,An,Mn),Dn=function(e){return function(){var t,n,r;if(!this.getStringMatch("<!--"))return null;n=this.remaining(),r=n.indexOf("-->");if(r===-1)throw new Error('Unexpected end of input (expected "-->" to close comment)');return t=n.substr(0,r),this.pos+=r+3,{type:e.COMMENT,content:t}}}(l),Pn=function(){return function(e,t){var n,r,i;n=t.length;while(n--){r=e.indexOf(t[n]);if(!r)return 0;if(r===-1)continue;if(!i||r<i)i=r}return i||-1}}(),Hn=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v;return r=function(){return i(this)||s(this)},i=function(t){var n,r,i,s;n=t.pos;if(t.inside)return null;if(!t.getStringMatch("<"))return null;r={type:e.TAG},t.getStringMatch("!")&&(r.doctype=!0),r.name=o(t);if(!r.name)return t.pos=n,null;i=u(t),i&&(r.attrs=i),t.allowWhitespace(),t.getStringMatch("/")&&(r.selfClosing=!0);if(!t.getStringMatch(">"))return t.pos=n,null;s=r.name.toLowerCase();if(s==="script"||s==="style")t.inside=s;return r},s=function(t){var n,r,i;n=t.pos,i=function(e){throw new Error("Unexpected character "+t.remaining().charAt(0)+" (expected "+e+")")};if(!t.getStringMatch("<"))return null;r={type:e.TAG,closing:!0},t.getStringMatch("/")||i('"/"'),r.name=o(t),r.name||i("tag name"),t.getStringMatch(">")||i('">"');if(t.inside){if(r.name.toLowerCase()!==t.inside)return t.pos=n,null;t.inside=null}return r},o=t(/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/),u=function(e){var t,n,r;t=e.pos,e.allowWhitespace(),r=a(e);if(!r)return e.pos=t,null;n=[];while(r!==null)n[n.length]=r,e.allowWhitespace(),r=a(e);return n},a=function(e){var t,n,r;return n=f(e),n?(t={name:n},r=l(e),r&&(t.value=r),t):null},f=t(/^[^\s"'>\/=]+/),l=function(e){var t,n;return t=e.pos,e.allowWhitespace(),e.getStringMatch("=")?(e.allowWhitespace(),n=v(e,"'")||v(e,'"')||c(e),n===null?(e.pos=t,null):n):(e.pos=t,null)},p=t(/^[^\s"'=<>`]+/),h=function(t){var n,r,i;return n=t.pos,r=p(t),r?((i=r.indexOf(t.delimiters[0]))!==-1&&(r=r.substr(0,i),t.pos=n+r.length),{type:e.TEXT,value:r}):null},c=function(e){var t,n;t=[],n=e.getMustache()||h(e);while(n!==null)t[t.length]=n,n=e.getMustache()||h(e);return t.length?t:null},v=function(e,t){var n,r,i;n=e.pos;if(!e.getStringMatch(t))return null;r=[],i=e.getMustache()||d(e,t);while(i!==null)r[r.length]=i,i=e.getMustache()||d(e,t);return e.getStringMatch(t)?r:(e.pos=n,null)},d=function(t,r){var i,s,o;i=t.pos,o=t.remaining(),s=n(o,[r,t.delimiters[0],t.delimiters[1]]);if(s===-1)throw new Error("Quoted attribute value must have a closing quote");return s?(t.pos+=s,{type:e.TEXT,value:o.substr(0,s)}):null},r}(l,Ut,Pn),Bn=function(e,t){return function(){var n,r,i;return r=this.remaining(),i=this.inside?"</"+this.inside:"<",n=t(r,[i,this.delimiters[0],this.tripleDelimiters[0]]),n?(n===-1&&(n=r.length),this.pos+=n,{type:e.TEXT,value:r.substr(0,n)}):null}}(l,Pn),jn=function(e){return function(t){var n=t.remaining();return n.substr(0,4)==="true"?(t.pos+=4,{t:e.BOOLEAN_LITERAL,v:"true"}):n.substr(0,5)==="false"?(t.pos+=5,{t:e.BOOLEAN_LITERAL,v:"false"}):null}}(l),Fn=function(e,t){return function(n){var r,i,s;return r=n.pos,n.allowWhitespace(),i=t(n),i===null?(n.pos=r,null):(n.allowWhitespace(),n.getStringMatch(":")?(n.allowWhitespace(),s=n.getExpression(),s===null?(n.pos=r,null):{t:e.KEY_VALUE_PAIR,k:i,v:s}):(n.pos=r,null))}}(l,Jt),In=function(e){return function t(n){var r,i,s,o;return r=n.pos,s=e(n),s===null?null:(i=[s],n.getStringMatch(",")?(o=t(n),o?i.concat(o):(n.pos=r,null)):i)}}(Fn),qn=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.getStringMatch("{")?(i=t(n),n.allowWhitespace(),n.getStringMatch("}")?{t:e.OBJECT_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(l,In),Rn=function(){return function e(t){var n,r,i,s;n=t.pos,t.allowWhitespace(),i=t.getExpression();if(i===null)return null;r=[i],t.allowWhitespace();if(t.getStringMatch(",")){s=e(t);if(s===null)return t.pos=n,null;r=r.concat(s)}return r}}(),Un=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.getStringMatch("[")?(i=t(n),n.getStringMatch("]")?{t:e.ARRAY_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(l,Rn),zn=function(e,t,n,r,i){return function(s){var o=e(s)||t(s)||n(s)||r(s)||i(s);return o}}(Vt,jn,Xt,qn,Un),Wn=function(e,t,n){var r,i,s,o;return r=t(/^\.[a-zA-Z_$0-9]+/),i=function(e){var t=s(e);return t?"."+t:null},s=t(/^\[(0|[1-9][0-9]*)\]/),o=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,function(t){var s,u,a,f,l,c,h;s=t.pos,u="";while(t.getStringMatch("../"))u+="../";u||(f=t.getStringMatch(".")||""),a=n(t)||"";if(!u&&!f&&o.test(a))return{t:e.GLOBAL,v:a};a==="this"&&!u&&!f&&(a=".",s+=3),l=(u||f)+a;if(!l)return null;while(c=r(t)||i(t))l+=c;return t.getStringMatch("(")&&(h=l.lastIndexOf("."),h!==-1?(l=l.substr(0,h),t.pos=s+l.length):t.pos-=1),{t:e.REFERENCE,n:l}}}(l,Ut,$t),Xn=function(e){return function(t){var n,r;return n=t.pos,t.getStringMatch("(")?(t.allowWhitespace(),r=t.getExpression(),r?(t.allowWhitespace(),t.getStringMatch(")")?{t:e.BRACKETED,x:r}:(t.pos=n,null)):(t.pos=n,null)):null}}(l),Vn=function(e,t,n){return function(r){return e(r)||t(r)||n(r)}}(zn,Wn,Xn),$n=function(e,t){return function(r){var i,s,o;i=r.pos,r.allowWhitespace();if(r.getStringMatch(".")){r.allowWhitespace();if(s=t(r))return{t:e.REFINEMENT,n:s};r.expected("a property name")}return r.getStringMatch("[")?(r.allowWhitespace(),o=r.getExpression(),o||r.expected("an expression"),r.allowWhitespace(),r.getStringMatch("]")||r.expected('"]"'),{t:e.REFINEMENT,x:o}):null}}(l,$t),Jn=function(e,t,n,r){return function(i){var s,o,u,a;o=t(i);if(!o)return null;while(o){s=i.pos;if(u=r(i))o={t:e.MEMBER,x:o,r:u};else{if(!i.getStringMatch("("))break;i.allowWhitespace(),a=n(i),i.allowWhitespace();if(!i.getStringMatch(")")){i.pos=s;break}o={t:e.INVOCATION,x:o},a&&(o.o=a)}}return o}}(l,Vn,Rn,$n),Kn=function(e,t){var n,r;return r=function(t,n){return function(r){var i,s;return r.getStringMatch(t)?(i=r.pos,r.allowWhitespace(),s=r.getExpression(),s||r.expected("an expression"),{s:t,o:s,t:e.PREFIX_OPERATOR}):n(r)}},function(){var e,i,s,o,u;o="! ~ + - typeof".split(" "),u=t;for(e=0,i=o.length;e<i;e+=1)s=r(o[e],u),u=s;n=u}(),n}(l,Jn),Qn=function(e,t){var n,r;return r=function(t,n){return function(r){var i,s,o;return s=n(r),s?(i=r.pos,r.allowWhitespace(),r.getStringMatch(t)?t==="in"&&/[a-zA-Z_$0-9]/.test(r.remaining().charAt(0))?(r.pos=i,s):(r.allowWhitespace(),o=r.getExpression(),o?{t:e.INFIX_OPERATOR,s:t,o:[s,o]}:(r.pos=i,s)):(r.pos=i,s)):null}},function(){var e,i,s,o,u;o="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),u=t;for(e=0,i=o.length;e<i;e+=1)s=r(o[e],u),u=s;n=u}(),n}(l,Kn),Gn=function(e,t){return function(n){var r,i,s,o;return i=t(n),i?(r=n.pos,n.allowWhitespace(),n.getStringMatch("?")?(n.allowWhitespace(),s=n.getExpression(),s?(n.allowWhitespace(),n.getStringMatch(":")?(n.allowWhitespace(),o=n.getExpression(),o?{t:e.CONDITIONAL,o:[i,s,o]}:(n.pos=r,i)):(n.pos=r,i)):(n.pos=r,i)):(n.pos=r,i)):null}}(l,Qn),Yn=function(e){return function(){return e(this)}}(Gn),Zn=function(e,t,n,r,i,s,o){var u;return u=function(e,t){var n;this.str=e,this.pos=0,this.delimiters=t.delimiters,this.tripleDelimiters=t.tripleDelimiters,this.tokens=[];while(this.pos<this.str.length)n=this.getToken(),n===null&&this.remaining()&&this.fail(),this.tokens.push(n)},u.prototype={getToken:function(){var e=this.getMustache()||this.getComment()||this.getTag()||this.getText();return e},getMustache:e,getComment:t,getTag:n,getText:r,getExpression:i,allowWhitespace:s,getStringMatch:o,remaining:function(){return this.str.substring(this.pos)},fail:function(){var e,t;throw e=this.str.substr(0,this.pos).substr(-20),e.length===20&&(e="..."+e),t=this.remaining().substr(0,20),t.length===20&&(t+="..."),new Error("Could not parse template: "+(e?e+"<- ":"")+"failed at character "+this.pos+" ->"+t)},expected:function(e){var t=this.remaining().substr(0,40);throw t.length===40&&(t+="..."),new Error('Tokenizer failed: unexpected string "'+t+'" (expected '+e+")")}},u}(_n,Dn,Hn,Bn,Yn,Rt,qt),er=function(e,t,n,r,i){var s,o;return i.push(function(){o=i.Ractive}),s=function(i,s){var u,a;return s=s||{},s.stripComments!==!1&&(i=e(i)),u=new r(i,{delimiters:s.delimiters||(o?o.delimiters:["{{","}}"]),tripleDelimiters:s.tripleDelimiters||(o?o.tripleDelimiters:["{{{","}}}"])}),a=u.tokens,t(a),n(a),a},s}(Cn,kn,Ln,Zn,Ot),tr=function(e){var t,n,r,i,s,o,u,a,f;return t=function(e,t){this.text=t?e.value:e.value.replace(f," ")},t.prototype={type:e.TEXT,toJSON:function(){return this.decoded||(this.decoded=a(this.text))},toString:function(){return this.text}},n={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},r=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],i=new RegExp("&("+Object.keys(n).join("|")+");?","g"),s=/&#x([0-9]+);?/g,o=/&#([0-9]+);?/g,u=function(e){return e?e===10?32:e<128?e:e<=159?r[e-128]:e<55296?e:e<=57343?65533:e<=65535?e:65533:65533},a=function(e){var t;return t=e.replace(i,function(e,t){return n[t]?String.fromCharCode(n[t]):e}),t=t.replace(s,function(e,t){return String.fromCharCode(u(parseInt(t,16)))}),t=t.replace(o,function(e,t){return String.fromCharCode(u(t))}),t},f=/\s+/g,t}(l),nr=function(e,t){return function(n){return n.type===e.TEXT?(this.pos+=1,new t(n,this.preserveWhitespace)):null}}(l,tr),rr=function(e){var t;return t=function(e){this.content=e.content},t.prototype={toJSON:function(){return{t:e.COMMENT,f:this.content}},toString:function(){return"<!--"+this.content+"-->"}},t}(l),ir=function(e,t){return function(n){return n.type===e.COMMENT?(this.pos+=1,new t(n,this.preserveWhitespace)):null}}(l,rr),sr=function(e,t){var n,r,i;return n=function(e){this.refs=[],r(e,this.refs),this.str=i(e,this.refs)},n.prototype={toJSON:function(){return this.json?this.json:(this.json={r:this.refs,s:this.str},this.json)}},r=function(n,i){var s,o;n.t===e.REFERENCE&&i.indexOf(n.n)===-1&&i.unshift(n.n),o=n.o||n.m;if(o)if(t(o))r(o,i);else{s=o.length;while(s--)r(o[s],i)}n.x&&r(n.x,i),n.r&&r(n.r,i),n.v&&r(n.v,i)},i=function(t,n){var r=function(e){return i(e,n)};switch(t.t){case e.BOOLEAN_LITERAL:case e.GLOBAL:case e.NUMBER_LITERAL:return t.v;case e.STRING_LITERAL:return"'"+t.v.replace(/'/g,"\\'")+"'";case e.ARRAY_LITERAL:return"["+(t.m?t.m.map(r).join(","):"")+"]";case e.OBJECT_LITERAL:return"{"+(t.m?t.m.map(r).join(","):"")+"}";case e.KEY_VALUE_PAIR:return t.k+":"+i(t.v,n);case e.PREFIX_OPERATOR:return(t.s==="typeof"?"typeof ":t.s)+i(t.o,n);case e.INFIX_OPERATOR:return i(t.o[0],n)+(t.s.substr(0,2)==="in"?" "+t.s+" ":t.s)+i(t.o[1],n);case e.INVOCATION:return i(t.x,n)+"("+(t.o?t.o.map(r).join(","):"")+")";case e.BRACKETED:return"("+i(t.x,n)+")";case e.MEMBER:return i(t.x,n)+i(t.r,n);case e.REFINEMENT:return t.n?"."+t.n:"["+i(t.x,n)+"]";case e.CONDITIONAL:return i(t.o[0],n)+"?"+i(t.o[1],n)+":"+i(t.o[2],n);case e.REFERENCE:return"${"+n.indexOf(t.n)+"}";default:throw new Error("Could not stringify expression token. This error is unexpected")}},n}(l,S),or=function(e,t){var n=function(n,r){this.type=n.type===e.TRIPLE?e.TRIPLE:n.mustacheType,n.ref&&(this.ref=n.ref),n.expression&&(this.expr=new t(n.expression)),r.pos+=1};return n.prototype={toJSON:function(){var e;return this.json?this.json:(e={t:this.type},this.ref&&(e.r=this.ref),this.expr&&(e.x=this.expr.toJSON()),this.json=e,e)},toString:function(){return!1}},n}(l,sr),ur=function(){return function(e){var t="",n,r,i;if(!e)return"";for(r=0,i=e.length;r<i;r+=1){n=e[r].toString();if(n===!1)return!1;t+=n}return t}}(),ar=function(e){return function(t,n){var r,i;if(!n){r=e(t);if(r!==!1)return r}return i=t.map(function(e){return e.toJSON(n)}),i}}(ur),fr=function(e,t,n){var r=function(t,r){var i;this.ref=t.ref,this.indexRef=t.indexRef,this.inverted=t.mustacheType===e.INVERTED,t.expression&&(this.expr=new n(t.expression)),r.pos+=1,this.items=[],i=r.next();while(i){if(i.mustacheType===e.CLOSING){if(i.ref.trim()===this.ref||this.expr){r.pos+=1;break}throw new Error("Could not parse template: Illegal closing section")}this.items[this.items.length]=r.getStub(),i=r.next()}};return r.prototype={toJSON:function(n){var r;return this.json?this.json:(r={t:e.SECTION},this.ref&&(r.r=this.ref),this.indexRef&&(r.i=this.indexRef),this.inverted&&(r.n=!0),this.expr&&(r.x=this.expr.toJSON()),this.items.length&&(r.f=t(this.items,n)),this.json=r,r)},toString:function(){return!1}},r}(l,ar,sr),lr=function(e,t,n){return function(r){if(r.type===e.MUSTACHE||r.type===e.TRIPLE)return r.mustacheType===e.SECTION||r.mustacheType===e.INVERTED?new n(r,this):new t(r,this)}}(l,or,fr),cr=function(){return{li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote dir div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rp","rt"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tr:["tr"],td:["td","th"],th:["td","th"]}}(),hr=function(e){function t(n){var r,i;if(typeof n!="object")return n;if(e(n))return n.map(t);r={};for(i in n)n.hasOwnProperty(i)&&(r[i]=t(n[i]));return r}return function(e){var n,r,i,s,o,u;i={},n=[],r=[],o=e.length;for(s=0;s<o;s+=1){u=e[s];if(u.name==="intro"){if(i.intro)throw new Error("An element can only have one intro transition");i.intro=u}else if(u.name==="outro"){if(i.outro)throw new Error("An element can only have one outro transition");i.outro=u}else if(u.name==="intro-outro"){if(i.intro||i.outro)throw new Error("An element can only have one intro and one outro transition");i.intro=u,i.outro=t(u)}else u.name.substr(0,6)==="proxy-"?(u.name=u.name.substring(6),r[r.length]=u):u.name.substr(0,3)==="on-"?(u.name=u.name.substring(3),r[r.length]=u):u.name==="decorator"?i.decorator=u:n[n.length]=u}return i.attrs=n,i.proxies=r,i}}(c),pr=function(e,t){return function(n){var r,i,s,o,u,a,f,l;u=function(){throw new Error("Illegal directive")},(!n.name||!n.value)&&u(),r={directiveType:n.name},i=n.value,a=[],f=[];while(i.length){s=i.shift();if(s.type===e.TEXT){o=s.value.indexOf(":");if(o!==-1){o&&(a[a.length]={type:e.TEXT,value:s.value.substr(0,o)}),s.value.length>o+1&&(f[0]={type:e.TEXT,value:s.value.substring(o+1)});break}a[a.length]=s}else a[a.length]=s}return f=f.concat(i),a.length===1&&a[0].type===e.TEXT?r.name=a[0].value:r.name=a,f.length&&(f.length===1&&f[0].type===e.TEXT?(l=t("["+f[0].value+"]"),r.args=l?l.value:f[0].value):r.dynamicArgs=f),r}}(l,Kt),dr=function(e,t){var n;return n=function(e,t){var n;this.tokens=e||[],this.pos=0,this.options=t,this.result=[];while(n=this.getStub())this.result.push(n)},n.prototype={getStub:function(){var e=this.next();return e?this.getText(e)||this.getMustache(e):null},getText:e,getMustache:t,next:function(){return this.tokens[this.pos]}},n}(nr,lr),vr=function(e,t,n){var r;return r=function(t){var n=new e(t);this.stubs=n.result},r.prototype={toJSON:function(e){var t;return this["json_"+e]?this["json_"+e]:(t=this["json_"+e]=n(this.stubs,e),t)},toString:function(){return this.str!==undefined?this.str:(this.str=t(this.stubs),this.str)}},r}(dr,ur,ar),mr=function(e){return function(t){var n,r;if(typeof t.name=="string"){if(!t.args&&!t.dynamicArgs)return t.name;r=t.name}else r=(new e(t.name)).toJSON();return n={n:r},t.args?(n.a=t.args,n):(t.dynamicArgs&&(n.d=(new e(t.dynamicArgs)).toJSON()),n)}}(vr),gr=function(e,t,n){return function(r){var i,s,o,u,a,f,l;if(this["json_"+r])return this["json_"+r];this.component?i={t:e.COMPONENT,e:this.component}:i={t:e.ELEMENT,e:this.tag},this.doctype&&(i.y=1);if(this.attributes&&this.attributes.length){i.a={},f=this.attributes.length;for(a=0;a<f;a+=1){l=this.attributes[a],s=l.name;if(i.a[s])throw new Error("You cannot have multiple attributes with the same name");l.value===null?o=null:o=l.value.toJSON(r),i.a[s]=o}}this.items&&this.items.length&&(i.f=t(this.items,r));if(this.proxies&&this.proxies.length){i.v={},f=this.proxies.length;for(a=0;a<f;a+=1)u=this.proxies[a],i.v[u.directiveType]=n(u)}return this.intro&&(i.t1=n(this.intro)),this.outro&&(i.t2=n(this.outro)),this.decorator&&(i.o=n(this.decorator)),this["json_"+r]=i,i}}(l,ar,mr),yr=function(e,t){var n;return n="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol p param pre q s samp script select small span strike strong style sub sup textarea title tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),function(){var r,i,s,o,u,a,f,l;if(this.str!==undefined)return this.str;if(this.component)return this.str=!1;if(n.indexOf(this.tag.toLowerCase())===-1)return this.str=!1;if(this.proxies||this.intro||this.outro||this.decorator)return this.str=!1;f=e(this.items);if(f===!1)return this.str=!1;l=t.indexOf(this.tag.toLowerCase())!==-1,r="<"+this.tag;if(this.attributes)for(i=0,s=this.attributes.length;i<s;i+=1){u=this.attributes[i].name;if(u.indexOf(":")!==-1)return this.str=!1;if(u==="id"||u==="intro"||u==="outro")return this.str=!1;o=" "+u;if(this.attributes[i].value!==null){a=this.attributes[i].value.toString();if(a===!1)return this.str=!1;a!==""&&(o+="=",/[\s"'=<>`]/.test(a)?o+='"'+a.replace(/"/g,"&quot;")+'"':o+=a)}r+=o}return this.selfClosing&&!l?(r+="/>",this.str=r):(r+=">",l?this.str=r:(r+=f,r+="</"+this.tag+">",this.str=r))}}(ur,mn),br=function(e,t,n,r,i,s,o,u,a,f,l){var c,h,p,d,v,m=/^\s+/,g=/\s+$/;return c=function(r,i,a){var f,c,h,p,d,y,b;i.pos+=1,y=function(e){return{name:e.name,value:e.value?new l(e.value):null}},this.tag=r.name,b=r.name.toLowerCase(),b.substr(0,3)==="rv-"&&(n('The "rv-" prefix for components has been deprecated. Support will be removed in a future version'),this.tag=this.tag.substring(3)),a=a||b==="pre",r.attrs&&(h=o(r.attrs),c=h.attrs,p=h.proxies,i.options.sanitize&&i.options.sanitize.eventAttributes&&(c=c.filter(v)),c.length&&(this.attributes=c.map(y)),p.length&&(this.proxies=p.map(u)),h.intro&&(this.intro=u(h.intro)),h.outro&&(this.outro=u(h.outro)),h.decorator&&(this.decorator=u(h.decorator))),r.doctype&&(this.doctype=!0),r.selfClosing&&(this.selfClosing=!0),t.indexOf(b)!==-1&&(this.isVoid=!0);if(this.selfClosing||this.isVoid)return;this.siblings=s[b],this.items=[],f=i.next();while(f){if(f.mustacheType===e.CLOSING)break;if(f.type===e.TAG){if(f.closing){f.name.toLowerCase()===b&&(i.pos+=1);break}if(this.siblings&&this.siblings.indexOf(f.name.toLowerCase())!==-1)break}this.items[this.items.length]=i.getStub(),f=i.next()}a||(d=this.items[0],d&&d.type===e.TEXT&&(d.text=d.text.replace(m,""),d.text||this.items.shift()),d=this.items[this.items.length-1],d&&d.type===e.TEXT&&(d.text=d.text.replace(g,""),d.text||this.items.pop()))},c.prototype={toJSON:a,toString:f},h="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol p param pre q s samp script select small span strike strong style sub sup textarea title tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),p="li dd rt rp optgroup option tbody tfoot tr td th".split(" "),d=/^on[a-zA-Z]/,v=function(e){var t=!d.test(e.name);return t},c}(l,mn,P,ln,ur,cr,hr,pr,gr,yr,vr),wr=function(e,t){return function(e){return this.options.sanitize&&this.options.sanitize.elements&&this.options.sanitize.elements.indexOf(e.name.toLowerCase())!==-1?null:new t(e,this)}}(l,br),Er=function(e,t,n,r,i){var s;return s=function(e,t){var n,r;this.tokens=e||[],this.pos=0,this.options=t,this.preserveWhitespace=t.preserveWhitespace,r=[];while(n=this.getStub())r.push(n);this.result=i(r)},s.prototype={getStub:function(){var e=this.next();return e?this.getText(e)||this.getComment(e)||this.getMustache(e)||this.getElement(e):null},getText:e,getComment:t,getMustache:n,getElement:r,next:function(){return this.tokens[this.pos]}},s}(nr,ir,lr,wr,ar),Sr=function(e,t,n){var r,i,s,o,u;return i=/^\s*$/,s=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,o=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,r=function(r,o){var a,f,l;return o=o||{},s.test(r)?u(r,o):(o.sanitize===!0&&(o.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),a=e(r,o),o.preserveWhitespace||(l=a[0],l&&l.type===t.TEXT&&i.test(l.value)&&a.shift(),l=a[a.length-1],l&&l.type===t.TEXT&&i.test(l.value)&&a.pop()),f=(new n(a,o)).result,typeof f=="string"?[f]:f)},u=function(e,t){var n,i,u,a,f,l;u={},n="",i=e;while(f=s.exec(i)){a=f[1],n+=i.substr(0,f.index),i=i.substring(f.index+f[0].length),l=o.exec(i);if(!l||l[1]!==a)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");u[a]=r(i.substr(0,l.index),t),i=i.substring(l.index+l[0].length)}return{main:r(n,t),partials:u}},r}(er,l,Er),xr=function(e,t,n,r,i,s){var o,u,a,f;return o=function(r,o){var l,c,h;if(c=a(r,o))return c;if(t){l=document.getElementById(o);if(l&&l.tagName==="SCRIPT"){if(!s)throw new Error(e.missingParser);u(s(l.innerHTML),o,i)}}c=i[o];if(!c){h='Could not find descriptor for partial "'+o+'"';if(r.debug)throw new Error(h);return n(h),[]}return f(c)},a=function(t,n){var r;if(t.partials[n]){if(typeof t.partials[n]=="string"){if(!s)throw new Error(e.missingParser);r=s(t.partials[n],t.parseOptions),u(r,n,t.partials)}return f(t.partials[n])}},u=function(e,t,n){var i;if(r(e)){n[t]=e.main;for(i in e.partials)e.partials.hasOwnProperty(i)&&(n[i]=e.partials[i])}else n[t]=e},f=function(e){return e.length===1&&typeof e[0]=="string"?e[0]:e},o}(Tn,s,P,S,Nn,Sr),Tr=function(e,t,n){var r,i;return n.push(function(){i=n.DomFragment}),r=function(n,r){var s=this.parentFragment=n.parentFragment,o;this.type=e.PARTIAL,this.name=n.descriptor.r,this.index=n.index;if(!n.descriptor.r)throw new Error("Partials must have a static reference (no expressions). This may change in a future version of Ractive.");o=t(s.root,n.descriptor.r),this.fragment=new i({descriptor:o,root:s.root,pNode:s.pNode,contextStack:s.contextStack,owner:this}),r&&r.appendChild(this.fragment.docFrag)},r.prototype={firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},teardown:function(e){this.fragment.teardown(e)},toString:function(){return this.fragment.toString()},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)}},r}(l,xr,Ot),Nr=function(e){var t=function(t,n,r){this.parentFragment=t.parentFragment,this.component=t,this.key=n,this.fragment=new e({descriptor:r,root:t.root,owner:this,contextStack:t.parentFragment.contextStack}),this.selfUpdating=this.fragment.isSimple(),this.value=this.fragment.getValue()};return t.prototype={bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._deferred.attrs.push(this),this.deferred=!0)},update:function(){var e=this.fragment.getValue();this.component.instance.set(this.key,e),this.value=e},teardown:function(){this.fragment.teardown()}},t}(en),Cr=function(e,t,n,r){function i(i,s,o,u){var a,f,l,c,h;return l=i.root,c=i.parentFragment,typeof o=="string"?(f=t(o),f?f.value:o):o===null?!0:o.length===1&&o[0].t===e.INTERPOLATOR&&o[0].r?c.indexRefs&&c.indexRefs[o[0].r]!==undefined?c.indexRefs[o[0].r]:(h=n(l,o[0].r,c.contextStack)||o[0].r,u.push({childKeypath:s,parentKeypath:h}),l.get(h)):(a=new r(i,s,o),i.complexParameters.push(a),a.value)}return function(e,t,n){var r,s,o;r={},e.complexParameters=[];for(s in t)t.hasOwnProperty(s)&&(o=i(e,s,t[s],n),o!==undefined&&(r[s]=o));return r}}(l,Kt,T,Nr),kr=function(){return function(e,t,n,r,i){var s,o,u,a;return o=e.parentFragment,a=e.root,u={content:i||[]},s=new t({el:o.pNode.cloneNode(!1),data:n,partials:u,_parent:a,adaptors:a.adaptors}),s.component=e,e.instance=s,s.insert(r),s.fragment.pNode=o.pNode,s}}(),Lr=function(){function t(t,n,r){var i,s,o,u,a,f,l;i=t.root,s=t.instance,a=t.observers,f=i.observe(n,function(e){!o&&!i._wrapped[n]&&(u=!0,s.set(r,e),u=!1)},e),a.push(f),s.twoway&&(f=s.observe(r,function(e){u||(o=!0,i.set(n,e),o=!1)},e),a.push(f),l=s.get(r),l!==undefined&&i.set(n,l))}var e={init:!1,debug:!0};return function(e,n){var r,i;e.observers=[],i=n.length;while(i--)r=n[i],t(e,r.parentKeypath,r.childKeypath)}}(),Ar=function(e){function n(n,r,i,s){if(typeof s!="string"){if(r.debug)throw new Error(t);e(t);return}n.on(i,function(){var e=Array.prototype.slice.call(arguments);e.unshift(s),r.fire.apply(r,e)})}var t="Components currently only support simple events - you cannot include arguments. Sorry!";return function(e,t){var r;for(r in t)t.hasOwnProperty(r)&&n(e.instance,e.root,r,t[r])}}(P),Or=function(){return function(e){var t,n;t=e.root;while(t)(n=t._liveComponentQueries[e.name])&&n.push(e.instance),t=t._parent}}(),Mr=function(e,t,n,r,i,s,o){return function(u,a,f){var l,c,h,p,d;l=u.parentFragment=a.parentFragment,c=l.root,u.root=c,u.type=e.COMPONENT,u.name=a.descriptor.e,u.index=a.index,u.observers=[],h=c.components[a.descriptor.e];if(!h)throw new Error('Component "'+a.descriptor.e+'" not found');d=[],p=n(u,a.descriptor.a,d),r(u,h,p,f,a.descriptor.f),i(u,d),s(u,a.descriptor.v),(a.descriptor.t1||a.descriptor.t2||a.descriptor.o)&&t('The "intro", "outro" and "decorator" directives have no effect on components'),o(u)}}(l,P,Cr,kr,Lr,Ar,Or),_r=function(e){var t=function(t,n){e(this,t,n)};return t.prototype={firstNode:function(){return this.instance.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.instance.fragment.detach()},teardown:function(){var e;while(this.complexParameters.length)this.complexParameters.pop().teardown();while(this.observers.length)this.observers.pop().cancel();(e=this.root._liveComponentQueries[this.name])&&e._remove(this),this.instance.teardown()},toString:function(){return this.instance.fragment.toString()},find:function(e){return this.instance.fragment.find(e)},findAll:function(e,t){return this.instance.fragment.findAll(e,t)},findComponent:function(e){return!e||e===this.name?this.instance:null},findAllComponents:function(e,t){t._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(e,t)}},t}(Mr),Dr=function(e){var t=function(t,n){this.type=e.COMMENT,this.descriptor=t.descriptor,n&&(this.node=document.createComment(t.descriptor.f),n.appendChild(this.node))};return t.prototype={detach:function(){return this.node.parentNode.removeChild(this.node),this.node},teardown:function(e){e&&this.detach()},firstNode:function(){return this.node},toString:function(){return"<!--"+this.descriptor.f+"-->"}},t}(l),Pr=function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(e){e.pNode&&(this.docFrag=document.createDocumentFragment()),typeof e.descriptor=="string"?(this.html=e.descriptor,this.docFrag&&(this.nodes=r(this.html,e.pNode.tagName,this.docFrag))):n(this,e)};return p.prototype={detach:function(){var e,t;if(this.nodes){t=this.nodes.length;while(t--)this.docFrag.appendChild(this.nodes[t])}else if(this.items){e=this.items.length;for(t=0;t<e;t+=1)this.docFrag.appendChild(this.items[t].detach())}return this.docFrag},createItem:function(t){if(typeof t.descriptor=="string")return new i(t,this.docFrag);switch(t.descriptor.t){case e.INTERPOLATOR:return new s(t,this.docFrag);case e.SECTION:return new o(t,this.docFrag);case e.TRIPLE:return new u(t,this.docFrag);case e.ELEMENT:if(this.root.components[t.descriptor.e])return new l(t,this.docFrag);return new a(t,this.docFrag);case e.PARTIAL:return new f(t,this.docFrag);case e.COMMENT:return new c(t,this.docFrag);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/RactiveJS/Ractive/issues. Thanks!")}},teardown:function(e){var t;if(this.nodes&&e)while(t=this.nodes.pop())t.parentNode.removeChild(t);else if(this.items)while(this.items.length)this.items.pop().teardown(e);this.nodes=this.items=this.docFrag=null},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},findNextNode:function(e){var t=e.index;return this.items[t+1]?this.items[t+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},toString:function(){var e,t,n,r;if(this.html)return this.html;e="";if(!this.items)return e;n=this.items.length;for(t=0;t<n;t+=1)r=this.items[t],e+=r.toString();return e},find:function(e){var n,r,i,s,o;if(this.nodes){r=this.nodes.length;for(n=0;n<r;n+=1){s=this.nodes[n];if(s.nodeType!==1)continue;if(t(s,e))return s;if(o=s.querySelector(e))return o}return null}if(this.items){r=this.items.length;for(n=0;n<r;n+=1){i=this.items[n];if(i.find&&(o=i.find(e)))return o}return null}},findAll:function(e,n){var r,i,s,o,u,a,f;if(this.nodes){i=this.nodes.length;for(r=0;r<i;r+=1){o=this.nodes[r];if(o.nodeType!==1)continue;t(o,e)&&n.push(o);if(u=o.querySelectorAll(e)){a=u.length;for(f=0;f<a;f+=1)n.push(u[f])}}}else if(this.items){i=this.items.length;for(r=0;r<i;r+=1)s=this.items[r],s.findAll&&s.findAll(e,n)}return n},findComponent:function(e){var t,n,r,i;if(this.items){t=this.items.length;for(n=0;n<t;n+=1){r=this.items[n];if(r.findComponent&&(i=r.findComponent(e)))return i}return null}},findAllComponents:function(e,t){var n,r,i;if(this.items){r=this.items.length;for(n=0;n<r;n+=1)i=this.items[n],i.findAllComponents&&i.findAllComponents(e,t)}return t}},h.DomFragment=p,p}(l,G,lt,ct,ht,Nt,Mt,_t,xn,Tr,_r,Dr,Ot),Hr=function(e,t,n,r,i){return function(e,s){var o;if(!this._initing)throw new Error("You cannot call ractive.render() directly!");this._transitionManager=o=t(this,s),this.fragment=new i({descriptor:this.template,root:this,owner:this,pNode:e}),n(this),e&&e.appendChild(this.fragment.docFrag),r(this),this._transitionManager=null,o.ready(),this.rendered=!0}}(ft,m,d,v,Pr),Br=function(e){return function(){return e("renderHTML() has been deprecated and will be removed in a future version. Please use toHTML() instead"),this.toHTML()}}(P),jr=function(){return function(){return this.fragment.toString()}}(),Fr=function(e,t){return function(n){var r,i,s;this.fire("teardown"),s=this._transitionManager,this._transitionManager=i=e(this,n),this.fragment.teardown(!0);while(this._animations[0])this._animations[0].stop();for(r in this._cache)t(this,r);this._transitionManager=s,i.ready()}}(m,h),Ir=function(e){return function(t,n,r){var i;if(typeof n!="string"||!e(r)){if(t.debug)throw new Error("Bad arguments");return}i=t.get(n),i===undefined&&(i=0);if(!e(i)){if(t.debug)throw new Error("Cannot add to a non-numeric value");return}t.set(n,i+r)}}(H),qr=function(e){return function(t,n){e(this,t,n===undefined?1:n)}}(Ir),Rr=function(e){return function(t,n){e(this,t,n===undefined?-1:-n)}}(Ir),Ur=function(){return function(e){var t;if(typeof e!="string"){if(this.debug)throw new Error("Bad arguments");return}t=this.get(e),this.set(e,!t)}}(),zr=function(){return function(e,t){var n,r,i,s,o;return n={},i=0,r=function(e,r){var s,u,a;u=i,a=t.length;do{s=t.indexOf(e,u);if(s===-1)return o=!0,-1;u=s+1}while(n[s]&&u<a);return s===i&&(i+=1),s!==r&&(o=!0),n[s]=!0,s},s=e.map(r),s.unchanged=!o,s}}(),Wr=function(e){return function(n,r,i,s){var o,u;o=r.length;while(o--)u=r[o],u.type===e.REFERENCE?u.update():u.keypath===n&&u.type===e.SECTION&&!u.inverted&&u.docFrag?i[i.length]=u:s[s.length]=u}}(l),Xr=function(e,t,n,r,i,s,o,u,a,f){function c(e){return JSON.stringify(e)}function h(e){return l[e]||(l[e]=function(t){return t[e]}),l[e]}var l={};return function(l,p,d){var v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;v=this.get(l);if(!t(v)||!t(p))return this.set(l,p,d&&d.complete);b=v.length===p.length;if(d&&d.compare){if(d.compare===!0)y=c;else if(typeof d.compare=="string")y=h(d.compare);else{if(typeof d.compare!="function")throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)");y=d.compare}try{m=v.map(y),g=p.map(y)}catch(O){if(this.debug)throw O;e("Merge operation: comparison failed. Falling back to identity checking"),m=v,g=p}}else m=v,g=p;E=a(m,g),n(this,l),u(this,l,p);if(E.unchanged&&b)return;k=this._transitionManager,this._transitionManager=C=s(this,d&&d.complete),S=[],x=[];for(w=0;w<this._deps.length;w+=1){T=this._deps[w];if(!T)continue;N=T[l];if(N){f(l,N,S,x),r(this);while(S.length)S.pop().merge(E);while(x.length)x.pop().update()}}i(this),L=[],A=l.split(".");while(A.length)A.pop(),L[L.length]=A.join(".");o.multiple(this,L,!0),m.length!==g.length&&o(this,l+".length",!0),this._transitionManager=k,C.ready()}}(P,c,h,d,C,m,g,k,zr,Wr),Vr=function(){return function(){return this.fragment.detach()}}(),$r=function(e){return function(t,n){t=e(t),n=e(n)||null;if(!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),n),this.fragment.pNode=t}}(ft),Jr=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){return{get:e,set:t,update:n,updateModel:r,animate:i,on:s,off:o,observe:u,fire:a,find:f,findAll:l,findComponent:c,findAllComponents:h,renderHTML:d,toHTML:v,render:p,teardown:m,add:g,subtract:y,toggle:b,merge:w,detach:E,insert:S}}(E,L,A,M,I,q,R,J,K,Q,ot,ut,at,Hr,Br,jr,Fr,qr,Rr,Ur,Xr,Vr,$r),Kr=function(){return["partials","transitions","events","components","decorators","data"]}(),Qr=function(){return["el","template","complete","modifyArrays","magic","twoway","lazy","append","preserveWhitespace","sanitize","stripComments","noIntro","transitionsEnabled","adaptors"]}(),Gr=function(e,t,n){return function(r,i){e.forEach(function(e){i[e]&&(r[e]=n(i[e]))}),t.forEach(function(e){r[e]=i[e]})}}(Kr,Qr,n),Yr=function(){return function(e,t){return/_super/.test(e)?function(){var n=this._super,r;return this._super=t,r=e.apply(this,arguments),this._super=n,r}:e}}(),Zr=function(){return function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}}(),ei=function(e,t,n,r){var i,s;return i=e.concat(t),s={},i.forEach(function(e){s[e]=!0}),function(i,o){var u,a;e.forEach(function(e){var t=o[e];t&&(i[e]?r(i[e],t):i[e]=t)}),t.forEach(function(e){var t=o[e];t!==undefined&&(typeof t=="function"&&typeof i[e]=="function"?i[e]=n(t,i[e]):i[e]=o[e])});for(u in o)o.hasOwnProperty(u)&&!s[u]&&(a=o[u],typeof a=="function"&&typeof i.prototype[u]=="function"?i.prototype[u]=n(a,i.prototype[u]):i.prototype[u]=a)}}(Kr,Qr,Yr,Zr),ti=function(e,t){return function(n,r){e(n.template)&&(n.partials||(n.partials={}),t(n.partials,n.template.partials),r.partials&&t(n.partials,r.partials),n.template=n.template.main)}}(S,Zr),ni=function(e,t,n){return function(r){var i;if(typeof r.template=="string"){if(!n)throw new Error(e.missingParser);if(r.template.charAt(0)==="#"&&t){i=document.getElementById(r.template.substring(1));if(!i||i.tagName!=="SCRIPT")throw new Error("Could not find template element ("+r.template+")");r.template=n(i.innerHTML,r)}else r.template=n(r.template,r)}}}(Tn,s,Sr),ri=function(e,t){return function(n){var r;if(n.partials)for(r in n.partials)if(n.partials.hasOwnProperty(r)&&typeof n.partials[r]=="string"){if(!t)throw new Error(e.missingParser);n.partials[r]=t(n.partials[r],n)}}}(Tn,Sr),ii=function(){return function(e){var t={},n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}}(),si=function(){return function(e){var t,n,r=Array.prototype.slice.call(arguments,1);while(n=r.shift())for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}}(),oi=function(e,t,n,r,i,s,o,u,a,f,l){var c,h,p,d;return c=function(){return{}},h=function(){return[]},p=r(null),o(p,{preserveWhitespace:{enumerable:!0,value:!1},append:{enumerable:!0,value:!1},twoway:{enumerable:!0,value:!0},modifyArrays:{enumerable:!0,value:!0},data:{enumerable:!0,value:c},lazy:{enumerable:!0,value:!1},debug:{enumerable:!0,value:!1},transitions:{enumerable:!0,value:c},decorators:{enumerable:!0,value:c},events:{enumerable:!0,value:c},noIntro:{enumerable:!0,value:!1},transitionsEnabled:{enumerable:!0,value:!0},magic:{enumerable:!0,value:!1},adaptors:{enumerable:!0,value:h}}),d=["components","decorators","events","partials","transitions","data"],function(c,h){var v,m,g,y;for(v in p)h[v]===undefined&&(h[v]=typeof p[v]=="function"?p[v]():p[v]);o(c,{_initing:{value:!0,writable:!0},_guid:{value:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=Math.random()*16|0,n=e=="x"?t:t&3|8,n.toString(16)})},_subs:{value:r(null),configurable:!0},_cache:{value:{}},_cacheMap:{value:r(null)},_deps:{value:[]},_depsMap:{value:r(null)},_patternObservers:{value:[]},_pendingResolution:{value:[]},_deferred:{value:{}},_evaluators:{value:r(null)},_twowayBindings:{value:{}},_transitionManager:{value:null,writable:!0},_animations:{value:[]},nodes:{value:{}},_wrapped:{value:r(null)},_liveQueries:{value:[]},_liveComponentQueries:{value:[]}}),o(c._deferred,{attrs:{value:[]},evals:{value:[]},selectValues:{value:[]},checkboxes:{value:[]},radios:{value:[]},observers:{value:[]},transitions:{value:[]},liveQueries:{value:[]},decorators:{value:[]},focusable:{value:null,writable:!0}}),c.adaptors=h.adaptors,c.modifyArrays=h.modifyArrays,c.magic=h.magic,c.twoway=h.twoway,c.lazy=h.lazy,c.debug=h.debug;if(c.magic&&!f)throw new Error("Getters and setters (magic mode) are not supported in this browser");h._parent&&s(c,"_parent",{value:h._parent});if(h.el){c.el=u(h.el);if(!c.el&&c.debug)throw new Error("Could not find container element")}h.eventDefinitions&&(n("ractive.eventDefinitions has been deprecated in favour of ractive.events. Support will be removed in future versions"),h.events=h.eventDefinitions),d.forEach(function(e){c.constructor[e]?c[e]=i(r(c.constructor[e]||{}),h[e]):h[e]&&(c[e]=h[e])}),m=h.template;if(typeof m=="string"){if(!l)throw new Error(t.missingParser);if(m.charAt(0)==="#"&&e){g=document.getElementById(m.substring(1));if(!g)throw new Error("Could not find template element ("+m+")");y=l(g.innerHTML,h)}else y=l(m,h)}else y=m;a(y)&&(i(c.partials,y.partials),y=y.main),y&&y.length===1&&typeof y[0]=="string"&&(y=y[0]),c.template=y,i(c.partials,h.partials),c.parseOptions={preserveWhitespace:h.preserveWhitespace,sanitize:h.sanitize,stripComments:h.stripComments},c.transitionsEnabled=h.noIntro?!1:h.transitionsEnabled,e&&!c.el&&(c.el=document.createDocumentFragment()),c.el&&!h.append&&(c.el.innerHTML=""),c.render(c.el,h.complete),c.transitionsEnabled=h.transitionsEnabled,c._initing=!1}}(s,Tn,P,n,si,o,u,ft,S,b,Sr),ui=function(e,t,n,r,i){return function(e,n,s){t.forEach(function(e){var t=s[e],i=n[e];typeof t=="function"&&typeof i=="function"?s[e]=r(t,i):t===undefined&&i!==undefined&&(s[e]=i)}),e.beforeInit&&e.beforeInit(s),i(e,s),e.init&&e.init(s)}}(cn,Qr,ii,Yr,oi),ai=function(e,t,n,r,i,s,o,u){var a;return u.push(function(){a=u.Ractive}),function(u){var a=this,f;return f=function(e){o(this,f,e||{})},f.prototype=e(a.prototype),f.prototype.constructor=f,t(f,a),n(f,u),i(f),r(f,u),s(f),f.extend=a.extend,f}}(n,Gr,ei,ti,ni,ri,ui,Ot),fi=function(e,t,n,r,i,s,o,u,a,f,l){var c=function(e){f(this,e)};return n(c,{prototype:{value:r},partials:{value:i},adaptors:{value:s},easing:{value:o},transitions:{value:{}},events:{value:{}},components:{value:{}},decorators:{value:{}},svg:{value:e},VERSION:{value:"0.3.9"}}),c.eventDefinitions=c.events,c.prototype.constructor=c,c.delimiters=["{{","}}"],c.tripleDelimiters=["{{{","}}}"],c.extend=u,c.parse=a,l.Ractive=c,c}(t,n,u,Jr,Nn,f,F,ai,Sr,oi,Ot),li=function(e,t){typeof window!="undefined"&&window.Node&&!window.Node.prototype.contains&&window.HTMLElement&&window.HTMLElement.prototype.contains&&(window.Node.prototype.contains=window.HTMLElement.prototype.contains);while(t.length)t.pop()();return e}(fi,Ot);typeof module!="undefined"&&module.exports?module.exports=li:typeof define=="function"&&define.amd?define("ractive",[],function(){return li}):e.Ractive=li})(typeof window!="undefined"?window:this),function(){define("paths/path",[],function(){var e;return e=function(t){var n,r,i,s,o,u;return n=t||[],o=function(e,t){var n;return n=e.slice(0,e.length),n.push(t),n},s=function(e){var t,n;return t=e.command,n=e.params,""+t+" "+n.join(" ")},i=function(e,t){var n,r,i,s;n=e.command,r=e.params,i=t[0],s=t[1];switch(n){case"M":return[r[0],r[1]];case"L":return[r[0],r[1]];case"H":return[r[0],s];case"V":return[i,r[0]];case"Z":return null;case"C":return[r[4],r[5]];case"S":return[r[2],r[3]];case"Q":return[r[2],r[3]];case"T":return[r[0],r[1]];case"A":return[r[5],r[6]]}},u=function(e,t){return function(n){var r;return r=typeof n=="object"?e.map(function(e){return n[e]}):arguments,t.apply(null,r)}},r=function(t){return e(o(n,t))},{moveto:u(["x","y"],function(e,t){return r({command:"M",params:[e,t]})}),lineto:u(["x","y"],function(e,t){return r({command:"L",params:[e,t]})}),hlineto:u(["x"],function(e){return r({command:"H",params:[e]})}),vlineto:u(["y"],function(e){return r({command:"V",params:[e]})}),closepath:function(){return r({command:"Z",params:[]})},curveto:u(["x1","y1","x2","y2","x","y"],function(e,t,n,i,s,o){return r({command:"C",params:[e,t,n,i,s,o]})}),smoothcurveto:u(["x2","y2","x","y"],function(e,t,n,i){return r({command:"S",params:[e,t,n,i]})}),qcurveto:u(["x1","y1","x","y"],function(e,t,n,i){return r({command:"Q",params:[e,t,n,i]})}),smoothqcurveto:u(["x","y"],function(e,t){return r({command:"T",params:[e,t]})}),arc:u(["rx","ry","xrot","large_arc_flag","sweep_flag","x","y"],function(e,t,n,i,s,o,u){return r({command:"A",params:[e,t,n,i,s,o,u]})}),print:function(){return n.map(s).join(" ")},points:function(){var e,t,r,s,o,u;r=[],t=[0,0],s=function(){var n;n=i(e,t),t=n;if(n)return r.push(n)};for(o=0,u=n.length;o<u;o++)e=n[o],s();return r}}},function(){return e()}})}.call(this),function(){define("paths/ops",[],function(){var e,t,n,r,i,s,o,u,a,f,l;return a=function(e){return e.reduce(function(e,t){return e+t},0)},i=function(e){return e.reduce(function(e,t){return Math.min(e,t)})},r=function(e){return e.reduce(function(e,t){return Math.max(e,t)})},u=function(e,t){var n,r,i,s;return n=e[0],r=e[1],i=t[0],s=t[1],[n+i,r+s]},s=function(e,t){var n,r,i,s;return n=e[0],r=e[1],i=t[0],s=t[1],[n-i,r-s]},l=function(e,t){var n,r;return n=t[0],r=t[1],[e*n,e*r]},n=function(e){var t,n;return t=e[0],n=e[1],Math.sqrt(t*t+n*n)},f=function(e){return e.reduce(function(e,t){return u(e,t)},[0,0])},e=function(e){return l(1/e.length,e.reduce(u))},o=function(e,t){return l(e,[Math.sin(t),-Math.cos(t)])},t=function(e,t){var n,r,i;i=e||{};for(n in i)r=i[n],t[n]=r(t.index,t.item);return t},{sum:a,min:i,max:r,plus:u,minus:s,times:l,length:n,sum_vectors:f,average:e,on_circle:o,enhance:t}})}.call(this),function(){define("paths/bezier",["./path","./ops"],function(e,t){var n;return n=function(e,n){return t.minus(t.times(2,e),n)},function(r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;p=r.points,d=r.tension,d==null&&(d=.3),u=[],f=p.length;for(a=v=1,y=f-1;1<=y?v<=y:v>=y;a=1<=y?++v:--v)u.push(t.times(d,t.minus(p[a],p[a-1])));o=[t.plus(p[0],n(u[0],u[1]))];for(a=m=1,b=f-2;1<=b?m<=b:m>=b;a=1<=b?++m:--m)o.push(t.minus(p[a],t.average([u[a],u[a-1]])));return o.push(t.minus(p[f-1],n(u[f-2],u[f-3]))),i=o[0],s=o[1],l=p[0],c=p[1],h=(w=e()).moveto.apply(w,l).curveto(i[0],i[1],s[0],s[1],c[0],c[1]),{path:function(){S=[];for(var e=2,t=f-1;2<=t?e<=t:e>=t;2<=t?e++:e--)S.push(e);return S}.apply(this).reduce(function(e,t){var n,r;return n=o[t],r=p[t],e.smoothcurveto(n[0],n[1],r[0],r[1])},h),centroid:t.average(p)}}})}.call(this),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.10",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}d.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("")===0&&(i=i.substring(1)),t(i)}catch(s){r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!templates/logo.html",[],function(){return'<h1><a href=https://github.com/andreaferretti/paths-js>Paths.js</a></h1>\n\n<h3>Generate SVG paths for geometric shapes</h3>\n\n<svg width="800" height="100">\n  <g transform="translate(100, 0)">\n    {{# Bezier({points: points}) }}\n      <path on-click="shuffle" d="{{ path.print() }}" stroke="red" fill="none" />\n    {{/ end of bezier }}\n    {{# points }}\n      {{# name(.) }}\n        <circle on-click="shuffle" r="5" cx="{{ x }}" cy="{{ y }}" stroke="red" stroke-width="2" fill="white" />\n      {{/ end point }}\n    {{/ points }}\n  </g>\n</svg>\n'}),function(){define("views/logo",["ractive","paths/bezier","text!templates/logo.html"],function(e,t,n){var r,i,s,o;return o=[[0,50],[50,70],[100,40],[150,30],[200,60],[250,80],[300,50]],s=function(e){return e.map(function(e){var t,n;return t=e[0],n=e[1],[t,n-25+50*Math.random()]})},e.easing.elastic=function(e){return-1*Math.pow(4,-8*e)*Math.sin((e*6-1)*2*Math.PI/2)+1},i=new e({el:"#logo",template:n,data:{Bezier:t,points:o,name:function(e){var t,n;return t=e[0],n=e[1],{x:t,y:n}}}}),r=function(){return i.animate("points",o,{easing:"elastic"})},i.on("shuffle",function(e){return this.animate("points",s(o),{easing:"easeIn",complete:r})})})}.call(this),function(e){if(typeof bootstrap=="function")bootstrap("promise",e);else if(typeof exports=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define("q",e);else if(typeof ses!="undefined"){if(!ses.ok())return;ses.makeQ=e}else Q=e()}(function(){function i(e){var t=Function.call;return function(){return t.apply(e,arguments)}}function p(e){return h(e)==="[object StopIteration]"||e instanceof d}function m(e,t){t.stack&&typeof e=="object"&&e!==null&&e.stack&&e.stack.indexOf(v)===-1&&(e.stack=g(e.stack)+"\n"+v+"\n"+g(t.stack))}function g(e){var t=e.split("\n"),n=[];for(var r=0;r<t.length;++r){var i=t[r];!b(i)&&!y(i)&&n.push(i)}return n.join("\n")}function y(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function b(n){var r=/at .+ \((.*):(\d+):\d+\)/.exec(n);if(!r)return!1;var i=r[1],s=r[2];return i===t&&s>=e&&s<=pt}function w(){if(Error.captureStackTrace){var e,n,r=Error.prepareStackTrace;return Error.prepareStackTrace=function(t,r){e=r[1].getFileName(),n=r[1].getLineNumber()},(new Error).stack,Error.prepareStackTrace=r,t=e,n}}function E(e){return j(e)}function S(){function a(i){n=i,o(e,function(e,t){r(function(){i.promiseDispatch.apply(i,t)})},void 0),e=void 0,t=void 0}var e=[],t=[],n,i=f(S.prototype),u=f(T.prototype);return u.promiseDispatch=function(i,o,u){var a=s(arguments);e?(e.push(a),o==="when"&&u[1]&&t.push(u[1])):r(function(){n.promiseDispatch.apply(n,a)})},u.valueOf=function(){if(e)return u;var t=N(n);return C(t)&&(n=t),t},Error.captureStackTrace&&E.longStackJumpLimit>0&&(Error.captureStackTrace(u,S),u.stack=u.stack.substring(u.stack.indexOf("\n")+1)),i.promise=u,i.resolve=function(e){if(n)return;a(j(e))},i.fulfill=function(e){if(n)return;a(B(e))},i.reject=function(e){if(n)return;a(H(e))},i.notify=function(e){if(n)return;o(t,function(t,n){r(function(){n(e)})},void 0)},i}function x(e){if(typeof e!="function")throw new TypeError("resolver must be a function.");var t=S();return Q(e,t.resolve,t.reject,t.notify).fail(t.reject),t.promise}function T(e,t,n,r,i){t===void 0&&(t=function(e){return H(new Error("Promise does not support operation: "+e))});var s=f(T.prototype);return s.promiseDispatch=function(n,r,i){var o;try{e[r]?o=e[r].apply(s,i):o=t.call(s,r,i)}catch(u){o=H(u)}n&&n(o)},n&&(s.valueOf=n),i&&(s.exception=r),s}function N(e){return C(e)?e.valueOf():e}function C(e){return e&&typeof e.promiseDispatch=="function"}function k(e){return e&&typeof e.then=="function"}function L(e){return!A(e)&&!O(e)}function A(e){return!k(N(e))}function O(e){return e=N(e),C(e)&&"exception"in e}function P(){!D&&typeof window!="undefined"&&!window.Touch&&window.console&&console.warn("[Q] Unhandled rejection reasons (should be empty):",M),D=!0}function H(e){var t=T({when:function(t){if(t){var n=u(_,this);n!==-1&&(_.splice(n,1),M.splice(n,1))}return t?t(e):this}},function(){return H(e)},function n(){return this},e,!0);return P(),_.push(t),M.push(e),t}function B(e){return T({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return t===null||t===void 0?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return c(e)}},void 0,function t(){return e})}function j(e){return C(e)?e:(e=N(e),k(e)?F(e):B(e))}function F(e){var t=S();return r(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function I(e){return T({isDef:function(){}},function(n,r){return X(e,n,r)},function(){return N(e)})}function q(e,t,n,i){function u(e){try{return typeof t=="function"?t(e):e}catch(n){return H(n)}}function a(e){if(typeof n=="function"){m(e,l);try{return n(e)}catch(t){return H(t)}}return H(e)}function f(e){return typeof i=="function"?i(e):e}var s=S(),o=!1,l=j(e);return r(function(){l.promiseDispatch(function(e){if(o)return;o=!0,s.resolve(u(e))},"when",[function(e){if(o)return;o=!0,s.resolve(a(e))}])}),l.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=f(e)}catch(r){n=!0;if(!E.onerror)throw r;E.onerror(r)}n||s.notify(t)}]),s.promise}function R(e,t,n){return q(e,function(e){return Y(e).then(function(e){return t.apply(void 0,e)},n)},n)}function U(e){return function(){function t(e,t){var s;try{s=n[e](t)}catch(o){return p(o)?o.value:H(o)}return q(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"send"),i=t.bind(t,"throw");return r()}}function z(e){throw new d(e)}function W(e){return function(){return R([this,Y(arguments)],function(t,n){return e.apply(t,n)})}}function X(e,t,n){var i=S();return r(function(){j(e).promiseDispatch(i.resolve,t,n)}),i.promise}function V(e){return function(t){var n=s(arguments,1);return X(t,e,n)}}function J(e,t){var n=s(arguments,2);return $(e,t,n)}function K(e,t){return X(e,"apply",[void 0,t])}function Q(e){var t=s(arguments,1);return K(e,t)}function G(e){var t=s(arguments,1);return function(){var r=t.concat(s(arguments));return X(e,"apply",[this,r])}}function Y(e){return q(e,function(e){var t=0,n=S();return o(e,function(r,i,s){A(i)?e[s]=N(i):(++t,q(i,function(r){e[s]=r,--t===0&&n.resolve(e)},n.reject))},void 0),t===0&&n.resolve(e),n.promise})}function Z(e){return q(e,function(e){return e=a(e,j),q(Y(a(e,function(e){return q(e,n,n)})),function(){return e})})}function et(e,t){return q(e,void 0,t)}function tt(e,t){return q(e,void 0,void 0,t)}function nt(e,t){return q(e,function(e){return q(t(),function(){return e})},function(e){return q(t(),function(){return H(e)})})}function rt(e,t,n,i){var s=function(t){r(function(){m(t,e);if(!E.onerror)throw t;E.onerror(t)})},o=t||n||i?q(e,t,n,i):e;typeof process=="object"&&process&&process.domain&&(s=process.domain.bind(s)),et(o,s)}function it(e,t,n){var r=S(),i=setTimeout(function(){r.reject(new Error(n||"Timed out after "+t+" ms"))},t);return q(e,function(e){clearTimeout(i),r.resolve(e)},function(e){clearTimeout(i),r.reject(e)},r.notify),r.promise}function st(e,t){t===void 0&&(t=e,e=void 0);var n=S();return q(e,undefined,undefined,n.notify),setTimeout(function(){n.resolve(e)},t),n.promise}function ot(e,t){var n=s(t),r=S();return n.push(r.makeNodeResolver()),K(e,n).fail(r.reject),r.promise}function ut(e){var t=s(arguments,1),n=S();return t.push(n.makeNodeResolver()),K(e,t).fail(n.reject),n.promise}function at(e){var t=s(arguments,1);return function(){var n=t.concat(s(arguments)),r=S();return n.push(r.makeNodeResolver()),K(e,n).fail(r.reject),r.promise}}function ft(e,t){var n=s(arguments,2);return function(){function o(){return e.apply(t,arguments)}var r=n.concat(s(arguments)),i=S();return r.push(i.makeNodeResolver()),K(o,r).fail(i.reject),i.promise}}function lt(e,t,n){var r=s(n||[]),i=S();return r.push(i.makeNodeResolver()),$(e,t,r).fail(i.reject),i.promise}function ct(e,t){var n=s(arguments,2),r=S();return n.push(r.makeNodeResolver()),$(e,t,n).fail(r.reject),r.promise}function ht(e,t){if(!t)return e;e.then(function(e){r(function(){t(null,e)})},function(e){r(function(){t(e)})})}var e=w(),t,n=function(){},r;typeof setImmediate=="function"?typeof window!="undefined"?r=setImmediate.bind(window):r=setImmediate:typeof process!="undefined"&&process.nextTick?r=process.nextTick:function(){function a(){--i;if(++o>=n){o=0,n*=4;var t=s&&Math.min(s-1,n);while(i<t)++i,u()}while(s){--s,e=e.next;var r=e.task;e.task=void 0,r()}o=0}var e={task:void 0,next:null},t=e,n=2,i=0,s=0,o=0,u=void 0;r=function(e){t=t.next={task:e,next:null},i<++s&&i<n&&(++i,u())};if(typeof MessageChannel!="undefined"){var f=new MessageChannel;f.port1.onmessage=a,u=function(){f.port2.postMessage(0)}}else u=function(){setTimeout(a,0)}}();var s=i(Array.prototype.slice),o=i(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),u=i(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),a=i(Array.prototype.map||function(e,t){var n=this,r=[];return o(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),f=Object.create||function(e){function t(){}return t.prototype=e,new t},l=i(Object.prototype.hasOwnProperty),c=Object.keys||function(e){var t=[];for(var n in e)l(e,n)&&t.push(n);return t},h=i(Object.prototype.toString),d;typeof ReturnValue!="undefined"?d=ReturnValue:d=function(e){this.value=e},E.longStackJumpLimit=1;var v="From previous event:";E.nextTick=r,E.defer=S,S.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(s(arguments,1)):e.resolve(n)}},E.promise=x,E.makePromise=T,T.prototype.then=function(e,t,n){return q(this,e,t,n)},T.prototype.thenResolve=function(e){return q(this,function(){return e})},T.prototype.thenReject=function(e){return q(this,function(){throw e})},o(["isFulfilled","isRejected","isPending","dispatch","when","spread","get","set","del","delete","post","send","invoke","keys","fapply","fcall","fbind","all","allResolved","timeout","delay","catch","finally","fail","fin","progress","done","nfcall","nfapply","nfbind","denodeify","nbind","npost","nsend","ninvoke","nodeify"],function(e,t){T.prototype[t]=function(){return E[t].apply(E,[this].concat(s(arguments)))}},void 0),T.prototype.toSource=function(){return this.toString()},T.prototype.toString=function(){return"[object Promise]"},E.nearer=N,E.isPromise=C,E.isPromiseAlike=k,E.isPending=L,E.isFulfilled=A,E.isRejected=O;var M=E.unhandledReasons=[],_=[],D=!1;typeof process!="undefined"&&process.on&&process.on("exit",function(){for(var e=0;e<M.length;e++){var t=M[e];t&&typeof t.stack!="undefined"?console.warn("Unhandled rejection reason:",t.stack):console.warn("Unhandled rejection reason (no stack):",t)}}),E.reject=H,E.fulfill=B,E.resolve=j,E.master=I,E.when=q,E.spread=R,E.async=U,E["return"]=z,E.promised=W,E.dispatch=X,E.dispatcher=V,E.get=V("get"),E.set=V("set"),E["delete"]=E.del=V("delete");var $=E.post=V("post");E.send=J,E.invoke=J,E.fapply=K,E["try"]=Q,E.fcall=Q,E.fbind=G,E.keys=V("keys"),E.all=Y,E.allResolved=Z,E["catch"]=E.fail=et,E.progress=tt,E["finally"]=E.fin=nt,E.done=rt,E.timeout=it,E.delay=st,E.nfapply=ot,E.nfcall=ut,E.nfbind=at,E.denodeify=E.nfbind,E.nbind=ft,E.npost=lt,E.nsend=ct,E.ninvoke=E.nsend,E.nodeify=ht;var pt=w();return E}),function(e){typeof module!="undefined"&&typeof module.exports=="object"?module.exports=e(require("q")):typeof define=="function"&&define.amd?define("pajamas",["q"],e):this.pj=e(this.Q)}(function(Q){var win=window,doc=document,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,readyState="readyState",xmlHttpRequest="XMLHttpRequest",xhr=win[xmlHttpRequest]?function(){return new win[xmlHttpRequest]}:function(){return new win.ActiveXObject("Microsoft.XMLHTTP")},corsSupported="withCredentials"in xhr(),contentType="Content-Type",requestedWith="X-Requested-With",defaultHeaders={contentType:"application/x-www-form-urlencoded; charset=UTF-8",Accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},requestedWith:xmlHttpRequest},hasOwn=function(e,t){return e.hasOwnProperty(t)},isArray=Array.isArray||function(e){return e instanceof Array},isFunction=typeof /-/!="function"?function(e){return typeof e=="function"}:function(e){return Object.prototype.toString.call(e)==="[object Function]"},isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},defaults=function(e,t){var n;for(n in t)!hasOwn(e,n)&&hasOwn(t,n)&&(e[n]=t[n]);return e},inferDataType=function(e){var t=e.substr(e.lastIndexOf(".")+1);return t===e?"json":t==="js"?"script":t==="txt"?"text":t},urlAppend=function(e,t){return typeof t!="string"?e:e+(e.indexOf("?")!==-1?"&":"?")+t},setHeaders=function(e,t){var n=t.headers||{},r="Accept",i;hasOwn(n,r)?n[r]||delete n[r]:n[r]=defaultHeaders[r][t.dataType]||defaultHeaders[r]["*"],hasOwn(n,requestedWith)?n[requestedWith]||delete n[requestedWith]:t.crossDomain||(n[requestedWith]=defaultHeaders.requestedWith),hasOwn(n,contentType)?n[contentType]||delete n[contentType]:n[contentType]=t.contentType||defaultHeaders.contentType;for(i in n)hasOwn(n,i)&&e.setRequestHeader(i,n[i])},makeResolution=function(e,t,n){return n?{response:t,status:e.status,xhr:e}:t},responseParsers={json:function(){var r=this.responseText;try{return win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){throw new Error("Could not parse JSON in response.")}},script:function(){return eval(this.responseText)},text:function(){return String(this.responseText)},html:function(){return this.responseText},xml:function(){var e=this.responseXML;return e===null||e.documentElement===null||e.documentElement.nodeName==="parsererror"?null:e}},isCrossDomain=function(e,t){var n=rurl.exec(e),r=rurl.exec(t);return!(!n||n[1]===r[1]&&n[2]===r[2]&&(n[3]||(n[1]==="http:"?80:443))===(r[3]||(r[1]==="http:"?80:443)))},sendLocal=function(e,t){var n=isFunction(e.xhr)?e.xhr():xhr(),r,i=function(){try{n.send(e.data)}catch(r){r.xhr=n,t.reject(r)}};n.open(e.type,e.url,!0),setHeaders(n,e),n.onreadystatechange=function(){var i,s,u;r&&clearTimeout(r);if(n&&n[readyState]===4){i=n.status;if(i>=200&&i<300||i===304||i===0&&n.responseText!=="")if(n.responseText)try{s=responseParsers[e.dataType],t.resolve(makeResolution(n,s?s.call(n):n,e.verboseResolution))}catch(a){a.xhr=n,t.reject(a)}else t.resolve(makeResolution(n,null,e.verboseResolution));else u=new Error(e.type+" "+e.url+": "+n.status+" "+n.statusText),u.type=e.type,u.url=e.url,u.status=n.status,u.statusText=n.statusText,u.xhr=n,t.reject(u)}},isNumeric(e.timeout)&&(r=setTimeout(function(){var e=new Error("timeout");e.xhr=n,n.abort(),t.reject(e)},e.timeout)),isNumeric(e.delay)?setTimeout(function(){i()},e.delay):i()},sendRemote=function(e,t){var n=document.head||document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("script"),i,s,o,u=function(){r&&n.appendChild(r)};r.async="async",e.dataType==="jsonp"?(i=e.jsonp||"pajamas"+Math.floor(Math.random()*1e3)+(Date.now||function(){return(new Date).getTime()}).call(),s=function(e){window[i]=undefined;try{delete window[i]}catch(n){}t.resolve(e)},window[i]=s,e.url+=(e.url.indexOf("?")>-1?"&":"?")+(e.jsonp||"callback")+"="+i,r.src=e.url):r.src=e.url,r.onload=r.onreadystatechange=function(i,s){if(s||!r.readyState||/loaded|complete/.test(r.readyState))r.onload=r.onreadystatechange=null,n&&r.parentNode&&n.removeChild(r),r=undefined,o&&clearTimeout(o),s?t.reject(new Error(e.url+" aborted")):e.dataType!=="jsonp"&&t.resolve()},r.onerror=function(){t.reject(new Error("Error loading "+e.url))},isNumeric(e.timeout)&&(o=setTimeout(function(){r.onload(0,1),t.reject(new Error("timeout"))},e.timeout)),isNumeric(e.delay)?setTimeout(function(){u()},e.delay):u()},pajamas=function(e){var t=Q.defer(),n=t.promise,r=e==null?{}:defaults({},e),i=function(){var e;try{return location.href}catch(t){return e=doc.createElement("a"),e.href="",e.href}}();return r.type=r.type?r.type.toUpperCase():"GET",r.url||(r.url=i),r.data=r.data&&r.processData!==!1&&typeof r.data!="string"?pajamas.param(r.data):r.data||null,r.dataType||(r.dataType=inferDataType(r.url)),r.crossDomain!=null||(r.crossDomain=isCrossDomain(r.url,i)),r.data&&typeof r.data=="string"&&r.type==="GET"&&(r.url=urlAppend(r.url,r.data),r.data=null),r.dataType==="jsonp"||r.dataType==="script"&&r.crossDomain||r.crossDomain&&!corsSupported?sendRemote(r,t):sendLocal(r,t),n.then(function(e){var t=r.success&&r.success(e);return t||e},function(e){var t;if(isNumeric(r.retry)&&r.retry>0)return r.retry--,pajamas(r);if(r.retry===Object(r.retry))return pajamas(r.retry);t=r.error&&r.error(e);if(t)return t;throw e})};return pajamas.partial=function(e){return function(t){var n=defaults({},e);return pajamas(defaults(n,t||{}))}},pajamas.param=function(e){var t,n=[],r=function(e,t){var r=encodeURIComponent;t=isFunction(t)?t():t==null?"":t,n.push(r(e)+"="+r(t))},i=function(e,t){var n,s,o;if(isArray(t))for(s=0;s<t.length;s++)o=t[s],/\[\]$/.test(e)?r(e,o):i(e+"["+(typeof o=="object"?s:"")+"]",o);else if(t&&typeof t=="object")for(n in t)hasOwn(t,n)&&i(e+"["+n+"]",t[n]);else r(e,t)};if(isArray(e))for(t=0;t<e.length;t++)r(e[t].name,e[t].value);else for(t in e)hasOwn(e,t)&&i(t,e[t]);return n.join("&").replace(/%20/g,"+")},pajamas.val=function(e){var t;if(e.nodeName.toLowerCase()==="select")t=function(){var t,n=[],r=e.selectedIndex,i,s=e.options,o=e.type==="select-one",u,a;if(r<0)return null;u=o?r:0,a=o?r+1:s.length;for(;u<a;u++){i=s[u];if(i.selected&&!i.disabled&&(!i.parentNode.disabled||i.parentNode.nodeName.toLowerCase()!=="optgroup")){t=pajamas.val(i);if(o)return t;n.push(t)}}return n}();else{if(e.nodeName.toLowerCase()==="option")return t=e.attributes.value,!t||t.specified?e.value:e.text;if(e.type==="button"||e.nodeName.toLowerCase()==="button")return t=e.getAttributeNode("value"),t?t.value:undefined;if(e.type==="radio"||e.type==="checkbox")return e.getAttribute("value")===null?"on":e.value;t=e.value}return typeof t=="string"?t.replace(/\r/g,""):t==null?"":t},pajamas.serializeArray=function(){var e=[],t,n,r=/\r?\n/g,i=/radio|checkbox/i,s=function(t){var n,s,o,u;for(o=0;o<t.length;o++){n=t[o];if(n.name&&!n.disabled&&(i.test(n.type)?n.checked:!0)){s=pajamas.val(n);if(s!=null)if(isArray(s))for(u=0;u<s.length;u++)e.push({name:n.name,value:s[u].replace(r,"\r\n")});else e.push({name:n.name,value:s.replace(r,"\r\n")})}}};for(t=0;t<arguments.length;t++)n=arguments[t],n.elements?s(n.elements):s([n]);return e},pajamas.serialize=function(){return pajamas.param(pajamas.serializeArray.apply(null,arguments))},pajamas}),function(){define("git_source",["pajamas"],function(e){var t;return t="https://api.github.com/repos/andreaferretti/paths-js-demo/contents",function(n){return e({url:""+t+"/"+n,dataType:"json"}).then(function(e){return atob(e.content)})}})}.call(this),define("text!templates/overlay.html",[],function(){return'{{# visible }}\n  <div class="modal">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" on-click="close" aria-hidden="true">&times;</button>\n          <h4 class="modal-title">{{ title }}</h4>\n        </div>\n        <div class="modal-body">\n          <pre>{{{ body }}}</pre>\n        </div>\n        <div class="modal-footer">\n          <button type="button" class="btn btn-default" on-click="close">Close</button>\n        </div>\n      </div>\n    </div>\n  </div>\n{{/ visible }}'}),function(){define("views/overlay",["ractive","git_source","text!templates/overlay.html"],function(e,t,n){var r;return r=new e({el:"#overlay",template:n,data:{visible:!1,title:null,body:null}}),r.on("close",function(){return this.set({visible:!1,title:null,body:null})}),function(e){var n,i,s;return s=e.title,n=e.lang,i=e.path,t(i).then(function(e){return r.set({visible:!0,title:s,body:hljs.highlight(n,e).value})})}})}.call(this),function(){define("show_source",["views/overlay"],function(e){return function(t,n){return n.on("coffee",function(){return e({lang:"coffeescript",title:"Coffeescript",path:"src/coffee/views/"+t+".coffee"})}),n.on("html",function(){return e({lang:"html",title:"HTML",path:"app/templates/"+t+".html"})})}})}.call(this),function(){define("palette/colors",[],function(){var e,t,n,r,i,s,o;return t=function(e){return Math.min(255,Math.floor(e))},s=function(e){return function(n){return{r:t(e*n.r),g:t(e*n.g),b:t(e*n.b)}}},e=function(e,n){return{r:t((e.r+n.r)/2),g:t((e.g+n.g)/2),b:t((e.b+n.b)/2)}},r=s(1.2),n=s(.8),i=function(t,i){var s;return s=e(t,i),[r(t),t,n(t),r(s),s,n(s),r(i),i,n(i)]},o=function(e){return"rgb("+Math.floor(e.r)+","+Math.floor(e.g)+","+Math.floor(e.b)+")"},{multiply:s,average:e,lighten:r,darken:n,mix:i,string:o}})}.call(this),function(){define("palette/util",[],function(){return{palette_to_function:function(e){return function(t){return e[t%e.length]}}}})}.call(this),function(){define("paths/linear",[],function(){return function(e,t){var n,r,i,s;return n=e[0],r=e[1],i=t[0],s=t[1],function(e){return i+(s-i)*(e-n)/(r-n)}}})}.call(this),function(){var e=[].slice;define("paths/sector",["./path","./ops"],function(t,n){return function(r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;return a=r.center,v=r.r,i=r.R,m=r.start,c=r.end,s=n.plus(a,n.on_circle(i,m)),o=n.plus(a,n.on_circle(i,c)),u=n.plus(a,n.on_circle(v,c)),l=n.plus(a,n.on_circle(v,m)),d=(g=(y=(b=(w=t()).moveto.apply(w,s)).arc.apply(b,[i,i,0,0,1].concat(e.call(o)))).lineto.apply(y,u)).arc.apply(g,[v,v,0,0,0].concat(e.call(l))).closepath(),h=(m+c)/2,p=(v+i)/2,f=n.plus(a,n.on_circle(p,h)),{path:d,centroid:f}}})}.call(this),function(){define("paths/pie",["./linear","./ops","./sector"],function(e,t,n){return function(r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;f=r.data,s=r.accessor,o=r.center,h=r.r,i=r.R,u=r.compute,g=function(){var e,t,n;n=[];for(e=0,t=f.length;e<t;e++)c=f[e],n.push(s(c));return n}(),p=t.sum(g),d=e([0,p],[0,2*Math.PI]),a=[],v=0;for(l=y=0,b=f.length;y<b;l=++y)c=f[l],m=g[l],a.push(t.enhance(u,{item:c,index:l,sector:n({center:o,r:h,R:i,start:d(v),end:d(v+m)})})),v+=m;return{curves:a}}})}.call(this),define("text!templates/pie.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h2 class="panel-title">Pie Chart</h2>\n    <span class="links">\n      <a on-click="coffee">Coffescript</a>\n      <a on-click="html">HTML</a>\n    </span>\n  </div>\n\n  <div class="panel-body">\n    <p class="alert alert-info">Here is a pie chart example. Sectors are clickable.</p>\n\n    <svg width=375 height=400>\n      <g transform="translate(200, 200)">\n        {{# Pie({center: center, r: r, R: R, data: data, accessor: accessor}) }}\n          {{# curves:num }}\n            <g transform="translate({{ move(sector.centroid, expanded[num]) }})">\n              <linearGradient id = "grad-{{ num }}">\n                <stop stop-color = "{{ color_string(colors(index)) }}" offset = "0%"/>\n                <stop stop-color = "{{ lighten(colors(index)) }}" offset = "100%"/>\n              </linearGradient>\n              <path on-click="expand" d="{{ sector.path.print() }}" fill="url(#grad-{{ num }})" />\n              <text text-anchor="middle" transform="translate({{ point(sector.centroid) }})">{{ item.name }}</text>\n            </g>\n          {{/ curves }}\n        {{/ end of pie }}\n      </g>\n    </svg>\n\n    {{# data: num }}\n      {{# expanded[num] == 1}}\n        <div class="country-info">\n          <h4>{{ name }}</h4>\n          <p>Population: <span class="label label-info">{{ population }}</span></p>\n        </div>\n      {{/ end if }}\n    {{/ data }}\n  </div>\n</div>'}),function(){define("views/pie",["ractive","show_source","palette/colors","palette/util","paths/pie","text!templates/pie.html"],function(e,t,n,r,i,s){var o,u,a;return o=[{name:"Italy",population:59859996},{name:"Mexico",population:118395054},{name:"France",population:65806e3},{name:"Argentina",population:40117096},{name:"Japan",population:12729e4}],u=n.mix({r:130,g:140,b:210},{r:180,g:205,b:150}),a=new e({el:"#pie",template:s,data:{Pie:i,center:[0,0],r:60,R:140,data:o,accessor:function(e){return e.population},colors:r.palette_to_function(u),expanded:[0,0,0,0,0],move:function(e,t){var n,r,i;return r=e[0],i=e[1],n=t||0,""+n*r/3+", "+n*i/3},point:function(e){var t,n;return t=e[0],n=e[1],""+t+", "+n},lighten:function(e){return n.string(n.lighten(e))},color_string:n.string}}),a.on("expand",function(e){var t,n;return t=e.index.num,n=[0,0,0,0,0],n[t]=1,this.animate("expanded",n,{easing:"easeOut"})}),t("pie",a)})}.call(this),function(){define("paths/polygon",["./path","./ops"],function(e,t){return function(n){var r,i,s,o,u,a,f;return u=n.points,r=n.closed,s=u.length,i=u[0],a=u.slice(1,+s+1||9e9),o=a.reduce(function(e,t){return e.lineto.apply(e,t)},(f=e()).moveto.apply(f,i)),{path:r?o.closepath():o,centroid:t.average(u)}}})}.call(this),function(){define("paths/line-chart-comp",["./linear","./ops"],function(e,t){var n;return n=function(e,n){var r,i,s,o,u;return s=function(){var t,i,s;s=[];for(t=0,i=e.length;t<i;t++)r=e[t],s.push(n(r));return s}(),o=s.sort(function(e,t){var n,r,i,s;return n=e[0],r=e[1],i=t[0],s=t[1],n-i}),u=o.map(function(e){return e[1]}),i=o.length,{points:o,xmin:o[0][0],xmax:o[i-1][0],ymin:t.min(u),ymax:t.max(u)}},function(r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;return u=r.data,p=r.xaccessor,g=r.yaccessor,h=r.width,l=r.height,o=r.closed,p==null&&(p=function(e){var t,n;return t=e[0],n=e[1],t}),g==null&&(g=function(e){var t,n;return t=e[0],n=e[1],n}),f=function(e){return[p(e),g(e)]},i=function(){var e,t,r;r=[];for(e=0,t=u.length;e<t;e++)a=u[e],r.push(n(a,f));return r}(),v=t.min(i.map(function(e){return e.xmin})),d=t.max(i.map(function(e){return e.xmax})),b=t.min(i.map(function(e){return e.ymin})),y=t.max(i.map(function(e){return e.ymax})),o&&(b=Math.min(b,0),y=Math.max(y,0)),s=o?0:b,m=e([v,d],[0,h]),w=e([b,y],[l,0]),c=function(e){var t,n;return t=e[0],n=e[1],[m(t),w(n)]},{arranged:i,scale:c,xscale:m,yscale:w,base:s}}})}.call(this),function(){define("paths/stock",["./polygon","./line-chart-comp","./ops"],function(e,t,n){return function(r){var i,s,o,u,a,f,l,c;return c=t(r),i=c.arranged,a=c.scale,f=c.xscale,l=c.yscale,s=c.base,o=-1,u=i.map(function(t){var i,u,f,l,c;return i=t.points,c=t.xmin,l=t.xmax,u=i.map(a),i.push([l,s]),i.push([c,s]),f=i.map(a),o+=1,n.enhance(r.compute,{item:r.data[o],line:e({points:u,closed:!1}),area:e({points:f,closed:!0}),index:o})}),{curves:u,xscale:f,yscale:l}}})}.call(this),define("json",["text"],function(text){function cacheBust(e){return e=e.replace(CACHE_BUST_FLAG,""),e+=e.indexOf("?")<0?"?":"&",e+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",jsonParse=typeof JSON!="undefined"&&typeof JSON.parse=="function"?JSON.parse:function(val){return eval("("+val+")")},buildMap={};return{load:function(e,t,n,r){!r.isBuild||r.inlineJSON!==!1&&e.indexOf(CACHE_BUST_QUERY_PARAM+"=")===-1?text.get(t.toUrl(e),function(t){r.isBuild?(buildMap[e]=t,n(t)):n(jsonParse(t))},n.error,{accept:"application/json"}):n(null)},normalize:function(e,t){return e.indexOf(CACHE_BUST_FLAG)===-1?e:cacheBust(e)},write:function(e,t,n){if(t in buildMap){var r=buildMap[t];n('define("'+e+"!"+t+'", function(){ return '+r+";});\n")}}}}),define("json!data/stock.json",function(){return{MSFT:[{date:"Jan 2000",value:39.81},{date:"Feb 2000",value:36.35},{date:"Mar 2000",value:43.22},{date:"Apr 2000",value:28.37},{date:"May 2000",value:25.45},{date:"Jun 2000",value:32.54},{date:"Jul 2000",value:28.4},{date:"Aug 2000",value:28.4},{date:"Sep 2000",value:24.53},{date:"Oct 2000",value:28.02},{date:"Nov 2000",value:23.34},{date:"Dec 2000",value:17.65},{date:"Jan 2001",value:24.84},{date:"Feb 2001",value:24},{date:"Mar 2001",value:22.25},{date:"Apr 2001",value:27.56},{date:"May 2001",value:28.14},{date:"Jun 2001",value:29.7},{date:"Jul 2001",value:26.93},{date:"Aug 2001",value:23.21},{date:"Sep 2001",value:20.82},{date:"Oct 2001",value:23.65},{date:"Nov 2001",value:26.12},{date:"Dec 2001",value:26.95},{date:"Jan 2002",value:25.92},{date:"Feb 2002",value:23.73},{date:"Mar 2002",value:24.53},{date:"Apr 2002",value:21.26},{date:"May 2002",value:20.71},{date:"Jun 2002",value:22.25},{date:"Jul 2002",value:19.52},{date:"Aug 2002",value:19.97},{date:"Sep 2002",value:17.79},{date:"Oct 2002",value:21.75},{date:"Nov 2002",value:23.46},{date:"Dec 2002",value:21.03},{date:"Jan 2003",value:19.31},{date:"Feb 2003",value:19.34},{date:"Mar 2003",value:19.76},{date:"Apr 2003",value:20.87},{date:"May 2003",value:20.09},{date:"Jun 2003",value:20.93},{date:"Jul 2003",value:21.56},{date:"Aug 2003",value:21.65},{date:"Sep 2003",value:22.69},{date:"Oct 2003",value:21.45},{date:"Nov 2003",value:21.1},{date:"Dec 2003",value:22.46},{date:"Jan 2004",value:22.69},{date:"Feb 2004",value:21.77},{date:"Mar 2004",value:20.46},{date:"Apr 2004",value:21.45},{date:"May 2004",value:21.53},{date:"Jun 2004",value:23.44},{date:"Jul 2004",value:23.38},{date:"Aug 2004",value:22.47},{date:"Sep 2004",value:22.76},{date:"Oct 2004",value:23.02},{date:"Nov 2004",value:24.6},{date:"Dec 2004",value:24.52},{date:"Jan 2005",value:24.11},{date:"Feb 2005",value:23.15},{date:"Mar 2005",value:22.24},{date:"Apr 2005",value:23.28},{date:"May 2005",value:23.82},{date:"Jun 2005",value:22.93},{date:"Jul 2005",value:23.64},{date:"Aug 2005",value:25.35},{date:"Sep 2005",value:23.83},{date:"Oct 2005",value:23.8},{date:"Nov 2005",value:25.71},{date:"Dec 2005",value:24.29},{date:"Jan 2006",value:26.14},{date:"Feb 2006",value:25.04},{date:"Mar 2006",value:25.36},{date:"Apr 2006",value:22.5},{date:"May 2006",value:21.19},{date:"Jun 2006",value:21.8},{date:"Jul 2006",value:22.51},{date:"Aug 2006",value:24.13},{date:"Sep 2006",value:25.68},{date:"Oct 2006",value:26.96},{date:"Nov 2006",value:27.66},{date:"Dec 2006",value:28.13},{date:"Jan 2007",value:29.07},{date:"Feb 2007",value:26.63},{date:"Mar 2007",value:26.35},{date:"Apr 2007",value:28.3},{date:"May 2007",value:29.11},{date:"Jun 2007",value:27.95},{date:"Jul 2007",value:27.5},{date:"Aug 2007",value:27.34},{date:"Sep 2007",value:28.04},{date:"Oct 2007",value:35.03},{date:"Nov 2007",value:32.09},{date:"Dec 2007",value:34},{date:"Jan 2008",value:31.13},{date:"Feb 2008",value:26.07},{date:"Mar 2008",value:27.21},{date:"Apr 2008",value:27.34},{date:"May 2008",value:27.25},{date:"Jun 2008",value:26.47},{date:"Jul 2008",value:24.75},{date:"Aug 2008",value:26.36},{date:"Sep 2008",value:25.78},{date:"Oct 2008",value:21.57},{date:"Nov 2008",value:19.66},{date:"Dec 2008",value:18.91},{date:"Jan 2009",value:16.63},{date:"Feb 2009",value:15.81},{date:"Mar 2009",value:17.99},{date:"Apr 2009",value:19.84},{date:"May 2009",value:20.59},{date:"Jun 2009",value:23.42},{date:"Jul 2009",value:23.18},{date:"Aug 2009",value:24.43},{date:"Sep 2009",value:25.49},{date:"Oct 2009",value:27.48},{date:"Nov 2009",value:29.27},{date:"Dec 2009",value:30.34},{date:"Jan 2010",value:28.05},{date:"Feb 2010",value:28.67},{date:"Mar 2010",value:28.8}],AAPL:[{date:"Jan 2000",value:25.94},{date:"Feb 2000",value:28.66},{date:"Mar 2000",value:33.95},{date:"Apr 2000",value:31.01},{date:"May 2000",value:21},{date:"Jun 2000",value:26.19},{date:"Jul 2000",value:25.41},{date:"Aug 2000",value:30.47},{date:"Sep 2000",value:12.88},{date:"Oct 2000",value:9.78},{date:"Nov 2000",value:8.25},{date:"Dec 2000",value:7.44},{date:"Jan 2001",value:10.81},{date:"Feb 2001",value:9.12},{date:"Mar 2001",value:11.03},{date:"Apr 2001",value:12.74},{date:"May 2001",value:9.98},{date:"Jun 2001",value:11.62},{date:"Jul 2001",value:9.4},{date:"Aug 2001",value:9.27},{date:"Sep 2001",value:7.76},{date:"Oct 2001",value:8.78},{date:"Nov 2001",value:10.65},{date:"Dec 2001",value:10.95},{date:"Jan 2002",value:12.36},{date:"Feb 2002",value:10.85},{date:"Mar 2002",value:11.84},{date:"Apr 2002",value:12.14},{date:"May 2002",value:11.65},{date:"Jun 2002",value:8.86},{date:"Jul 2002",value:7.63},{date:"Aug 2002",value:7.38},{date:"Sep 2002",value:7.25},{date:"Oct 2002",value:8.03},{date:"Nov 2002",value:7.75},{date:"Dec 2002",value:7.16},{date:"Jan 2003",value:7.18},{date:"Feb 2003",value:7.51},{date:"Mar 2003",value:7.07},{date:"Apr 2003",value:7.11},{date:"May 2003",value:8.98},{date:"Jun 2003",value:9.53},{date:"Jul 2003",value:10.54},{date:"Aug 2003",value:11.31},{date:"Sep 2003",value:10.36},{date:"Oct 2003",value:11.44},{date:"Nov 2003",value:10.45},{date:"Dec 2003",value:10.69},{date:"Jan 2004",value:11.28},{date:"Feb 2004",value:11.96},{date:"Mar 2004",value:13.52},{date:"Apr 2004",value:12.89},{date:"May 2004",value:14.03},{date:"Jun 2004",value:16.27},{date:"Jul 2004",value:16.17},{date:"Aug 2004",value:17.25},{date:"Sep 2004",value:19.38},{date:"Oct 2004",value:26.2},{date:"Nov 2004",value:33.53},{date:"Dec 2004",value:32.2},{date:"Jan 2005",value:38.45},{date:"Feb 2005",value:44.86},{date:"Mar 2005",value:41.67},{date:"Apr 2005",value:36.06},{date:"May 2005",value:39.76},{date:"Jun 2005",value:36.81},{date:"Jul 2005",value:42.65},{date:"Aug 2005",value:46.89},{date:"Sep 2005",value:53.61},{date:"Oct 2005",value:57.59},{date:"Nov 2005",value:67.82},{date:"Dec 2005",value:71.89},{date:"Jan 2006",value:75.51},{date:"Feb 2006",value:68.49},{date:"Mar 2006",value:62.72},{date:"Apr 2006",value:70.39},{date:"May 2006",value:59.77},{date:"Jun 2006",value:57.27},{date:"Jul 2006",value:67.96},{date:"Aug 2006",value:67.85},{date:"Sep 2006",value:76.98},{date:"Oct 2006",value:81.08},{date:"Nov 2006",value:91.66},{date:"Dec 2006",value:84.84},{date:"Jan 2007",value:85.73},{date:"Feb 2007",value:84.61},{date:"Mar 2007",value:92.91},{date:"Apr 2007",value:99.8},{date:"May 2007",value:121.19},{date:"Jun 2007",value:122.04},{date:"Jul 2007",value:131.76},{date:"Aug 2007",value:138.48},{date:"Sep 2007",value:153.47},{date:"Oct 2007",value:189.95},{date:"Nov 2007",value:182.22},{date:"Dec 2007",value:198.08},{date:"Jan 2008",value:135.36},{date:"Feb 2008",value:125.02},{date:"Mar 2008",value:143.5},{date:"Apr 2008",value:173.95},{date:"May 2008",value:188.75},{date:"Jun 2008",value:167.44},{date:"Jul 2008",value:158.95},{date:"Aug 2008",value:169.53},{date:"Sep 2008",value:113.66},{date:"Oct 2008",value:107.59},{date:"Nov 2008",value:92.67},{date:"Dec 2008",value:85.35},{date:"Jan 2009",value:90.13},{date:"Feb 2009",value:89.31},{date:"Mar 2009",value:105.12},{date:"Apr 2009",value:125.83},{date:"May 2009",value:135.81},{date:"Jun 2009",value:142.43},{date:"Jul 2009",value:163.39},{date:"Aug 2009",value:168.21},{date:"Sep 2009",value:185.35},{date:"Oct 2009",value:188.5},{date:"Nov 2009",value:199.91},{date:"Dec 2009",value:210.73},{date:"Jan 2010",value:192.06},{date:"Feb 2010",value:204.62},{date:"Mar 2010",value:223.02}],IBM:[{date:"Jan 2000",value:100.52},{date:"Feb 2000",value:92.11},{date:"Mar 2000",value:106.11},{date:"Apr 2000",value:99.95},{date:"May 2000",value:96.31},{date:"Jun 2000",value:98.33},{date:"Jul 2000",value:100.74},{date:"Aug 2000",value:118.62},{date:"Sep 2000",value:101.19},{date:"Oct 2000",value:88.5},{date:"Nov 2000",value:84.12},{date:"Dec 2000",value:76.47},{date:"Jan 2001",value:100.76},{date:"Feb 2001",value:89.98},{date:"Mar 2001",value:86.63},{date:"Apr 2001",value:103.7},{date:"May 2001",value:100.82},{date:"Jun 2001",value:102.35},{date:"Jul 2001",value:94.87},{date:"Aug 2001",value:90.25},{date:"Sep 2001",value:82.82},{date:"Oct 2001",value:97.58},{date:"Nov 2001",value:104.5},{date:"Dec 2001",value:109.36},{date:"Jan 2002",value:97.54},{date:"Feb 2002",value:88.82},{date:"Mar 2002",value:94.15},{date:"Apr 2002",value:75.82},{date:"May 2002",value:72.97},{date:"Jun 2002",value:65.31},{date:"Jul 2002",value:63.86},{date:"Aug 2002",value:68.52},{date:"Sep 2002",value:53.01},{date:"Oct 2002",value:71.76},{date:"Nov 2002",value:79.16},{date:"Dec 2002",value:70.58},{date:"Jan 2003",value:71.22},{date:"Feb 2003",value:71.13},{date:"Mar 2003",value:71.57},{date:"Apr 2003",value:77.47},{date:"May 2003",value:80.48},{date:"Jun 2003",value:75.42},{date:"Jul 2003",value:74.28},{date:"Aug 2003",value:75.12},{date:"Sep 2003",value:80.91},{date:"Oct 2003",value:81.96},{date:"Nov 2003",value:83.08},{date:"Dec 2003",value:85.05},{date:"Jan 2004",value:91.06},{date:"Feb 2004",value:88.7},{date:"Mar 2004",value:84.41},{date:"Apr 2004",value:81.04},{date:"May 2004",value:81.59},{date:"Jun 2004",value:81.19},{date:"Jul 2004",value:80.19},{date:"Aug 2004",value:78.17},{date:"Sep 2004",value:79.13},{date:"Oct 2004",value:82.84},{date:"Nov 2004",value:87.15},{date:"Dec 2004",value:91.16},{date:"Jan 2005",value:86.39},{date:"Feb 2005",value:85.78},{date:"Mar 2005",value:84.66},{date:"Apr 2005",value:70.77},{date:"May 2005",value:70.18},{date:"Jun 2005",value:68.93},{date:"Jul 2005",value:77.53},{date:"Aug 2005",value:75.07},{date:"Sep 2005",value:74.7},{date:"Oct 2005",value:76.25},{date:"Nov 2005",value:82.98},{date:"Dec 2005",value:76.73},{date:"Jan 2006",value:75.89},{date:"Feb 2006",value:75.09},{date:"Mar 2006",value:77.17},{date:"Apr 2006",value:77.05},{date:"May 2006",value:75.04},{date:"Jun 2006",value:72.15},{date:"Jul 2006",value:72.7},{date:"Aug 2006",value:76.35},{date:"Sep 2006",value:77.26},{date:"Oct 2006",value:87.06},{date:"Nov 2006",value:86.95},{date:"Dec 2006",value:91.9},{date:"Jan 2007",value:93.79},{date:"Feb 2007",value:88.18},{date:"Mar 2007",value:89.44},{date:"Apr 2007",value:96.98},{date:"May 2007",value:101.54},{date:"Jun 2007",value:100.25},{date:"Jul 2007",value:105.4},{date:"Aug 2007",value:111.54},{date:"Sep 2007",value:112.6},{date:"Oct 2007",value:111},{date:"Nov 2007",value:100.9},{date:"Dec 2007",value:103.7},{date:"Jan 2008",value:102.75},{date:"Feb 2008",value:109.64},{date:"Mar 2008",value:110.87},{date:"Apr 2008",value:116.23},{date:"May 2008",value:125.14},{date:"Jun 2008",value:114.6},{date:"Jul 2008",value:123.74},{date:"Aug 2008",value:118.16},{date:"Sep 2008",value:113.53},{date:"Oct 2008",value:90.24},{date:"Nov 2008",value:79.65},{date:"Dec 2008",value:82.15},{date:"Jan 2009",value:89.46},{date:"Feb 2009",value:90.32},{date:"Mar 2009",value:95.09},{date:"Apr 2009",value:101.29},{date:"May 2009",value:104.85},{date:"Jun 2009",value:103.01},{date:"Jul 2009",value:116.34},{date:"Aug 2009",value:117},{date:"Sep 2009",value:118.55},{date:"Oct 2009",value:119.54},{date:"Nov 2009",value:125.79},{date:"Dec 2009",value:130.32},{date:"Jan 2010",value:121.85},{date:"Feb 2010",value:127.16},{date:"Mar 2010",value:125.55}],AMZN:[{date:"Jan 2000",value:64.56},{date:"Feb 2000",value:68.87},{date:"Mar 2000",value:67},{date:"Apr 2000",value:55.19},{date:"May 2000",value:48.31},{date:"Jun 2000",value:36.31},{date:"Jul 2000",value:30.12},{date:"Aug 2000",value:41.5},{date:"Sep 2000",value:38.44},{date:"Oct 2000",value:36.62},{date:"Nov 2000",value:24.69},{date:"Dec 2000",value:15.56},{date:"Jan 2001",value:17.31},{date:"Feb 2001",value:10.19},{date:"Mar 2001",value:10.23},{date:"Apr 2001",value:15.78},{date:"May 2001",value:16.69},{date:"Jun 2001",value:14.15},{date:"Jul 2001",value:12.49},{date:"Aug 2001",value:8.94},{date:"Sep 2001",value:5.97},{date:"Oct 2001",value:6.98},{date:"Nov 2001",value:11.32},{date:"Dec 2001",value:10.82},{date:"Jan 2002",value:14.19},{date:"Feb 2002",value:14.1},{date:"Mar 2002",value:14.3},{date:"Apr 2002",value:16.69},{date:"May 2002",value:18.23},{date:"Jun 2002",value:16.25},{date:"Jul 2002",value:14.45},{date:"Aug 2002",value:14.94},{date:"Sep 2002",value:15.93},{date:"Oct 2002",value:19.36},{date:"Nov 2002",value:23.35},{date:"Dec 2002",value:18.89},{date:"Jan 2003",value:21.85},{date:"Feb 2003",value:22.01},{date:"Mar 2003",value:26.03},{date:"Apr 2003",value:28.69},{date:"May 2003",value:35.89},{date:"Jun 2003",value:36.32},{date:"Jul 2003",value:41.64},{date:"Aug 2003",value:46.32},{date:"Sep 2003",value:48.43},{date:"Oct 2003",value:54.43},{date:"Nov 2003",value:53.97},{date:"Dec 2003",value:52.62},{date:"Jan 2004",value:50.4},{date:"Feb 2004",value:43.01},{date:"Mar 2004",value:43.28},{date:"Apr 2004",value:43.6},{date:"May 2004",value:48.5},{date:"Jun 2004",value:54.4},{date:"Jul 2004",value:38.92},{date:"Aug 2004",value:38.14},{date:"Sep 2004",value:40.86},{date:"Oct 2004",value:34.13},{date:"Nov 2004",value:39.68},{date:"Dec 2004",value:44.29},{date:"Jan 2005",value:43.22},{date:"Feb 2005",value:35.18},{date:"Mar 2005",value:34.27},{date:"Apr 2005",value:32.36},{date:"May 2005",value:35.51},{date:"Jun 2005",value:33.09},{date:"Jul 2005",value:45.15},{date:"Aug 2005",value:42.7},{date:"Sep 2005",value:45.3},{date:"Oct 2005",value:39.86},{date:"Nov 2005",value:48.46},{date:"Dec 2005",value:47.15},{date:"Jan 2006",value:44.82},{date:"Feb 2006",value:37.44},{date:"Mar 2006",value:36.53},{date:"Apr 2006",value:35.21},{date:"May 2006",value:34.61},{date:"Jun 2006",value:38.68},{date:"Jul 2006",value:26.89},{date:"Aug 2006",value:30.83},{date:"Sep 2006",value:32.12},{date:"Oct 2006",value:38.09},{date:"Nov 2006",value:40.34},{date:"Dec 2006",value:39.46},{date:"Jan 2007",value:37.67},{date:"Feb 2007",value:39.14},{date:"Mar 2007",value:39.79},{date:"Apr 2007",value:61.33},{date:"May 2007",value:69.14},{date:"Jun 2007",value:68.41},{date:"Jul 2007",value:78.54},{date:"Aug 2007",value:79.91},{date:"Sep 2007",value:93.15},{date:"Oct 2007",value:89.15},{date:"Nov 2007",value:90.56},{date:"Dec 2007",value:92.64},{date:"Jan 2008",value:77.7},{date:"Feb 2008",value:64.47},{date:"Mar 2008",value:71.3},{date:"Apr 2008",value:78.63},{date:"May 2008",value:81.62},{date:"Jun 2008",value:73.33},{date:"Jul 2008",value:76.34},{date:"Aug 2008",value:80.81},{date:"Sep 2008",value:72.76},{date:"Oct 2008",value:57.24},{date:"Nov 2008",value:42.7},{date:"Dec 2008",value:51.28},{date:"Jan 2009",value:58.82},{date:"Feb 2009",value:64.79},{date:"Mar 2009",value:73.44},{date:"Apr 2009",value:80.52},{date:"May 2009",value:77.99},{date:"Jun 2009",value:83.66},{date:"Jul 2009",value:85.76},{date:"Aug 2009",value:81.19},{date:"Sep 2009",value:93.36},{date:"Oct 2009",value:118.81},{date:"Nov 2009",value:135.91},{date:"Dec 2009",value:134.52},{date:"Jan 2010",value:125.41},{date:"Feb 2010",value:118.4},{date:"Mar 2010",value:128.82}]}}),define("text!templates/stock.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h2 class="panel-title">Stock Chart</h2>\n    <span class="links">\n      <a on-click="coffee">Coffescript</a>\n      <a on-click="html">HTML</a>\n    </span>\n  </div>\n\n  <div class="panel-body">\n    <p class="alert alert-info">Here is a stock chart example. Try switching data.</p>\n\n    <select value=\'{{ stock }}\'>\n      <option value=\'all\'>All</option>\n      {{# stocks:num }}\n        <option value=\'{{ num }}\'>{{ . }}</option>\n      {{/ stocks }}\n    </select>\n\n	  <svg width=500 height=380>\n	    <g>\n	      {{# Stock({data: data, xaccessor: xaccessor, yaccessor: yaccessor, width: width, height: height, closed: false }) }}\n	        {{# curves:num }}\n	          {{# stock == \'all\' || num == 0 }}\n	            <path d="{{ line.path.print() }}" stroke="{{ colors(index) }}" fill="none" />\n	            <path d="{{ area.path.print() }}" stroke="none" fill="{{ colors(index) }}" />\n	          {{/ end if }}\n	        {{/ curves }}\n	      {{/ end of stock }}\n	    </g>\n	  </svg>\n  </div>\n</div>\n'}),function(){define("views/stock",["ractive","show_source","paths/stock","palette/util","json!data/stock.json","text!templates/stock.html"],function(e,t,n,r,i,s){var o,u,a,f,l,c,h;return f=function(e){var t,n,r,i,s,o;return o=e.split(" "),r=o[0],s=o[1],i={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},n=i[r],t=new Date,t.setMonth(n),t.setYear(parseInt(s,10)-1900),t.getTime()},a=["#3E90F0","#7881C2","#707B82"],o=r.palette_to_function(a),h=["MSFT","AAPL","AMZN"],c=[i.MSFT,i.AAPL,i.AMZN],u=function(e,t){var n,r,i,s,o;i=e.length,n=[];for(r=s=0,o=i-1;0<=o?s<=o:s>=o;r=0<=o?++s:--s)n[(r+t)%i]=e[r];return n},l=new e({el:"#stock",template:s,data:{Stock:n,data:c,xaccessor:function(e){var t;return t=e.date,f(t)},yaccessor:function(e){var t;return t=e.value,t},width:500,height:350,stocks:h,colors:o,closed:!1}}),l.observe("stock",function(e){return e==="all"?this.set({data:c,colors:o}):(this.animate("data",u(c,parseInt(e))),this.set("colors",r.palette_to_function(u(a,parseInt(e)))))}),t("stock",l)})}.call(this),function(){define("paths/semi-regular-polygon",["./polygon","./ops"],function(e,t){return function(n){var r,i,s,o;return i=n.center,o=n.radii,r=2*Math.PI/o.length,s=o.map(function(e,n){return t.plus(i,t.on_circle(e,n*r))}),e({points:s,closed:!0})}})}.call(this),function(){define("paths/radar",["./semi-regular-polygon","./ops"],function(e,t){var n,r,i;return n=function(e){var t,n,r,i,s,o,u,a,f,l;n=[],r=function(){var t,n,r;r=[];for(t=0,n=e.length;t<n;t++)i=e[t],r.push(Object.keys(i));return r}();for(o=0,a=e.length;o<a;o++){s=e[o],l=Object.keys(s);for(u=0,f=l.length;u<f;u++)t=l[u],n.indexOf(t)===-1&&n.push(t)}return n},i=function(e){var t,n,r,i,s;t={},r=function(e){return t[e]=function(t){return t[e]}};for(i=0,s=e.length;i<s;i++)n=e[i],r(n);return t},r=function(e,n){var r,i;return r=Object.keys(n),i=e.map(function(e){var i;return i=r.map(function(t){return n[t](e)}),t.max(i)}),t.max(i)},function(s){var o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;return l=s.data,o=s.accessor,a=s.center,v=s.r,p=s.max,g=s.rings,f=s.compute,g==null&&(g=3),o==null&&(o=i(n(l))),h=Object.keys(o),y=h.length,u=2*Math.PI/y,c=-1,p==null&&(p=r(l,o)),m=function(){w=[];for(var e=1;1<=g?e<=g:e>=g;1<=g?e++:e--)w.push(e);return w}.apply(this).map(function(t){var n,r,i,s;return n=v*t/g,e({center:a,radii:function(){s=[];for(var e=0,t=y-1;0<=t?e<=t:e>=t;0<=t?e++:e--)s.push(e);return s}.apply(this).map(function(e){return n})})}),d=l.map(function(n){return c+=1,t.enhance(f,{polygon:e({center:a,radii:h.map(function(e){return v*o[e](n)/p})}),item:n,index:c})}),{curves:d,rings:m}}})}.call(this),define("text!templates/radar.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h2 class="panel-title">Radar Chart</h2>\n    <span class="links">\n      <a on-click="coffee">Coffescript</a>\n      <a on-click="html">HTML</a>\n    </span>\n  </div>\n\n  <div class="panel-body">\n    <p class="alert alert-info">Here is a radar chart showing Pokmon stats. Try changing Pokmon.</p>\n\n    <select value=\'{{ name }}\'>\n      {{# names:num }}\n        <option value=\'{{ num }}\'>{{ . }}</option>\n      {{/ names }}\n    </select>\n\n    {{# data }}\n      <div class="pokemon-info">\n        <h4>{{ name }}</h4>\n        <p>HP: <span class="label label-info">{{ Math.floor(hp) }}</span></p>\n        <p>Attack: <span class="label label-info">{{ Math.floor(attack) }}</span></p>\n        <p>Defense: <span class="label label-info">{{ Math.floor(defense) }}</span></p>\n        <p>Sp. Attack: <span class="label label-info">{{ Math.floor(sp_attack) }}</span></p>\n        <p>Sp. Defense: <span class="label label-info">{{ Math.floor(sp_defense) }}</span></p>\n        <p>Speed: <span class="label label-info">{{ Math.floor(speed) }}</span></p>\n      </div>\n    {{/ data }}\n\n    <svg width=375 height=400>\n      <g transform="translate(200,200)">\n        {{# Radar({center: center, r: r, data: data, accessor: accessor, max: max}) }}\n          {{# rings:num }}\n            {{# num == 2 }}\n              {{# path.points():num }}\n                <text text-anchor="middle" transform="{{ translate(.) }}">{{ labels[num] }}</text>\n                <line x1="{{ x(.) }}" y1="{{ y(.) }}" x2="0" y2="0" stroke="gray" />\n              {{/ end points }}\n            {{/ end if }}\n            {{^ num == 2 }}\n              <path d="{{ path.print() }}" fill="none" stroke="gray" />\n            {{/ end else }}\n          {{/ rings }}\n          {{# curves }}\n            <path d="{{ polygon.path.print() }}" fill="{{ lighten(col) }}" stroke="{{ color_string(col) }}" />\n          {{/ curves }}\n        {{/ end of radar}}\n      </g>\n    </svg>\n  </div>\n</div>\n'}),function(){define("views/radar",["ractive","show_source","palette/colors","palette/util","paths/radar","text!templates/radar.html"],function(e,t,n,r,i,s){var o,u,a,f,l,c;return u=function(e){var t,n,r,i,s;t={},r=function(e){return t[e]=function(t){return t[e]}};for(i=0,s=e.length;i<s;i++)n=e[i],r(n);return t},l=[{name:"Bulbasaur",hp:45,attack:49,defense:49,sp_attack:65,sp_defense:65,speed:45},{name:"Ivysaur",hp:60,attack:62,defense:63,sp_attack:80,sp_defense:80,speed:60},{name:"Venusaur",hp:80,attack:82,defense:83,sp_attack:100,sp_defense:100,speed:80},{name:"Kakuna",hp:45,attack:25,defense:50,sp_attack:25,sp_defense:25,speed:35},{name:"Charmeleon",hp:58,attack:64,defense:58,sp_attack:80,sp_defense:65,speed:80},{name:"Squirtle",hp:44,attack:48,defense:65,sp_attack:50,sp_defense:64,speed:43},{name:"Blastoise",hp:79,attack:83,defense:100,sp_attack:85,sp_defense:105,speed:78},{name:"Butterfree",hp:60,attack:45,defense:50,sp_attack:90,sp_defense:80,speed:70}],f=n.mix({r:130,g:140,b:210},{r:180,g:205,b:150}),o=r.palette_to_function(f),a=["hp","attack","defense","sp_attack","sp_defense","speed"],c=new e({el:"#radar",template:s,data:{Radar:i,center:[0,0],r:130,max:100,accessor:u(a),data:[l[0]],names:l.map(function(e){return e.name}),colors:o,labels:a,col:o(0),color_string:n.string,translate:function(e){var t,n;return t=e[0],n=e[1],"translate("+Math.floor(1.2*t)+", "+Math.floor(1.2*n)+")"},x:function(e){var t,n;return t=e[0],n=e[1],t},y:function(e){var t,n;return t=e[0],n=e[1],n},lighten:function(e){return n.string(n.lighten(e))}}}),c.observe("name",function(e){return this.animate({data:[l[e]],col:o(parseInt(e))})}),t("radar",c)})}.call(this),function(){define("paths/smooth-line",["./bezier","./ops","./line-chart-comp"],function(e,t,n){return function(r){var i,s,o,u,a,f,l,c;return c=n(r),i=c.arranged,a=c.scale,f=c.xscale,l=c.yscale,s=c.base,o=-1,u=i.map(function(n){var i,u,f,l,c,h,p,d;return f=n.points,h=n.xmin,c=n.xmax,l=f.map(a),o+=1,u=e({points:l}),i={path:(p=(d=u.path).lineto.apply(d,a([c,s]))).lineto.apply(p,a([h,s])).closepath(),centroid:t.average([u.centroid,a([h,s]),a([c,s])])},t.enhance(r.compute,{item:r.data[o],line:u,area:i,index:o})}),{curves:u,xscale:f,yscale:l}}})}.call(this),define("json!data/line.json",function(){return{MSFT:[{date:"Jan 2006",value:26.14},{date:"Feb 2006",value:25.04},{date:"Mar 2006",value:25.36},{date:"Apr 2006",value:22.5},{date:"May 2006",value:21.19},{date:"Jun 2006",value:21.8},{date:"Jul 2006",value:22.51},{date:"Aug 2006",value:24.13},{date:"Sep 2006",value:25.68},{date:"Oct 2006",value:26.96},{date:"Nov 2006",value:27.66},{date:"Dec 2006",value:28.13},{date:"Jan 2007",value:29.07},{date:"Feb 2007",value:26.63},{date:"Mar 2007",value:26.35},{date:"Apr 2007",value:28.3},{date:"May 2007",value:29.11},{date:"Jun 2007",value:27.95},{date:"Jul 2007",value:27.5},{date:"Aug 2007",value:27.34},{date:"Sep 2007",value:28.04},{date:"Oct 2007",value:35.03},{date:"Nov 2007",value:32.09},{date:"Dec 2007",value:34},{date:"Jan 2008",value:31.13},{date:"Feb 2008",value:26.07},{date:"Mar 2008",value:27.21},{date:"Apr 2008",value:27.34},{date:"May 2008",value:27.25},{date:"Jun 2008",value:26.47},{date:"Jul 2008",value:24.75},{date:"Aug 2008",value:26.36},{date:"Sep 2008",value:25.78},{date:"Oct 2008",value:21.57},{date:"Nov 2008",value:19.66},{date:"Dec 2008",value:18.91},{date:"Jan 2009",value:16.63},{date:"Feb 2009",value:15.81},{date:"Mar 2009",value:17.99},{date:"Apr 2009",value:19.84},{date:"May 2009",value:20.59},{date:"Jun 2009",value:23.42},{date:"Jul 2009",value:23.18},{date:"Aug 2009",value:24.43},{date:"Sep 2009",value:25.49},{date:"Oct 2009",value:27.48},{date:"Nov 2009",value:29.27},{date:"Dec 2009",value:30.34},{date:"Jan 2010",value:28.05},{date:"Feb 2010",value:28.67},{date:"Mar 2010",value:28.8}],AAPL:[{date:"Jan 2006",value:75.51},{date:"Feb 2006",value:68.49},{date:"Mar 2006",value:62.72},{date:"Apr 2006",value:70.39},{date:"May 2006",value:59.77},{date:"Jun 2006",value:57.27},{date:"Jul 2006",value:67.96},{date:"Aug 2006",value:67.85},{date:"Sep 2006",value:76.98},{date:"Oct 2006",value:81.08},{date:"Nov 2006",value:91.66},{date:"Dec 2006",value:84.84},{date:"Jan 2007",value:85.73},{date:"Feb 2007",value:84.61},{date:"Mar 2007",value:92.91},{date:"Apr 2007",value:99.8},{date:"May 2007",value:121.19},{date:"Jun 2007",value:122.04},{date:"Jul 2007",value:131.76},{date:"Aug 2007",value:138.48},{date:"Sep 2007",value:153.47},{date:"Oct 2007",value:189.95},{date:"Nov 2007",value:182.22},{date:"Dec 2007",value:198.08},{date:"Jan 2008",value:135.36},{date:"Feb 2008",value:125.02},{date:"Mar 2008",value:143.5},{date:"Apr 2008",value:173.95},{date:"May 2008",value:188.75},{date:"Jun 2008",value:167.44},{date:"Jul 2008",value:158.95},{date:"Aug 2008",value:169.53},{date:"Sep 2008",value:113.66},{date:"Oct 2008",value:107.59},{date:"Nov 2008",value:92.67},{date:"Dec 2008",value:85.35},{date:"Jan 2009",value:90.13},{date:"Feb 2009",value:89.31},{date:"Mar 2009",value:105.12},{date:"Apr 2009",value:125.83},{date:"May 2009",value:135.81},{date:"Jun 2009",value:142.43},{date:"Jul 2009",value:163.39},{date:"Aug 2009",value:168.21},{date:"Sep 2009",value:185.35},{date:"Oct 2009",value:188.5},{date:"Nov 2009",value:199.91},{date:"Dec 2009",value:210.73},{date:"Jan 2010",value:192.06},{date:"Feb 2010",value:204.62},{date:"Mar 2010",value:223.02}],IBM:[{date:"Jan 2000",value:100.52},{date:"Feb 2000",value:92.11},{date:"Mar 2000",value:106.11},{date:"Apr 2000",value:99.95},{date:"May 2000",value:96.31},{date:"Jun 2000",value:98.33},{date:"Jul 2000",value:100.74},{date:"Aug 2000",value:118.62},{date:"Sep 2000",value:101.19},{date:"Oct 2000",value:88.5},{date:"Nov 2000",value:84.12},{date:"Dec 2000",value:76.47},{date:"Jan 2001",value:100.76},{date:"Feb 2001",value:89.98},{date:"Mar 2001",value:86.63},{date:"Apr 2001",value:103.7},{date:"May 2001",value:100.82},{date:"Jun 2001",value:102.35},{date:"Jul 2001",value:94.87},{date:"Aug 2001",value:90.25},{date:"Sep 2001",value:82.82},{date:"Oct 2001",value:97.58},{date:"Nov 2001",value:104.5},{date:"Dec 2001",value:109.36},{date:"Jan 2002",value:97.54},{date:"Feb 2002",value:88.82},{date:"Mar 2002",value:94.15},{date:"Apr 2002",value:75.82},{date:"May 2002",value:72.97},{date:"Jun 2002",value:65.31},{date:"Jul 2002",value:63.86},{date:"Aug 2002",value:68.52},{date:"Sep 2002",value:53.01},{date:"Oct 2002",value:71.76},{date:"Nov 2002",value:79.16},{date:"Dec 2002",value:70.58},{date:"Jan 2003",value:71.22},{date:"Feb 2003",value:71.13},{date:"Mar 2003",value:71.57},{date:"Apr 2003",value:77.47},{date:"May 2003",value:80.48},{date:"Jun 2003",value:75.42},{date:"Jul 2003",value:74.28},{date:"Aug 2003",value:75.12},{date:"Sep 2003",value:80.91},{date:"Oct 2003",value:81.96},{date:"Nov 2003",value:83.08},{date:"Dec 2003",value:85.05},{date:"Jan 2004",value:91.06},{date:"Feb 2004",value:88.7},{date:"Mar 2004",value:84.41},{date:"Apr 2004",value:81.04},{date:"May 2004",value:81.59},{date:"Jun 2004",value:81.19},{date:"Jul 2004",value:80.19},{date:"Aug 2004",value:78.17},{date:"Sep 2004",value:79.13},{date:"Oct 2004",value:82.84},{date:"Nov 2004",value:87.15},{date:"Dec 2004",value:91.16},{date:"Jan 2005",value:86.39},{date:"Feb 2005",value:85.78},{date:"Mar 2005",value:84.66},{date:"Apr 2005",value:70.77},{date:"May 2005",value:70.18},{date:"Jun 2005",value:68.93},{date:"Jul 2005",value:77.53},{date:"Aug 2005",value:75.07},{date:"Sep 2005",value:74.7},{date:"Oct 2005",value:76.25},{date:"Nov 2005",value:82.98},{date:"Dec 2005",value:76.73},{date:"Jan 2006",value:75.89},{date:"Feb 2006",value:75.09},{date:"Mar 2006",value:77.17},{date:"Apr 2006",value:77.05},{date:"May 2006",value:75.04},{date:"Jun 2006",value:72.15},{date:"Jul 2006",value:72.7},{date:"Aug 2006",value:76.35},{date:"Sep 2006",value:77.26},{date:"Oct 2006",value:87.06},{date:"Nov 2006",value:86.95},{date:"Dec 2006",value:91.9},{date:"Jan 2007",value:93.79},{date:"Feb 2007",value:88.18},{date:"Mar 2007",value:89.44},{date:"Apr 2007",value:96.98},{date:"May 2007",value:101.54},{date:"Jun 2007",value:100.25},{date:"Jul 2007",value:105.4},{date:"Aug 2007",value:111.54},{date:"Sep 2007",value:112.6},{date:"Oct 2007",value:111},{date:"Nov 2007",value:100.9},{date:"Dec 2007",value:103.7},{date:"Jan 2008",value:102.75},{date:"Feb 2008",value:109.64},{date:"Mar 2008",value:110.87},{date:"Apr 2008",value:116.23},{date:"May 2008",value:125.14},{date:"Jun 2008",value:114.6},{date:"Jul 2008",value:123.74},{date:"Aug 2008",value:118.16},{date:"Sep 2008",value:113.53},{date:"Oct 2008",value:90.24},{date:"Nov 2008",value:79.65},{date:"Dec 2008",value:82.15},{date:"Jan 2009",value:89.46},{date:"Feb 2009",value:90.32},{date:"Mar 2009",value:95.09},{date:"Apr 2009",value:101.29},{date:"May 2009",value:104.85},{date:"Jun 2009",value:103.01},{date:"Jul 2009",value:116.34},{date:"Aug 2009",value:117},{date:"Sep 2009",value:118.55},{date:"Oct 2009",value:119.54},{date:"Nov 2009",value:125.79},{date:"Dec 2009",value:130.32},{date:"Jan 2010",value:121.85},{date:"Feb 2010",value:127.16},{date:"Mar 2010",value:125.55}],AMZN:[{date:"Jan 2006",value:44.82},{date:"Feb 2006",value:37.44},{date:"Mar 2006",value:36.53},{date:"Apr 2006",value:35.21},{date:"May 2006",value:34.61},{date:"Jun 2006",value:38.68},{date:"Jul 2006",value:26.89},{date:"Aug 2006",value:30.83},{date:"Sep 2006",value:32.12},{date:"Oct 2006",value:38.09},{date:"Nov 2006",value:40.34},{date:"Dec 2006",value:39.46},{date:"Jan 2007",value:37.67},{date:"Feb 2007",value:39.14},{date:"Mar 2007",value:39.79},{date:"Apr 2007",value:61.33},{date:"May 2007",value:69.14},{date:"Jun 2007",value:68.41},{date:"Jul 2007",value:78.54},{date:"Aug 2007",value:79.91},{date:"Sep 2007",value:93.15},{date:"Oct 2007",value:89.15},{date:"Nov 2007",value:90.56},{date:"Dec 2007",value:92.64},{date:"Jan 2008",value:77.7},{date:"Feb 2008",value:64.47},{date:"Mar 2008",value:71.3},{date:"Apr 2008",value:78.63},{date:"May 2008",value:81.62},{date:"Jun 2008",value:73.33},{date:"Jul 2008",value:76.34},{date:"Aug 2008",value:80.81},{date:"Sep 2008",value:72.76},{date:"Oct 2008",value:57.24},{date:"Nov 2008",value:42.7},{date:"Dec 2008",value:51.28},{date:"Jan 2009",value:58.82},{date:"Feb 2009",value:64.79},{date:"Mar 2009",value:73.44},{date:"Apr 2009",value:80.52},{date:"May 2009",value:77.99},{date:"Jun 2009",value:83.66},{date:"Jul 2009",value:85.76},{date:"Aug 2009",value:81.19},{date:"Sep 2009",value:93.36},{date:"Oct 2009",value:118.81},{date:"Nov 2009",value:135.91},{date:"Dec 2009",value:134.52},{date:"Jan 2010",value:125.41},{date:"Feb 2010",value:118.4},{date:"Mar 2010",value:128.82}]}}),define("text!templates/line.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h2 class="panel-title">Smooth Line Chart</h2>\n    <span class="links">\n      <a on-click="coffee">Coffescript</a>\n      <a on-click="html">HTML</a>\n    </span>\n  </div>\n\n  <div class="panel-body">\n    <p class="alert alert-info">Here is a smooth line chart example. Try switching data.</p>\n\n    <select value=\'{{ stock }}\'>\n      <option value=\'all\'>All</option>\n      {{# stocks:num }}\n        <option value=\'{{ num }}\'>{{ . }}</option>\n      {{/ stocks }}\n    </select>\n\n    <svg width=500 height=380>\n      <g>\n        {{# Line({data: data, xaccessor: xaccessor, yaccessor: yaccessor, width: width, height: height, closed: false }) }}\n          {{# curves:num }}\n            {{# stock == \'all\' || num == 0 }}\n              <path d="{{ line.path.print() }}" stroke="{{ colors(index) }}" fill="none" />\n              <path d="{{ area.path.print() }}" stroke="none" fill="{{ colors(index) }}" />\n            {{/ end if }}\n          {{/ curves }}\n        {{/ end of stock }}\n      </g>\n    </svg>\n  </div>\n</div>\n'}),function(){define("views/line",["ractive","show_source","paths/smooth-line","palette/util","json!data/line.json","text!templates/line.html"],function(e,t,n,r,i,s){var o,u,a,f,l,c,h;return l=function(e){var t,n,r,i,s,o;return o=e.split(" "),r=o[0],s=o[1],i={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},n=i[r],t=new Date,t.setMonth(n),t.setYear(parseInt(s,10)-1900),t.getTime()},f=["#3E90F0","#7881C2","#707B82"],o=r.palette_to_function(f),h=["MSFT","AAPL","AMZN"],c=[i.MSFT,i.AAPL,i.AMZN],u=function(e,t){var n,r,i,s,o;i=e.length,n=[];for(r=s=0,o=i-1;0<=o?s<=o:s>=o;r=0<=o?++s:--s)n[(r+t)%i]=e[r];return n},a=new e({el:"#line",template:s,data:{Line:n,data:c,xaccessor:function(e){var t;return t=e.date,l(t)},yaccessor:function(e){var t;return t=e.value,t},width:500,height:350,stocks:h,colors:o,closed:!1}}),a.observe("stock",function(e){return e==="all"?this.set({data:c,colors:o}):(this.animate("data",u(c,parseInt(e))),this.set("colors",r.palette_to_function(u(f,parseInt(e)))))}),t("line",a)})}.call(this),function(){define("paths/rectangle",["./polygon"],function(e){return function(t){var n,r,i,s;return r=t.left,i=t.right,s=t.top,n=t.bottom,e({points:[[i,s],[i,n],[r,n],[r,s]],closed:!0})}})}.call(this),function(){define("paths/bar",["./ops","./linear","./rectangle"],function(e,t,n){return function(r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,M,_,D,P,H,B,j,F;f=r.data,i=r.accessor,A=r.width,v=r.height,d=r.gutter,o=r.compute,i==null&&(i=function(e){return e}),d==null&&(d=0),p=[],E=0,w=0;for(m=M=0,H=f.length;M<H;m=++M){a=f[m];for(g=_=0,B=a.length;_<B;g=++_)l=a[g],k=i(l),k<E&&(E=k),k>w&&(w=k),p[g]==null&&(p[g]=[]),p[g][m]=k}S=p.length,h=(A-d*(S-1))/S,u=[],T=t([E,w],[v,0]);for(m=D=0,j=p.length;D<j;m=++D){c=p[m],L=h/c.length,N=(h+d)*m;for(g=P=0,F=c.length;P<F;g=++P)l=c[g],y=N+L*g,x=y+L,s=T(0),C=T(l),b=n({left:y,right:x,bottom:s,top:C}),u.push(e.enhance(o,{item:f[g][m],line:b,index:g}))}return{curves:u,scale:T}}})}.call(this),define("text!templates/bar.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h2 class="panel-title">Bar Chart</h2>\n    <span class="links">\n      <a on-click="coffee">Coffescript</a>\n      <a on-click="html">HTML</a>\n    </span>\n  </div>\n\n  <div class="panel-body">\n    <p class="alert alert-info">Here is a bar chart example. Try hovering on the bars.</p>\n\n    <svg width=500 height=380>\n      <g>\n        {{# Bar({data: data, accessor: accessor, width: width, height: height, gutter: gutter }) }}\n          {{# curves:num }}\n            <path on-mouseenter="detail" on-mouseleave="restore" d="{{ line.path.print() }}" stroke="none" fill="{{ colors(index) }}" />\n          {{/ curves }}\n        {{/ end of bar }}\n      </g>\n    </svg>\n  </div>\n</div>\n'}),function(){define("views/bar",["ractive","show_source","paths/bar","palette/util","text!templates/bar.html"],function(e,t,n,r,i){var s,o,u,a,f;return f=["#FEE871","#E5FAAF","#B7E5F5"],o=r.palette_to_function(f),u=[[1,2,3,4],[3,5,4,2],[1,6,1,6]],a=function(e,t){return e.map(function(e,n){var r,i,s,o;if(n===t)return e;o=[];for(i=0,s=e.length;i<s;i++)r=e[i],o.push(0);return o})},s=new e({el:"#bar",template:i,data:{Bar:n,data:u,accessor:function(e){return e},width:500,height:350,gutter:10,colors:o}}),s.on("detail",function(e){var t;return t=e.index.num%3,this.animate("data",a(u,t))}),s.on("restore",function(){return this.animate("data",u)}),t("bar",s)})}.call(this),function(){define("paths/connector",["./path","./ops"],function(e,t){return function(n){var r,i,s,o,u,a,f,l,c,h,p,d,v;return c=n.start,u=n.end,h=n.tension,h==null&&(h=.05),r=c[0],i=c[1],s=u[0],o=u[1],a=(s-r)*h,f=[r+a,i],l=[s-a,o],{path:(p=(d=(v=e()).moveto.apply(v,c)).lineto.apply(d,f).curveto(r+5*a,i,s-5*a,o,s-a,o)).lineto.apply(p,u),centroid:t.average([c,u])}}})}.call(this),function(){define("paths/tree_utils",[],function(){var e,t,n,r,i;return n=function(e,t){return e==null&&(e=[]),e.reduce(function(e,n){return Math.max(e,t(n))},0)},i=function(e){return 1+n(e.children,i)},e=function(t,n,r){var i,s;return r==null&&(r=0),s={item:t,level:r},i=n(t),i&&i.length&&(s.children=i.map(function(t){return e(t,n,r+1)})),s},r=function(e,t,n){var i,s,o,u;n==null&&(n=[]),t==null&&(t=0),n[t]!=null?(e.height=n[t]+1,n[t]+=1):(n[t]=0,e.height=0),u=e.children||[];for(s=0,o=u.length;s<o;s++)i=u[s],r(i,t+1,n);return n},t=function(e,n){var r,i,s,o,u;i=[],u=e.children||[];for(s=0,o=u.length;s<o;s++)r=u[s],i.push(n(e,r)),i=i.concat(t(r,n));return i},{tree_height:i,build_tree:e,set_height:r,collect:t}})}.call(this),function(){define("paths/tree",["./connector","./linear","./tree_utils"],function(e,t,n){return function(r){var i,s,o,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;return a=r.data,w=r.width,f=r.height,s=r.children,g=r.tension,s==null&&(s=function(e){return e.children}),y=n.build_tree(a,s),p=n.tree_height(y),d=n.set_height(y),c=w/(p-1),l=t([0,p-1],[0,w]),b=function(){x=[];for(var e=0,t=p-1;0<=t?e<=t:e>=t;0<=t?e++:e--)x.push(e);return x}.apply(this).map(function(e){var n,r,i,s;return n=Math.sqrt(e/(p-1))*f,s=(f-n)/2,r=s+n,i=e>0?d[e]+d[e-1]:d[e],i===0?function(e){return f/2}:t([0,i],[s,r])}),v=function(e){var t,n;return t=e.level,n=b[t],[l(t),n(e.height_)]},h=-1,o=n.collect(y,function(t,n){return h+=1,n.height_=n.height+t.height,{connector:e({start:v(t),end:v(n),tension:g}),index:h,item:{start:t.item,end:n.item}}}),i=n.collect(y,function(e,t){return{point:v(t),item:t.item}}),m={point:v(y),item:y.item},{curves:o,nodes:[m].concat(i)}}})}.call(this),define("json!data/ducks.json",function(){return{name:"Grandma",children:[{name:"Eider",children:[{name:"Fethry"},{name:"Abner"}]},{name:"Daphne",children:[{name:"Gladstone"}]},{name:"Quackmore",children:[{name:"Donald"},{name:"Della",children:[{name:"Huey"},{name:"Dewey"},{name:"Louie"}]}]}]}}),define("text!templates/tree.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h2 class="panel-title">Tree Chart</h2>\n    <span class="links">\n      <a on-click="coffee">Coffescript</a>\n      <a on-click="html">HTML</a>\n    </span>\n  </div>\n\n  <div class="panel-body">\n    <p class="alert alert-info">Here is part of the duck family tree. Leafs are expandable.</p>\n\n    <svg width=500 height=380>\n      <g transform="translate(70,20)">\n        {{# Tree({data: data, children: children, width: width, height: height}) }}\n          {{# curves }}\n            <path d="{{ connector.path.print() }}" />\n          {{/ curves }}\n          {{# nodes }}\n            <g transform="translate({{ point[0] }},{{ point[1] }})">\n              <circle r="5" cx="0" cy="0" on-click="toggle" />\n              {{# leaf(item) }}\n                <text transform="translate(10,0)" text-anchor="start">{{ item.name }}</text>\n              {{/ end if }}\n              {{^ leaf(item) }}\n                <text transform="translate(-10,0)" text-anchor="end">{{ item.name }}</text>\n              {{/ end if }}\n            </g>\n          {{/ nodes }}\n        {{/ end of connector }}\n      </g>\n    </svg>\n  </div>\n</div>'}),function(){define("views/tree",["ractive","show_source","paths/tree","json!data/ducks.json","text!templates/tree.html"],function(e,t,n,r,i){var s,o;return s=function(e){return e.collapsed?[]:e.children},o=new e({el:"#tree",template:i,data:{Tree:n,data:r,children:s,width:350,height:300,leaf:function(e){var t;return(t=s(e))!=null?!t.length:!void 0}}}),o.on("toggle",function(e){var t;return t=e.context.item,t.collapsed=!t.collapsed,this.update()}),t("tree",o)})}.call(this),function(){define("paths/barnes_hut",["./ops"],function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p;return n=function(t,n){var r,i;return r=t.mass+n.mass,i=e.times(1/r,e.plus(e.times(t.mass,t.point),e.times(n.mass,n.point))),[i,r]},o=function(e,t){var n,r,i,s,o,u,a,f,l,c;u=e[0],a=e[1];for(f=0,l=t.length;f<l;f++){i=t[f],c=i.box,o=c.top,n=c.bottom,r=c.left,s=c.right;if(r<=u&&u<=s&&n<=a&&a<=o)return i}},a=function(e,t){var n,r,i,s,o,u,a,f;return f=e.top,i=e.bottom,u=e.left,a=e.right,n=t[0],r=t[1],o=(u+a)/2,s=(f+i)/2,{box:{top:r?s:f,bottom:r?i:s,left:n?o:u,right:n?a:o}}},h=function(e){var t;return t=e.box,[a(t,[0,0]),a(t,[1,0]),a(t,[0,1]),a(t,[1,1])]},t=function(e,r){var i,s,u;return e.body?(s=e.body,delete e.body,e.children=h(e),t(e,s),t(e,r)):e.children?(i=o(r.point,e.children),u=e.point?n(e,r):[r.point,r.mass],e.point=u[0],e.mass=u[1],t(i,r)):e.body=r},l=function(e,n){var r;return e.length===0?n:(r=e.shift(),t(n,r),l(e,n))},u=function(e){var t,n,r;t=[];for(n in e)r=e[n],t.push({id:n,point:r,mass:1});return t},f=function(e,t){return{box:{top:t,bottom:0,left:0,right:e}}},p=function(e,t){var n,r,i,s,o;if(e.body)return t(e);if(e.children){s=e.children,o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(p(n,t));return o}},r=function(t,n,r){var i,s;return s=e.minus(t.point,n.point),i=e.length(s),e.times(r*t.mass*n.mass/(i*i*i),s)},i=function(t){var n,r,i,s;return s=t.top,n=t.bottom,r=t.left,i=t.right,e.length([s-n,i-r])},s=function(t,n,o,u){var a,f;return n===t?[0,0]:n.body?r(t.body,n.body,o):n.point?(f=i(n.box),a=e.length(e.minus(t.body.point,n.point)),f/a<u?r(t.body,n,o):e.sum_vectors(n.children.map(function(e){return s(t,e,o,u)}))):[0,0]},c=function(e,t,n){var r;return r={},p(e,function(i){return r[i.body.id]=s(i,e,t,n)}),r},{tree:l,bodies:u,root:f,forces:c}})}.call(this),function(){define("paths/graph",["./polygon","./ops","./barnes_hut"],function(e,t,n){var r,i,s,o,u;return u=function(e,t){return[Math.random()*e,Math.random()*t]},i=function(e,t){return Math.min(Math.max(t,0),e)},s=function(e,t){return function(n){var r,s;return r=n[0],s=n[1],[i(e,r),i(t,s)]}},o=function(e,t){var n,r,i;r=[];for(n in e)i=e[n],r.push(t(n,i));return r},r=function(e,n,r){var i,s,o,u,a,f,l,c,h;o={};for(u in e)h=e[u],l=h.start,i=h.end,c=h.weight,a=n[l],f=n[i],s=t.times(r*c,t.minus(a,f)),o[l]==null&&(o[l]=[0,0]),o[i]==null&&(o[i]=[0,0]),o[l]=t.minus(o[l],s),o[i]=t.plus(o[i],s);return o},function(i){var a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,M,_,D,P,H,B,j,F,I;h=i.data,S=i.nodeaccessor,y=i.linkaccessor,P=i.width,v=i.height,a=i.attraction,k=i.repulsion,A=i.threshold,S==null&&(S=function(e){return e}),y==null&&(y=function(e){return e}),a==null&&(a=1),k==null&&(k=1),A==null&&(A=.5),f=s(P,v),x=h.nodes,b=h.links,c=h.constraints,c==null&&(c={}),N={},T={};for(H=0,j=x.length;H<j;H++)E=x[H],m=S(E),N[m]=c[m]||u(P,v),T[m]=E;w={};for(B=0,F=b.length;B<F;B++)g=b[B],I=y(g),L=I.start,p=I.end,D=I.weight,w[""+L+"|"+p]={weight:D,start:L,end:p,link:g};return M=function(){var e,i,s,o,u,l,h,p,d;i=n.bodies(N),p=n.root(P,v),d=n.tree(i,p),e=r(w,N,a/1e3),h=n.forces(d,k*1e3,A);for(m in N)l=N[m],c[m]?N[m]=c[m]:(o=e[m]||[0,0],u=h[m]||[0,0],s=t.plus(o,u),N[m]=f(t.plus(l,s)));return C()},l=function(e,t){return c[e]=t},_=function(e){return delete c[e]},d={tick:M,constrain:l,unconstrain:_},C=function(){var t;return t=-1,d.curves=o(w,function(n,r){var i,s,o,u,a;return a=r.start,i=r.end,s=r.link,t+=1,o=N[a],u=N[i],{link:e({points:[o,u],closed:!1}),item:s,index:t}}),d.nodes=o(T,function(e,t){return{point:N[e],item:t}}),d},C()}})}.call(this),define("text!templates/graph.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h2 class="panel-title">Graph Tree</h2>\n    <span class="links">\n      <a on-click="coffee">Coffescript</a>\n      <a on-click="html">HTML</a>\n    </span>\n  </div>\n\n  <div class="panel-body">\n    <p class="alert alert-info">Here is a preliminary example of force-directed graph.</p>\n\n    <svg width="500" height="430" on-mousemove="move" on-mouseup="unconstrain">\n      <g transform="translate(20,20)">\n        {{# graph }}\n          {{# curves }}\n            <path d="{{ link.path.print() }}" stroke="grey" fill="none" />\n          {{/ curves }}\n          {{# nodes:num }}\n            <circle r="5" cx="{{ point[0] }}" cy="{{ point[1] }}" stroke="grey" fill="{{ color_string(colors(num)) }}" on-mousedown="constrain" />\n          {{/ nodes }}\n        {{/ graph }}\n      </g>\n    </svg>\n  </div>\n</div>'}),function(){define("views/graph",["ractive","show_source","paths/graph","palette/colors","palette/util","text!templates/graph.html"],function(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g,y;return c=function(e,t){var n,r,i,s,o,u,a,f,l,c;s=function(){c=[];for(var t=0;0<=e?t<=e:t>=e;0<=e?t++:t--)c.push(t);return c}.apply(this),i=[];for(n=u=0,f=e-1;0<=f?u<=f:u>=f;n=0<=f?++u:--u)for(r=a=l=n+1;l<=e?a<=e:a>=e;r=l<=e?++a:--a)Math.random()<t&&i.push({start:n,end:r,weight:3+5*Math.random()});return{nodes:s,links:i}},f=r.mix({r:130,g:140,b:210},{r:180,g:205,b:150}),u=n({data:c(20,.25),width:450,height:400,attraction:7,repulsion:20}),l=new e({el:"#graph",template:s,data:{graph:u,colors:i.palette_to_function(f),color_string:r.string}}),a=!0,v=5,m=null,g=null,o=null,y=null,p=function(){l.set({graph:u.tick()});if(a)return requestAnimationFrame(p)},h=function(){return y&&(clearTimeout(y),y=null),requestAnimationFrame(p)},d=function(){return y=setTimeout(function(){return a=!1},1e3*v)},h(),d(),l.on("constrain",function(e){var t;return a=!0,t=e.original.target,m=e.original.clientX-t.cx.baseVal.value,g=e.original.clientY-t.cy.baseVal.value,o=e.index.num,h()}),l.on("move",function(e){var t;return o?e.original.button!==0?(d(),null):(t=[e.original.clientX-m,e.original.clientY-g],u.constrain(o,t)):null}),l.on("unconstrain",function(e){return u.unconstrain(o),o=null,d()}),t("graph",l)})}.call(this),define("json!data/twin-peaks.json",function(){return[{episode:1,title:"Pilot",rating:9.18,rankers:44},{episode:2,title:"Traces to Nowhere",rating:8.69,rankers:42},{episode:3,title:"Zen, or the Skill to Catch a Killer",rating:9.18,rankers:44},{episode:4,title:"Rest in Pain",rating:8.74,rankers:40},{episode:5,title:"The One-Armed Man",rating:8.62,rankers:39},{episode:6,title:"Cooper's Dreams",rating:8.82,rankers:41},{episode:7,title:"Realization Time",rating:8.88,rankers:41},{episode:8,title:"The Last Evening",rating:9.22,rankers:41},{episode:9,title:"May the Giant Be with You",rating:9.12,rankers:39},{episode:10,title:"Coma",rating:8.92,rankers:38},{episode:11,title:"The Man Behind Glass",rating:8.63,rankers:38},{episode:12,title:"Laura's Secret Diary",rating:8.46,rankers:36},{episode:13,title:"The Orchid's Curse",rating:8.71,rankers:36},{episode:14,title:"Demons",rating:8.8,rankers:36},{episode:15,title:"Lonely Souls",rating:9.37,rankers:40},{episode:16,title:"Drive with a Dead Girl",rating:9.07,rankers:38},{episode:17,title:"Arbitrary Law",rating:9.43,rankers:40},{episode:18,title:"Dispute Between Brothers",rating:8.29,rankers:35},{episode:19,title:"Masked Ball",rating:8.02,rankers:32},{episode:20,title:"The Black Widow",rating:8.01,rankers:30},{episode:21,title:"Checkmate",rating:8.1,rankers:30},{episode:22,title:"Double Play",rating:8.16,rankers:30},{episode:23,title:"Slaves and Masters",rating:8.22,rankers:30},{episode:24,title:"The Condemned Woman",rating:8.68,rankers:32},{episode:25,title:"Wounds and Scars",rating:8.44,rankers:31},{episode:26,title:"On the Wings of Love",rating:8.49,rankers:33},{episode:27,title:"Variations on Relations",rating:8.61,rankers:32},{episode:28,title:"The Path to the Black Lodge",rating:8.93,rankers:34},{episode:29,title:"Miss Twin Peaks",rating:8.94,rankers:32},{episode:30,title:"Beyond Life and Death",rating:9.33,rankers:37},{episode:31,title:"Twin Peaks: Fire Walk with Me",rating:8.84,rankers:30}]}),define("text!templates/scatterplot.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h2 class="panel-title">Scatterplot</h2>\n    <span class="links">\n      <a on-click="coffee">Coffescript</a>\n      <a on-click="html">HTML</a>\n    </span>\n  </div>\n\n  <div class="panel-body">\n    <p class="alert alert-info">The stock chart can also be used to plot scattered data.</p>\n\n    <p>Rating data for the Twin Peaks episodes.</p>\n\n	  <svg width=500 height=400>\n	    <g transform="translate(20, 30)">\n	      {{# Stock({data: data, xaccessor: xaccessor, yaccessor: yaccessor, width: width, height: height, closed: false }) }}\n	        {{# curves:num }}\n	        	{{# line.path.points():count }}\n	        		<g transform="{{ translate(.) }}">\n		        		<circle r="5" cx="0" cy="0" stroke="{{ colors(num) }}" fill="white"\n		        			on-mouseenter="enter" on-mouseleave="leave" />\n		        		{{# item[count] }}\n		        			{{# selected }}\n		        				{{# firsthalf(count) }}\n					        		<text transform="translate(15, 5)" text-anchor="start">{{ title }}</text>\n		        				{{/ end if }}\n		        				{{^ firsthalf(count) }}\n					        		<text transform="translate(-15, 5)" text-anchor="end">{{ title }}</text>\n		        				{{/ end else }}\n				        	{{/ selected }}\n				        {{/ end of item }}\n				       </g>\n	          {{/ end points }}\n	        {{/ curves }}\n	        <line x1="{{ xscale(0) }}" y1="{{ yscale(9.6) }}" x2="{{ xscale(0) }}" y2="{{ yscale(7.9) }}" />\n	        <line x1="{{ xscale(-0.5) }}" y1="{{ yscale(7.95) }}" x2="{{ xscale(32.1) }}" y2="{{ yscale(7.95) }}" />\n	        {{# [8, 8.5, 9, 9.5] }}\n	        	<g transform="translate({{ xscale(0) }},{{ yscale(.) }})">\n		        	<circle r="2" cx="0" cy="0" stroke="grey" fill="grey" />\n		        	<text transform="translate(5, 5)" text-anchor="start">{{ . }}</text>\n		        </g>\n	        {{/ end ratings }}\n	      {{/ end of stock }}\n	    </g>\n	  </svg>\n  </div>\n</div>\n'}),function(){define("views/scatterplot",["ractive","show_source","paths/stock","palette/util","json!data/twin-peaks.json","text!templates/scatterplot.html"],function(e,t,n,r,i,s){var o,u,a;return u=["#3E90F0","#7881C2","#707B82"],o=r.palette_to_function(u),a=new e({el:"#scatterplot",template:s,data:{Stock:n,data:[i],xaccessor:function(e){var t;return t=e.episode,t},yaccessor:function(e){var t;return t=e.rating,t},width:460,height:350,colors:o,translate:function(e){var t,n;return t=e[0],n=e[1],"translate("+t+","+n+")"},firsthalf:function(e){return e<=i.length/2}}}),a.on("enter",function(e){var t,n,r;return r=e.index,n=r.num,t=r.count,i[t].selected=!0,this.update()}),a.on("leave",function(e){var t,n,r;return r=e.index,n=r.num,t=r.count,i[t].selected=!1,this.update()}),t("scatterplot",a)})}.call(this),function(){define("paths/waterfall",["./ops","./linear","./rectangle"],function(e,t,n){return function(r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,M,_,D,P,H,B,j;h=r.data,o=r.accessor,M=r.width,v=r.height,d=r.gutter,f=r.compute,T=r.min,x=r.max,o==null&&(o=function(e){return e}),d==null&&(d=0),T==null&&(T=0),x==null&&(x=0),y=0,p=[];for(_=0,P=h.length;_<P;_++)c=h[_],B=o(c),A=B.value,s=B.absolute,j=s?[0,A||y]:[y,y+A],E=j[0],m=j[1],S=Math.min(E,m),i=Math.max(E,m),T=Math.min(T,S),x=Math.max(x,i),y=m,p.push({item:c,low:E,high:m});N=p.length,u=(M-d*(N-1))/N,l=[],k=t([T,x],[v,0]);for(g=D=0,H=p.length;D<H;g=++D)c=p[g],b=g*(u+d),C=b+u,a=k(c.low),L=k(c.high),w=n({left:b,right:C,bottom:a,top:L}),l.push(e.enhance(f,{item:c.item,line:w,index:g}));return{curves:l,scale:k}}})}.call(this),define("text!templates/waterfall.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h2 class="panel-title">Waterfall</h2>\n    <span class="links">\n      <a on-click="coffee">Coffescript</a>\n      <a on-click="html">HTML</a>\n    </span>\n  </div>\n\n  <div class="panel-body">\n    <p class="alert alert-info">A breakdown of incomes and costs for each month</p>\n\n    <select value=\'{{ month }}\'>\n      {{# months:num }}\n        <option value=\'{{ num }}\'>{{ . }}</option>\n      {{/ months }}\n    </select>\n\n    <svg width="500" height="440">\n      <g transform="translate(20, 30)">\n        {{# Waterfall({data: profit[0], width: width, height: height, gutter: gutter, max: max, min: min }) }}\n          {{# curves:num }}\n            <path d="{{ line.path.print() }}" stroke="none" fill="{{ color(item) }}" />\n            <text transform="{{ translate(line) }}" text-anchor="middle">{{ item.name }}</text>\n          {{/ curves }}\n        {{/ end of stock }}\n      </g>\n    </svg>\n  </div>\n</div>'}),function(){define("views/waterfall",["ractive","show_source","paths/waterfall","text!templates/waterfall.html"],function(e,t,n,r){var i,s,o,u;return s=["January","February","March"],o=[[{name:"Gross income",value:30,absolute:!0},{name:"Transport",value:-6},{name:"Distribution",value:-3},{name:"Detail income",absolute:!0},{name:"Taxes",value:-8},{name:"Net income",absolute:!0}],[{name:"Gross income",value:33,absolute:!0},{name:"Transport",value:-4},{name:"Distribution",value:-5},{name:"Detail income",absolute:!0},{name:"Taxes",value:-7},{name:"Net income",absolute:!0}],[{name:"Gross income",value:40,absolute:!0},{name:"Transport",value:-3},{name:"Distribution",value:-5},{name:"Detail income",absolute:!0},{name:"Taxes",value:-4},{name:"Net income",absolute:!0}]],i=function(e,t){var n,r,i,s,o;i=e.length,n=[];for(r=s=0,o=i-1;0<=o?s<=o:s>=o;r=0<=o?++s:--s)n[(r+t)%i]=e[r];return n},u=new e({el:"#waterfall",template:r,data:{Waterfall:n,months:s,profit:o,max:40,width:460,height:350,gutter:10,translate:function(e){return"translate("+e.centroid[0]+",370)"},color:function(e){return e.absolute?"#acd1e9":"#fa6078"}}}),u.observe("month",function(e){return this.animate("profit",i(o,parseInt(e)))}),t("waterfall",u)})}.call(this),function(){define("app",["views/logo","views/overlay","views/pie","views/stock","views/radar","views/line","views/bar","views/tree","views/graph","views/scatterplot","views/waterfall"],function(){return console.log("app loaded")})}.call(this)})();